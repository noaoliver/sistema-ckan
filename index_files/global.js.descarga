var shownCollPopupID=-1;
function send_video_data() {
    let video_id = $("#video_id").val();
    let videoinfo__title = $.trim($(".videoinfo__title").text());
    //let videoinfo__descr = $.trim($("#singe_videoinfo_descr").val());
    let videoinfo__descr = $.trim($("#singe_videoinfo_descr").val().replace(/\n/g, "<br>"));
    
    if (videoinfo__title == "") {
        $(".videoinfo__title").addClass("input_danger");
        return false;
    } else {
        $(".videoinfo__title").removeClass("input_danger");
    }
    $(".videoinfo__descr").text(videoinfo__descr);
    
    $(".videoinfo__descr").html($("#singe_videoinfo_descr").val().replace(/\n/g, "<br>"));
    
    $.ajax({
        url: "../backend_files/video_data_backend.php",
        type: "POST",
        data: { video_id: video_id, title: videoinfo__title, description: videoinfo__descr, opt: "vid_desc" },
        success: function (followup) {
            if (followup == "1") {
            } else {
            }
        },
    });
}




    function default_library_images()
        {   
            
            $.ajax({
                    url: "ajax_query/default_library_image.php",
                    type: "POST",
                    dataType: 'json',
                    //project_loader
                    beforeSend: function () {
                        
                        $('.project_loader').show();
			            $('.new_project_btn').hide();
                            
			                
		            },
                     success: function(res) {
                           // var templet = $("#listItemTemplate_input").html();
                          
                           if(res.result){
                               
                              let responses = res.data; 
                              
                              
                                  $('#default_library_list_data').html('');
                                  
                                  if(res.data.length>0){
                                  
                                  let default_library = '';
                                  
                                    
                                    $.each(responses , function(index, item) { 
                                                    
                					default_library += `<div class="content"><div class="content-overlay"></div>
                                			                <img src="${item}" class="img-fluid" />
                                			                <div class="content-details fadeIn-bottom">
                                			                    <button type="button" class="ordinarybutton py-2 fs-14 my-0 newcollection__savebutton" onclick="sel_library_image_for_thumbnail('${item}')" >Select</button>
                                			                </div>       
                                		                 </div>  `;
                    				});
                                    $('#default_library_list_data').html(default_library);
                                  
                                    
                                    $('.project_loader').hide();
    			                    $('.new_project_btn').show();
    			                    return false;
    			                    
                                  }else{
                                      
                                     $('#default_library_list_data').html('<p>No images found in the library.</p>');
                                  }   
                               
                           }else{
                               
                                
                           }
                       
                    },
                });
            
            
        }

function send_video_data_all(video_id)
{let videoinfo__title=$.trim($('#v_title_in_'+video_id).val());let videoinfo__descr=$.trim($('#descr_edit_'+video_id).val());if(videoinfo__title=='')
{$('.videoinfo__title').addClass('input_danger');return false;}
else
{$('.videoinfo__title').removeClass('input_danger');}
$('.videoinfo__descr').text(videoinfo__descr);$.ajax({url:"../backend_files/video_data_backend.php",type:"POST",data:{video_id:video_id,title:videoinfo__title,description:videoinfo__descr,opt:'vid_desc'},success:function(followup)
{if(followup=='1')
{$('#v_title_a_'+video_id).text(videoinfo__title);$('#descr_'+video_id).html(videoinfo__descr);}
else
{}}});}
function send_vari_data_all(vari_id)
{let videoinfo__title=$.trim($('#va_title_in_'+vari_id).val());if(videoinfo__title=='')
{$('.videoinfo__title').addClass('input_danger');return false;}
else
{$('.videoinfo__title').removeClass('input_danger');}
$.ajax({url:"../backend_files/video_data_backend.php",type:"POST",data:{vari_id:vari_id,title:videoinfo__title,opt:'vari_desc'},success:function(followup)
{if(followup=='1')
{$('#va_title_a_'+vari_id).text(videoinfo__title);}
else
{}}});}
function send_coll_data()
{let video_id=$('#video_id').val();let videoinfo__title=$.trim($('#videoinfo_title').text());let videoinfo__descr=$.trim($('#singe_videoinfo_descr').val());$('#videoinfo_descr').text(videoinfo__descr);$.ajax({url:"../backend_files/video_data_backend.php",type:"POST",data:{video_id:video_id,title:videoinfo__title,description:videoinfo__descr,opt:'vid_desc'},success:function(followup)
{if(followup=='1')
{}
else
{}}});}
function vid_comment_submit(type)
{let new_comment=$.trim($('#new_comment').val());let video_id=$('#video_id').val();let video_timestamp=$('#video_timestamp').val();let current_time=player.currentTime();let showtimestamp=0;if($('input[name="addtimestamp"]').is(':checked')==true)
{showtimestamp=1;}
else
{showtimestamp=0;}
if(new_comment!='')
{$.ajax({url:site_url+"backend_files/comments_backend.php",type:"POST",data:{video_id:video_id,new_comment:new_comment,opt:'new_comment',type:type,showtimestamp:showtimestamp,video_timestamp:current_time},success:function(followup)
{if(followup!=='')
{if(followup==3)
{swal("","Please login to continue","warning");}
else
{count_comment(video_id);$(followup).insertAfter($('.comment').show().last());$('#new_comment').val('');}}
else
{}}});}}
function count_comment(vid_id)
{$.ajax({url:site_url+"backend_files/comments_backend.php",type:"POST",data:{video_id:vid_id,opt:'count_comment'},success:function(followup)
{if(followup!=='')
{$('.commentszone__commentscounter').text(followup);}}});}
function vid_reply_submit(comment_id)
{let new_comment=$.trim($('#reply_comment_'+comment_id).val());let video_id=$('#video_id').val();let video_timestamp=$('#video_timestamp').val();let showtimestamp=0;if($('input[name="addtimestamp"]').is(':checked')==true)
{showtimestamp=1;}
else
{showtimestamp=0;}
if(new_comment!='')
{$.ajax({url:site_url+"backend_files/comments_backend.php",type:"POST",data:{video_id:video_id,comment_id:comment_id,new_comment:new_comment,opt:'reply_comment',showtimestamp:showtimestamp,video_timestamp:video_timestamp},success:function(followup)
{if(followup!=='')
{$(followup).insertAfter($('#reply_comments_div_'+comment_id+' .reply_comment').last());$('#reply_comment_'+comment_id).val('');$('#reply_div_'+comment_id).hide();}
else
{}}});}}
function coll_comment_submit(type, video_id)
{let new_comment=$.trim($('#new_comment').val());//let video_id=$('#video_id').val();
let video_timestamp=$('#video_timestamp').val();let current_time=player.currentTime();let showtimestamp=0;if($('input[name="addtimestamp"]').is(':checked')==true)
{showtimestamp=1;}
else
{showtimestamp=0;}
if(new_comment!='')
{$.ajax({url:site_url+"backend_files/comments_backend.php",type:"POST",data:{video_id:video_id,new_comment:new_comment,opt:'new_comment',type:type,site_url:site_url,showtimestamp:showtimestamp,video_timestamp:current_time},success:function(followup)
{if(followup!=='')
{count_comment(video_id);$(followup).insertAfter($('.comment').show().last());$('#new_comment').val('');}
else
{}}});}}
function coll_comment_load()
{let video_id=$('#first_video_id').val();$.ajax({url:site_url+"backend_files/comments_backend.php",type:"POST",data:{video_id:video_id,opt:'load_comment',site_url:site_url},success:function(followup)
{if(followup!=='')
{$('.comments').html(followup);$('#new_comment').val('');}
else
{}}});}
$(function () {});
function edit_collection() {
    var collection_id = $("#collection_id").val();
    var single_collection_title = $("#single_collection_title").text();
    //var single_collection_desc = $("#single_collection_desc").val();
    var single_collection_desc = $("#single_collection_desc").val().replace(/\n/g, "<br>");
    //$("#collection_desc").text(single_collection_desc);
    
    $("#collection_desc").html($("#single_collection_desc").val().replace(/\n/g, "<br>"));
    
    if (single_collection_title == "") {
        $("#single_collection_title").addClass("input_danger");
        $("#edit_collection_error").val(1);
        return false;
    } else {
        $("#single_collection_title").removeClass("input_danger");
        $("#edit_collection_error").val(2);
    }
    $.ajax({
        url: "../backend_files/create_collection.php",
        type: "POST",
        data: { collection_id: collection_id, single_collection_title: single_collection_title, single_collection_desc: single_collection_desc, opt: "edit_collection" },
        success: function (followup) {},
    });
}

function delete_vid(id)
{
    $.ajax({url:"../backend_files/video_backend.php",type:"POST",
    beforeSend:function(){
      $('#dlt_btn_'+id).hide();
      $('#spin_'+id).show();
    },
    data:{video_id:id,opt:'delete_video'},success:function(followup)
{if(followup=='1')
{//window.location.href=site_url+"?p=videos";
    $('#dlt_btn_'+id).show();
      $('#spin_'+id).hide();
      $('#info_msg').fadeIn().delay(2000).fadeOut();
      $('#info_msg .msg_text').text('Videos deleted successfully');
   video_filter(3); 
   get_v_count();
}
else
{}}});}
function delete_svid(id)
{
    $.ajax({url:"../backend_files/video_backend.php",type:"POST",
    beforeSend:function(){
      $('#dlt_btn_'+id).hide();
      $('#spin_'+id).show();
    },
    data:{video_id:id,opt:'delete_video'},success:function(followup)
{if(followup=='1')
{//window.location.href=site_url+"?p=videos";
    $('#dlt_btn_'+id).show();
      $('#spin_'+id).hide();
      $('#info_msg').fadeIn().delay(2000).fadeOut();
      $('#info_msg .msg_text').text('Videos deleted successfully');
      setTimeout(function(){ location.reload(); }, 2000); 
       
}
else
{}}});}
function delete_vari(id,token)
{$.ajax({url:"../backend_files/video_backend.php",type:"POST",data:{video_id:id,opt:'delete_variation'},success:function(followup)
{if(followup=='1')
{window.location.href="?p=variations&t="+token;}
else
{}}});}
function delete_c_vid(id)
{
    var collection_id = $('#collection_id').val();
    $.ajax({url:"../backend_files/video_backend.php",type:"POST",data:{video_id:id,opt:'delete_col_video', collection_id},success:function(followup)
{if(followup=='1')
{location.reload();}
else
{}}});}
function delete_coll_vid(id)
{$.ajax({url:"../backend_files/video_backend.php",type:"POST",data:{video_id:id,opt:'delete_video'},success:function(followup)
{if(followup=='1')
{window.location.reload();}
else
{}}});}
function dlt__multi_videos()
{var favorite=[];$.each($("input[name='videos_chk']:checked"),function(){favorite.push($(this).val());});
$.ajax({url:"../backend_files/video_backend.php",type:"POST",data:{video_id:favorite,opt:'delete_multi_video'},success:function(followup)
{setTimeout(function(){
    //window.location.reload();
    $('#deleteconfirmmulti').removeClass('deleteconfirm--active');
    $('#info_msg').fadeIn().delay(2000).fadeOut();
      $('#info_msg .msg_text').text('Videos deleted successfully');
    video_filter(3);
    get_v_count();
},2000);}});}
function dlt__multi_videoscoll()
{var collection_id=$('#collection_id').val();var favorite=[];$.each($("input[name='videos_chk']:checked"),function(){favorite.push($(this).val());});
$.ajax({url:"../backend_files/video_backend.php",type:"POST",data:{video_id:favorite,collection_id:collection_id,opt:'delete_multi_video_coll'},success:function(followup)
{swal("","Videos deleted Successfully.","success");setTimeout(function(){window.location.reload();},2000);}});}
function save_attr(attr,type,vari_id="")
{var val=$('input[name="playerbgcolor"]').val();var video_id=$('#video_id').val();var img_path=$('#img_path').val();var showlogo=0;var logo_title=$('#logo_title').val();var logo_url=$('#logo_url').val();var logo_position=$('#logo_position').val();var logo_size_w=$('#logo_size_w').val();var logo_size_h=$('#logo_size_h').val();var player_skins=$('#player_skins').val();var playbutton=$('#playbutton').val();var play_btn_color=$('#play_btn_color').val();var showplaybutton=0;if($('input[name="showplaybutton"]').is(':checked')==true)
{showplaybutton=1;}
else
{showplaybutton=0;}
if($('input[name="showlogo"]').is(':checked'))
{showlogo=1;}else{showlogo=0;}
var reset_color=0;if($('#reset_color').is(':checked')==true)
{reset_color=1;}
else
{reset_color=0;}
var play_btn_animation = $('#play_btn_animation').val();
if($('input[name="animation_infinite_check"]').is(':checked')==true)
{
    animation_button_option = 1;
}
else
{
    animation_button_option = 0;
}

$.ajax({url:"../backend_files/video_controls.php",type:"POST",data:{
    video_id:video_id,val:val,attr:attr,opt:'control',showlogo:showlogo,img_path:img_path,logo_title,logo_url,logo_position,logo_size_w,logo_size_h,player_skins,type,vari_id,reset_color,playbutton,play_btn_color,showplaybutton, play_btn_animation, animation_button_option
    
},beforeSend:function(){$('#attr_btn').hide();$('#attr_spin').show();},success:function(followup)
{$('#attr_spin').hide();$('#attr_save_tick').show();setTimeout(function(){$('#attr_save_tick').hide();$('#attr_btn').show();},2000);load_s_player(video_id);}});}
function save_cta()
{var ctatype = $("#ctatype").val();
    var video_id = $("#video_id").val();
    var cta_text = $("#cta_text_val").val();
    var cta_link = $("#cta_link").val();
    var ctatime = $("#ctatime").val();
    var cta_html = $("#cta_html").val();
    if ($("#add_button_opt").is(":checked") == true) {
        var add_button_opt = 1;
    } else {
        var add_button_opt = 0;
    }

    if($('input[name="customSwitch1"]').is(':checked')==true)
    {
        var customSwitch1 = 1;
    }
    else
    {
        var customSwitch1 = 0;
    }
    var cta_ls_btn1 = $("#cta_ls_btn1").val();
    var cta_ls_btn2 = $("#cta_ls_btn2").val();
    var cta_ls_btn_color1 = $("#cta_ls_btn_color1").val();
    var cta_ls_btn_ac1 = $("#cta_ls_btn_ac1").val();
    var cta_ls_btn_ac2 = $("#cta_ls_btn_ac2").val();
    var cta_ls_btn_color2 = $("#cta_ls_btn_color2").val();
    var cta_ls_text_color1 = $("#cta_ls_text_color1").val();
    var cta_ls_text_color2 = $("#cta_ls_text_color2").val();
    var ctathumb = $("#ctathumb")[0].files[0];
    var form_data = new FormData();
    form_data.append("video_id", video_id);
    form_data.append("ctatype", ctatype);
    form_data.append("cta_text", cta_text);
    form_data.append("cta_link", cta_link);
    form_data.append("ctatime", ctatime);
    form_data.append("opt", "cta_control");
    form_data.append("ctathumb", ctathumb);
    form_data.append("cta_html", cta_html);
    form_data.append("add_button_opt", add_button_opt);
    form_data.append("cta_ls_btn1", cta_ls_btn1);
    form_data.append("cta_ls_btn2", cta_ls_btn2);
    form_data.append("cta_ls_btn_ac1", cta_ls_btn_ac1);
    form_data.append("cta_ls_btn_ac2", cta_ls_btn_ac2);
    form_data.append("cta_ls_btn_color1", cta_ls_btn_color1);
    form_data.append("cta_ls_btn_color2", cta_ls_btn_color2);
    form_data.append("cta_ls_text_color1", cta_ls_text_color1);
    form_data.append("cta_ls_text_color2", cta_ls_text_color2);
    form_data.append("customSwitch1", customSwitch1);
    $.ajax({
        url: "../backend_files/video_controls.php",
        type: "POST",
        data: form_data,
        contentType: false,
        cache: false,
        processData: false,
        beforeSend: function () {
            $("#ct_btn").hide();
            $("#ct_load").show();
        },
        success: function (followup) {
            $("#ct_load").hide();
            $("#ct_check").show();
            setTimeout(function () {
                $("#ct_check").hide();
                $("#ct_btn").show();
            }, 2000);
            load_s_player(video_id);
        },
    });}
function chk_button2()
{
    if($('input[name="customSwitch1"]').is(':checked')==true)
   {
       $('#textbutton2').show();
   }
   else
   {
       $('#textbutton2').hide();
   }
}

function save_thumb_opt()
{var video_id=$('#video_id').val();var thumbnailtype=$('#thumbnailtype').val();var imagesource=$('#imagesource').val();if(thumbnailtype==1)
{if(imagesource==2)
{save_library_image();}
else if(imagesource==1)
{
    save_default_thumbnail();
}
else
{save_thumb();}}
else
{save_thumb_gif();}
progressbar_thumbs('video');}
function save_default_thumbnail()
{
    var video_id = $('#video_id').val();
    //save_default_thumbnail.php
    
    $.ajax({ 
		url: "../backend_files/save_default_thumbnail.php", 
		type: "POST", 
		data: 
		{ 
			video_id:video_id
		}, 
		beforeSend:function(){
	        $('#thumb_btn').hide();
            $('#thumb_spin').show();
		},
		success: function(followup) 
		{ 
		    $('#thumb_btn').show();
            $('#thumb_spin').hide();
            
            
		} 
	});
}
function save_default_thumbnail_vari()
{
    var video_id = $('#video_id').val();
    var vari_id=$('#vari_id').val();
    
    $.ajax({ 
		url: "../backend_files/save_default_thumbnail_vari.php", 
		type: "POST", 
		data: 
		{ 
			video_id:video_id, vari_id
		}, 
		beforeSend:function(){
	        $('#thumb_btn').hide();
            $('#thumb_spin').show();
		},
		success: function(followup) 
		{ 
		    $('#thumb_btn').show();
            $('#thumb_spin').hide();
            
		} 
	});
}
function progressbar_thumbs(type,variation_id="")
{var video_id=$('#video_id').val();var progress_bar_thumb=0;if($('input[name="progress_bar_thumb"]').is(':checked')==true)
{progress_bar_thumb=1;}
$.ajax({url:"../backend_files/video_controls.php",type:"POST",data:{video_id:video_id,progress_bar_thumb,opt:'progressbar_thumbs_opt',type,variation_id},beforeSend:function(){$('#thumb_btn').hide();$('#thumb_spin').show();},success:function(followup)
{$('#thumb_btn').show();$('#thumb_spin').hide();if(type=='video'){load_s_player(video_id);}else{load_var_player(variation_id, video_id);}}});}
function save_thumb()
{var cnt=0;var video_id=$('#video_id').val();var thumbnailtype=$('#thumbnailtype').val();var imagesource=$('#imagesource').val();
var thumbnailimage=$('#thumbnailimage')[0].files[0];var text_overlay=$('#text_overlay').val();if($('input[name="thumboverlay"]').is(':checked')){thumboverlay=1;}else{thumboverlay=0;}
var upload_thumb_img = $('#upload_thumb_img').val();
if(imagesource==3)
{if(document.getElementById("thumbnailimage").files.length>0)
{$('#thumbnailimage_error').html('Note: Maximum Image size is 2 mb.');}
else
{$('#thumbnailimage_error').html('Image should not be empty.');cnt++;}}
if(cnt>0)
{return false;}
else
{var form_data=new FormData();form_data.append('thumbnailtype',thumbnailtype);form_data.append('imagesource',imagesource);form_data.append('thumbnailimage',thumbnailimage);
form_data.append('video_id',video_id);form_data.append('thumboverlay',thumboverlay);
form_data.append('text_overlay',text_overlay);
form_data.append('upload_thumb_img',upload_thumb_img);
$.ajax({url:"../backend_files/video_thumbnail.php",type:"POST",data:form_data,contentType:false,cache:false,processData:false,beforeSend:function(){$('#thumb_btn').hide();$('#thumb_spin').show();},success:function(followup)
{$('#thumb_spin').hide();$('#thumb_save_tick').show();setTimeout(function(){$('#thumb_save_tick').hide();$('#thumb_btn').show(); setTimeout(function(){ load_s_player(video_id); }, 1000); });}});}}
function save_thumb_gif()
{var video_id=$('#video_id').val();var thumbnailtype=$('#thumbnailtype').val();var imagesource=$('#imagesource').val();var text_overlay=$('#text_overlay').val();var thumb_start=$('#thumb_start').val();var thumb_end=$('#thumb_end').val();if($('input[name="thumboverlay"]').is(':checked')){thumboverlay=1;}else{thumboverlay=0;}
var form_data=new FormData();form_data.append('thumbnailtype',thumbnailtype);form_data.append('imagesource',imagesource);form_data.append('video_id',video_id);form_data.append('thumboverlay',thumboverlay);form_data.append('text_overlay',text_overlay);form_data.append('thumb_start',thumb_start);form_data.append('thumb_end',thumb_end);
$.ajax({url:"../backend_files/video_thumbnail_gif.php",type:"POST",data:form_data,contentType:false,cache:false,processData:false,beforeSend:function(){$('#thumb_btn').hide();$('#thumb_spin').show();},success:function(followup)
{$('#thumb_spin').hide();$('#thumb_save_tick').show();setTimeout(function(){$('#thumb_save_tick').hide();$('#thumb_btn').show();});  setTimeout(function(){ load_s_player(video_id); }, 1000); }});}
function showlogo()
{if($('input[name="showlogo"]').is(':checked'))
{$('.show_logo').show();$('.show_logo').removeClass('vjs-hidden');}else{$('.show_logo').hide();}}
function showlogo_new()
{if($('input[name="showlogo"]').is(':checked'))
{if($('#logo_position').val()=='playbar')
{$('.vjs-logo-bar').show();}
else
{$('.vjs-logo').show();}
$('#logo_options_div').show();}else{$('.vjs-logo').hide();$('.vjs-logo-bar').hide();$('#logo_options_div').hide();}}
function showlogo_upgrade()
{if($('input[name="showlogo"]').is(':checked'))
{$('#logo_options_div').show();}else{$('#logo_options_div').hide();}}
function apply_p_text(x)
{$('.container-pass-text').html(x);}
function vis_control()
{var video_id=$('#video_id').val();var whocanwatchthisvideo=$('select[name="whocanwatchthisvideo"]').val();var privacytext=$('textarea[name="privacytext"]').val();var privacypwd=$('input[name="privacypwd"]').val();var whocancommentthisvideo=$('select[name="whocancommentthisvideo"]').val();var wherecanembedthisvideo=$('select[name="wherecanembedthisvideo"]').val();var spcfc_dmn=$('#spcfc_dmn').val();$.ajax({url:"../backend_files/video_controls.php",type:"POST",data:{video_id:video_id,whocanwatchthisvideo:whocanwatchthisvideo,privacytext:privacytext,privacypwd:privacypwd,whocancommentthisvideo:whocancommentthisvideo,wherecanembedthisvideo:wherecanembedthisvideo,opt:'vis_control',spcfc_dmn:spcfc_dmn},beforeSend:function(){$('#vis_btn').hide();$('#vis_load').show();},success:function(followup)
{$('#vis_load').hide();$('#vis_check').show();setTimeout(function(){$('#vis_check').hide();$('#vis_btn').show();},2000);load_s_player(video_id);}});}
function player_control()
{var cnt=0;var video_id=$('#video_id').val();var video_subtitle=[];$('input[name="video_subtitle[]"]').each(function(){var value=$(this).val();video_subtitle.push(value);});var subtitle_lang=[];$('select[name="subtitle_lang[]"]').each(function(){var value=$(this).val();subtitle_lang.push(value);});var defaultSubtitle=[];$("input:checkbox[name=default_subtitle]").each(function(){if($(this).is(':checked')==true)
{defaultSubtitle.push(1);}
else
{defaultSubtitle.push(0);}});var showplaybar=0;if($('input[name="showplaybar"]').is(':checked')==true)
{showplaybar=1;}
var showvolumecontrol=0;if($('input[name="showvolumecontrol"]').is(':checked')==true)
{showvolumecontrol=1;}
var showsharecontrol=0;if($('input[name="showsharecontrol"]').is(':checked')==true)
{showsharecontrol=1;}
var showspeedcontrol=0;if($('input[name="showspeedcontrol"]').is(':checked')==true)
{showspeedcontrol=1;}
var showqualitycontrol=0;if($('input[name="showqualitycontrol"]').is(':checked')==true)
{showqualitycontrol=1;}
var showfullscreencontrol=0;if($('input[name="showfullscreencontrol"]').is(':checked')==true)
{showfullscreencontrol=1;}
var controlsvisibility=$('select[name="controlsvisibility"]').val();var rewind_button_opt=0;if($('input[name="rewind_button_opt"]').is(':checked')==true)
{rewind_button_opt=1;}
var quality_switch=0;if($('input[name="quality_switch"]').is(':checked')==true)
{quality_switch=1;}
var playback_resume=0;if($('input[name="playback_resume"]').is(':checked')==true)
{playback_resume=1;}
var theater_mode=0;if($('input[name="theater_mode"]').is(':checked')==true)
{theater_mode=1;}
var pip_mode=0;if($('input[name="pip_mode"]').is(':checked')==true)
{pip_mode=1;}
var vr_360=0;if($('input[name="vr_360"]').is(':checked')==true)
{vr_360=1;}
var subtitles=0;if($('input[name="subtitles"]').is(':checked')==true)
{subtitles=1;}
var zoom=0;if($('input[name="zoom"]').is(':checked')==true)
{zoom=1;}
if(cnt>0)
{return false;}
$.ajax({url:"../backend_files/video_controls.php",type:"POST",data:{video_id:video_id,showplaybar:showplaybar,showvolumecontrol:showvolumecontrol,showsharecontrol:showsharecontrol,showspeedcontrol:showspeedcontrol,showqualitycontrol:showqualitycontrol,showfullscreencontrol:showfullscreencontrol,controlsvisibility:controlsvisibility,opt:'player_control',rewind_button_opt,quality_switch,playback_resume,theater_mode,pip_mode,vr_360,video_subtitle,subtitle_lang,defaultSubtitle,subtitles,zoom},beforeSend:function(){$('#cont_btn').hide();$('#cont_spin').show();},success:function(followup)
{$('#cont_spin').hide();$('#cont_save_tick').show();setTimeout(function(){$('#cont_save_tick').hide();$('#cont_btn').show();});load_s_player(video_id);}});}
function rmv_subtitle(x,r)
{swal({title:"Are you sure?",text:"You want to delete this subtitle!",type:"warning",showCancelButton:true,confirmButtonClass:"btn-danger",confirmButtonText:"Yes, delete it!",closeOnConfirm:false},function(){$.ajax({url:site_url+"backend_files/remove_subtitle.php",type:"POST",data:{id:x},success:function(followup)
{if(followup!=='')
{$('#row_'+r).remove();swal("","subtitle deleted successfully","success");}
else
{swal("","subtitle cannot be deleted","error");}}});});}
function imageuploader_link(x){var $=jQuery.noConflict();$('#vtt_file_'+x).click();}
function imageuploader_linksrt(x){var $=jQuery.noConflict();$('#srt_file_'+x).click();}
$(function(){$('.chkbox_collc').click(function(){var check=$('input[name=chkbox_collc]:checked').length;$('#num_coll_videos').text(check);});});
$(function(){$('.chkbox_collcection').click(function(){var check=$('input[name=chkbox_collcection]:checked').length;$('#num_coll_projects').text(check);});
    $('.newcollection__cancelbutton').click(function(){
       $('.newcollection').removeClass('newcollection--active'); 
    });
});
function chkbox_collc()
{var check=$('input[name=chkbox_collc]:checked').length;$('#num_coll_videos').text(check);}
function chkbox_collcection()
{var check=$('input[name=chkbox_collcection]:checked').length;$('#num_coll_projects').text(check);}
function showplaybar()
{if($('#showplaybar').is(':checked'))
{$('.vjs-progress-holder').show();//$('.vjs-time-control').show();
    
}
else
{$('.vjs-progress-holder').hide();//$('.vjs-time-control').hide();
    
}}
function showvolumecontrol()
{if($('#showvolumecontrol').is(':checked'))
{$('.vjs-volume-panel').show();}
else
{$('.vjs-volume-panel').hide();}}
function showsharecontrol()
{if($('#showsharecontrol').is(':checked'))
{$('.vjs-share-button').show();$('div#settings_button').show();
//$('.vjs-cog-menu-button').show();
    
}
else
{$('.vjs-share-button').hide();$('div#settings_button').hide();
//$('.vjs-cog-menu-button').hide();
    
}}
function showspeedcontrol()
{if($('#showspeedcontrol').is(':checked'))
{$('.vjs-extend-speed').attr('style','display:block !important');}
else
{$('.vjs-extend-speed').attr('style','display:none !important');}}
function showqualitycontrol()
{if($('#showqualitycontrol').is(':checked'))
{$('.vjs-quality-button').show();}
else
{$('.vjs-quality-button').hide();}}
function showfullscreencontrol()
{if($('#showfullscreencontrol').is(':checked'))
{$('.vjs-fullscreen-control').show();}
else
{$('.vjs-fullscreen-control').hide();}}
function create_single_collection() 
{var collection_id=$('#collection_id').val();var uncheck_videos_id=$('#uncheck_videos').val();var favorite=[];$.each($("input[name='chkbox_collc']:checked"),function(){favorite.push($(this).val());});$.ajax({url:"../backend_files/create_collection.php",type:"POST",data:{collection_id:collection_id,video_id:favorite,opt:'create_single_collection',uncheck_videos_id:uncheck_videos_id},success:function(followup)
{$('.newcollection__closepopup').click();window.location.reload();}});}
function single_collection_delete(videoID)
{var collection_id=$('#collection_id').val();$.ajax({url:"../backend_files/video_backend.php",type:"POST",data:{video_id:videoID,collection_id:collection_id,opt:'delete_coll_vid'},success:function(followup)
{if(followup=='1')
{swal("","Video deleted successfully","success");setTimeout(function(){location.reload();},2000);}
else
{}}});}
function delete_collection(collId, type="")
{$.ajax({url:"../backend_files/video_backend.php",type:"POST",data:{collection_id:collId,opt:'delete_coll'},beforeSend:function(){$('#dltloadtext').hide();$('#dltloader').show();},success:function(followup)
{
    $('#dltloader').hide();
    $('#dltloadtext').show();
    if(followup=='1')
{
    
    //window.location.href="?p=projects";
    if(type==2)
    {
        window.location.href="?p=projects";
    }
    else
    {
        datatable_fun('3');
    }
}
else
{}}});}
function videoinfo_editlnk()
{
    var title=$('.videoinfo__title');
    var description=$('.videoinfo__descr');
    var button=$('.videoinfo_editlnk');
    if(title.hasClass("videoinfo__title--editable")){
        if(send_video_data()!=false)
        {
            title.removeClass('videoinfo__title--editable');
            description.removeClass('videoinfo__descr--editable');
            button.removeClass('videoinfo_editlnk--editable');
            edit_textarea('singe_videoinfo_descr','videoinfo__descr');
            button.find('.tedittext').text('Edit');
        }
        
    }
    else
    {
        title.addClass('videoinfo__title--editable');
        description.addClass('videoinfo__descr--editable');
        button.addClass('videoinfo_editlnk--editable pt-0');
        edit_textarea('videoinfo__descr','singe_videoinfo_descr');
        button.find('.tedittext').text('Save');
    }
    
}
function send_course_data_all(video_id)
{let videoinfo__title=$.trim($('#v_title_in_'+video_id).val());let videoinfo__descr=$.trim($('#descr_edit_'+video_id).val());if(videoinfo__title=='')
{$('.videoinfo__title').addClass('input_danger');return false;}
else
{$('.videoinfo__title').removeClass('input_danger');}
$('.videoinfo__descr').text(videoinfo__descr);$.ajax({url:"../backend_files/course_data_backend.php",type:"POST",data:{video_id:video_id,title:videoinfo__title,description:videoinfo__descr,opt:'vid_desc'},success:function(followup)
{if(followup=='1')
{$('#v_title_a_'+video_id).text(videoinfo__title);$('#descr_'+video_id).html(videoinfo__descr);}
else
{}}});}
function courseinfo_editlnk_all(id){var title=$('#v_title_'+id);var title_edit=$('#v_title_in_'+id);var description=$('#descr_'+id);var description_edit=$('#descr_edit_'+id);var button=$('#v_edit_'+id);if(title_edit.hasClass("videoinfo__title--editable")){if(send_course_data_all(id)!=false)
{title.show();title_edit.hide();description.show();description_edit.hide();button.removeClass('videoinfo_editlnk--editable');title_edit.removeClass('videoinfo__title--editable');}}
else
{title_edit.addClass('videoinfo__title--editable');title.hide();title_edit.show();description.hide();description_edit.show();button.addClass('videoinfo_editlnk--editable');}}
function videoinfo_editlnk_all(id)
{
    var title=$('#v_title_'+id);
    var title_edit=$('#v_title_in_'+id);
    var description=$('#descr_'+id);
    var description_edit=$('#descr_edit_'+id);
    var button=$('#v_edit_'+id);
    if(title_edit.hasClass("videoinfo__title--editable"))
    {
        if(send_video_data_all(id)!=false)
        {
            title.show();
            title_edit.hide();
            description.show();
            description_edit.hide();
            button.removeClass('videoinfo_editlnk--editable');
            title_edit.removeClass('videoinfo__title--editable');
            button.find('.tedittext').text('Edit');
        }
                
    }
    else
    {
        title_edit.addClass('videoinfo__title--editable');
        title.hide();
        title_edit.show();
        description.hide();
        description_edit.show();
        button.addClass('videoinfo_editlnk--editable');
        button.find('.tedittext').text('Save');
        
    }
    
}
function variinfo_editlnk_all(id)
{
    var title=$('#va_title_'+id);
    var title_edit=$('#va_title_in_'+id);
    var button=$('#va_edit_'+id);
    if(title_edit.hasClass("videoinfo__title--editable"))
    {
        if(send_vari_data_all(id)!=false)
        {
            title.show();
            title_edit.hide();
            button.removeClass('videoinfo_editlnk--editable');
            title_edit.removeClass('videoinfo__title--editable');
            button.find('.tedittext').text('Edit');
        }
    }
    else
    {
        title_edit.addClass('videoinfo__title--editable');
        title.hide();
        title_edit.show();
        button.addClass('videoinfo_editlnk--editable');
        button.find('.tedittext').text('Save');
    }
}
function img_valid(var_img,var_error)
{var allowedFiles=[".gif",".png",".jpg",".jpeg"];var fileUpload=document.getElementById(var_img);var lblError=document.getElementById(var_error);
var regex=new RegExp("([a-zA-Z0-9\s_\\.\-:()])+("+allowedFiles.join('|')+")$");if(!regex.test(fileUpload.value.toLowerCase())){lblError.innerHTML="Please upload files having extensions: <b>"+allowedFiles.join(', ')+"</b> only.";$('#'+var_img).val('');$('.add_collection_image').attr('disabled',true);return false;}
else
{lblError.innerHTML='';$('.add_collection_image').attr('disabled',false);}
if($('#'+var_img)[0].files[0].size>1048576){lblError.innerHTML='File is too big!';$('#'+var_img).val('');$('.add_collection_image').attr('disabled',true);}
else
{lblError.innerHTML='';$('.add_collection_image').attr('disabled',false);}
return true;}
function thumb_img_valid(var_img,var_error)
{player_pause();var thumb_url='';var allowedFiles=[".gif",".png",".jpg",".jpeg"];var fileUpload=document.getElementById(var_img);var lblError=document.getElementById(var_error);
var regex=new RegExp("([a-zA-Z0-9\s_\\.\-:()])+("+allowedFiles.join('|')+")$");if(!regex.test(fileUpload.value.toLowerCase())){lblError.innerHTML="Please upload files having extensions: <b>"+allowedFiles.join(', ')+"</b> only.";$('#'+var_img).val('');return false;}
if($('#'+var_img)[0].files[0].size>2207735){lblError.innerHTML='File is too big!';$('#'+var_img).val('');return false;};var thumbnailimage=$('#'+var_img)[0].files[0];var form_data=new FormData();form_data.append('thumbnailimage',thumbnailimage);$.ajax({url:"../backend_files/thumbnail_upload.php",type:"POST",data:form_data,contentType:false,cache:false,processData:false,beforeSend:function(){$('#img_load').fadeIn();},success:function(followup)
{$('.vjs-poster').show().css('background-image','url('+followup+')');
thumb_url='<img src='+followup+' style="width: 70px; height: 62px;">';$('.thumbnailimage_icon').addClass('bg-none').html(thumb_url);$('#img_load').fadeOut();
    $('#upload_thumb_img').val(followup);
}});}
function ad_img_valid(var_img,var_error)
{var thumb_url='';var allowedFiles=[".gif",".png",".jpg",".jpeg"];var fileUpload=document.getElementById(var_img);var lblError=document.getElementById(var_error);
var regex=new RegExp("([a-zA-Z0-9\s_\\.\-:()])+("+allowedFiles.join('|')+")$");if(!regex.test(fileUpload.value.toLowerCase())){lblError.innerHTML="Please upload files having extensions: <b>"+allowedFiles.join(', ')+"</b> only.";$('#'+var_img).val('');return false;}
if($('#'+var_img)[0].files[0].size>2207735){lblError.innerHTML='File is too big!';$('#'+var_img).val('');return false;};var thumbnailimage=$('#'+var_img)[0].files[0];var form_data=new FormData();form_data.append('thumbnailimage',thumbnailimage);$.ajax({url:"../backend_files/ad_image_upload.php",type:"POST",data:form_data,contentType:false,cache:false,processData:false,beforeSend:function(){$('#adimage_load').fadeIn();},success:function(data)
{var followup=JSON.parse(data);var image=followup.image;var filename=followup.file;$('.overlay').html('<img src="'+image+'" style="width:350px; height:300px;">');thumb_url='<img src='+image+' style="width: 90px; height: 60px;">';$('.adimage_icon').addClass('bg-none').html(thumb_url);$('#overlay_ad_image_val').val(filename);$('#adimage_load').fadeOut();}});}
function thumb_overlay_valid(var_img,var_error)
{player_pause();var video_id=$('#video_id').val();var thumb_url='';var allowedFiles=[".gif",".png",".jpg",".jpeg"];var fileUpload=document.getElementById(var_img);
var lblError=document.getElementById(var_error);var regex=new RegExp("([a-zA-Z0-9\s_\\.\-:()])+("+allowedFiles.join('|')+")$");if(!regex.test(fileUpload.value.toLowerCase())){lblError.innerHTML="Please upload files having extensions: <b>"+allowedFiles.join(', ')+"</b> only.";$('#'+var_img).val('');return false;}
if($('#'+var_img)[0].files[0].size>1048576){lblError.innerHTML='File is too big!';$('#'+var_img).val('');};var thumbnailimage=$('#'+var_img)[0].files[0];var form_data=new FormData();form_data.append('thumbnailimage',thumbnailimage);form_data.append('video_id',video_id);$.ajax({url:"../backend_files/overlay_image_upload.php",type:"POST",data:form_data,contentType:false,cache:false,processData:false,beforeSend:function(){$('#img_load').fadeIn();},success:function(followup)
{var data=JSON.parse(followup);var image=data.image;var file=data.file;var watch_limit_url=$('#watch_limit_url').val();$('.vjs-limit-overlay').hide();$('#my-video').append('<div id="cta_modal_div" class="wl-modal video-js"><div id="cta_modal_text" class="container-text"><a href="'+watch_limit_url+'" id="cta_text_link" class="cta_text_link cta_text" target="_blank"><img class="cta_thumb_img w-100" id="cta_thumb_img" src="'+image+'" ></a></div><a href="javascript:void(0)"><div id="skip-video" class="wl-skip" onclick="skip_video()"><u>Skip</u></div></a></div>');$('#watch_time_image_file').val(file);thumb_url='<img src='+image+' style="width: 70px; height: 62px;">';$('.watchlimit_icon').addClass('bg-none').html(thumb_url);$('#img_load').fadeOut();}});}
function overlay_info_img(var_img,var_error)
{player_pause();var video_id=$('#video_id').val();var thumb_url='';var allowedFiles=[".gif",".png",".jpg",".jpeg"];var fileUpload=document.getElementById(var_img);var lblError=document.getElementById(var_error);
var regex=new RegExp("([a-zA-Z0-9\s_\\.\-:()])+("+allowedFiles.join('|')+")$");if(!regex.test(fileUpload.value.toLowerCase())){lblError.innerHTML="Please upload files having extensions: <b>"+allowedFiles.join(', ')+"</b> only.";$('#'+var_img).val('');return false;}
if($('#'+var_img)[0].files[0].size>1048576){lblError.innerHTML='File is too big!';$('#'+var_img).val('');};var thumbnailimage=$('#'+var_img)[0].files[0];var form_data=new FormData();form_data.append('thumbnailimage',thumbnailimage);form_data.append('video_id',video_id);
$.ajax({url:"../backend_files/overlay_image_upload.php",type:"POST",data:form_data,contentType:false,cache:false,processData:false,beforeSend:function(){$('#img_load').fadeIn();},success:function(followup)
{var data=JSON.parse(followup);var image=data.image;
var file=data.file;
var info_share_url=$('#info_share_url').val();
//$('#my-video').append('<div id="cta_modal_div" class="wl-modal video-js"><div id="cta_modal_text" class="container-text"><a href="'+info_share_url+'" id="cta_text_link" class="cta_text_link cta_text" target="_blank"><img class="cta_thumb_img w-100" id="cta_thumb_img" src="'+image+'" ></a></div><a href="javascript:void(0)"><div id="skip-video" class="wl-skip" onclick="skip_video()"><u>Skip</u></div></a></div>');
$('.vjs-icon img').prop('src', image);
$('#over_info_image_file').val(file);
thumb_url='<img src='+image+' style="width: 70px; height: 62px;">';
$('.overlay_info_icon').addClass('bg-none').html(thumb_url);$('#img_load').fadeOut();
    
}});
    
}
function mid_videos_valid(id)
{var var_img='midvideoupload_'+id;var var_error='mid_videos_error_'+id;var video_id=$('#video_id').val();var thumb_url='';var allowedFiles=[".mp4",".mkv",".MTS",".AVI",".MOV",".mpg",".m4v",".mpeg"];
var fileUpload=document.getElementById(var_img);var lblError=document.getElementById(var_error);var regex=new RegExp("([a-zA-Z0-9\s_\\.\-:()])+("+allowedFiles.join('|')+")$");if(!regex.test(fileUpload.value.toLowerCase())){lblError.innerHTML="Please upload files having extensions: <b>"+allowedFiles.join(', ')+"</b> only.";$('#'+var_img).val('');return false;}
if($('#'+var_img)[0].files[0].size>20971520){lblError.innerHTML='File is too big!';$('#'+var_img).val('');};var thumbnailimage=$('#'+var_img)[0].files[0];var form_data=new FormData();form_data.append('file',thumbnailimage);form_data.append('video_id',video_id);form_data.append('element_id',id);$.ajax({url:"../backend_files/mid_videos_upload.php",type:"POST",data:form_data,contentType:false,cache:false,processData:false,beforeSend:function(){$('#vid_load'+id).fadeIn();},success:function(followup)
{$('#vid_load'+id).fadeOut();var data=JSON.parse(followup);var row_id=data.element_id;var file=data.file;$('#midvideovalue_'+row_id).val(file);$('#midurl_'+row_id).val(file);}});}
function pre_videos_valid(var_img,var_error,element_id)
{var video_id=$('#video_id').val();var thumb_url='';var allowedFiles=[".mp4",".mkv",".MTS",".AVI",".MOV",".mpg",".m4v",".mpeg"];var fileUpload=document.getElementById(var_img);var lblError=document.getElementById(var_error);
var regex=new RegExp("([a-zA-Z0-9\s_\\.\-:()])+("+allowedFiles.join('|')+")$");if(!regex.test(fileUpload.value.toLowerCase())){lblError.innerHTML="Please upload files having extensions: <b>"+allowedFiles.join(', ')+"</b> only.";$('#'+var_img).val('');return false;}
if($('#'+var_img)[0].files[0].size>20971520){lblError.innerHTML='File is too big!';$('#'+var_img).val('');};var thumbnailimage=$('#'+var_img)[0].files[0];var form_data=new FormData();form_data.append('file',thumbnailimage);form_data.append('video_id',video_id);form_data.append('element_id',element_id);console.log($('#'+var_img)[0].files[0]);$.ajax({url:"../backend_files/mid_videos_upload.php",type:"POST",data:form_data,contentType:false,cache:false,processData:false,beforeSend:function(){$('#vid_load_'+element_id).fadeIn();},success:function(followup)
{$('#vid_load_'+element_id).fadeOut();var data=JSON.parse(followup);var row_id=data.element_id;var file=data.file;$('#'+element_id).val(file);}});}
function thumb_context_menu(var_img,var_error)
{player_pause();var video_id=$('#video_id').val();var thumb_url='';var allowedFiles=[".gif",".png",".jpg",".jpeg"];var fileUpload=document.getElementById(var_img);
var lblError=document.getElementById(var_error);var regex=new RegExp("([a-zA-Z0-9\s_\\.\-:()])+("+allowedFiles.join('|')+")$");if(!regex.test(fileUpload.value.toLowerCase())){lblError.innerHTML="Please upload files having extensions: <b>"+allowedFiles.join(', ')+"</b> only.";$('#'+var_img).val('');return false;}
if($('#'+var_img)[0].files[0].size>1048576){lblError.innerHTML='File is too big!';$('#'+var_img).val('');};var thumbnailimage=$('#'+var_img)[0].files[0];var form_data=new FormData();form_data.append('thumbnailimage',thumbnailimage);form_data.append('video_id',video_id);$.ajax({url:"../backend_files/overlay_image_upload.php",type:"POST",data:form_data,contentType:false,cache:false,processData:false,beforeSend:function(){$('#img_load').fadeIn();},success:function(followup)
{var data=JSON.parse(followup);var image=data.image;var file=data.file;$('#context_icon').val(file);thumb_url='<img src='+image+' style="width: 70px; height: 62px;">';$('.context_menu_icon').addClass('bg-none').html(thumb_url);$('#img_load').fadeOut();}});}
function add_vid_to_coll(collection_id,video_id)
{if($('#vidcol_'+collection_id+'_'+video_id).is(':checked'))
{chk_status=1;}
else
{chk_status=2;}
$.ajax({url:"../backend_files/collection_to_video.php",type:"POST",data:{collection_id:collection_id,video_id:video_id,chk_status:chk_status},beforeSend:function(){},success:function(followup)
{
    if(followup==1)
    {
        if(chk_status==1){
             $('#info_msg').fadeIn().delay(3000).fadeOut();
             $('.msg_text').text('Video added successfully.');
         } 
        if(chk_status==2){
             $('#info_msg').fadeIn().delay(3000).fadeOut();
             $('.msg_text').text('Video removed successfully.');
         } 
    }
    else
    {
        $('#fail_msg').fadeIn().delay(3000).fadeOut();
        $('.error_msg_text').text('Some error found. Please try again after some time.');
    }
}});}
function collec_box_videos()
{var collec_box=$('#collec_box');if(collec_box.hasClass('collectionentry__popup--hidden'))
{collec_box.removeClass('collectionentry__popup--hidden');collec_box.addClass('collectionentry__popup');}
else
{collec_box.addClass('collectionentry__popup--hidden');collec_box.removeClass('collectionentry__popup');}}
function multi_vid_to_coll(collection_id)
{var multicol=0;if($('input[name="multicol"]').is(':checked')){multicol=1;}else{multicol=0;}var favorite=[];$.each($("input[name='videos_chk']:checked"),function(){favorite.push($(this).val());});$.ajax({url:"../backend_files/video_backend.php",type:"POST",data:{video_id:favorite,collection_id:collection_id,opt:'add_multi_video', multicol},success:function(followup)
{$('#success_msg').fadeIn().delay(3000).fadeOut();}});}
function process_checkbox_click1()
{var checkedTotal=0;var $=jQuery.noConflict();$(".videolistentry > .videolistentry__checkboxzone input:checked").each(function(){checkedTotal++;});var show=(checkedTotal>0);$("#mainsearchform input[name=chkall]:checked").each(function(){show=1;});if(show)
{$(".videolist__batchcontrolsbox").addClass("videolist__batchcontrolsbox--shown");}
else
{$(".videolist__batchcontrolsbox").removeClass("videolist__batchcontrolsbox--shown");}}
function chk_delete()
{if($('.allvideos').is(':checked')==true)
{$(".videolist__batchcontrolsbox").addClass("videolist__batchcontrolsbox--shown");}
else
{$(".videolist__batchcontrolsbox").removeClass("videolist__batchcontrolsbox--shown");}}
function show_confirmation_videomultidelete(videoID)
{var popup=document.getElementById("deleteconfirmmulti");if(popup)
{popup.dataset.videoid=videoID;popup.classList.add("deleteconfirm--active");}
return false;}
function show_confirmation_videomultideletecoll(videoID)
{var popup=document.getElementById("deleteconfirmmulti");if(popup)
{popup.dataset.videoid=videoID;popup.classList.add("deleteconfirm--active");}
return false;}
function limit_count(x)
{var total_count=$('#total_count').val();var from_total=$('.from_total');var to_total=$('.to_total');var to=$('#to');var to=$('#to').val();var from=$('#from').val();var from_val=parseInt(from)+parseInt(x);var to_val=parseInt(x)+parseInt(to)
$('#from').val(1);from_total.text(1);$('#from').val(0);if(parseInt(x)<=parseInt(total_count))
{$('#to').val(x);to_total.text(x);$('#count').val(0);$('#nxt_btn').removeClass('disabled');$('#prev_btn').addClass('disabled');}
else
{$('#to').val(total_count);to_total.text(total_count);$('#count').val(1);$('#nxt_btn').addClass('disabled');$('#prev_btn').addClass('disabled');}}
function pager_count() {
    var total_count = $("#total_count").val();
    var base_count = $("#video_limit").val();
    var from_total = $(".from_total");
    var to_total = $(".to_total");
    var to = $("#to").val();
    var toText = $(".to_total").text();
    var fromText = $(".from_total").text();
    var from = $("#from").val();
    var from_val = parseInt(from) + parseInt(base_count);
    var to_val = parseInt(base_count) + parseInt(to);
    var fromValText = parseInt(fromText) + parseInt(base_count);
    var toVal = 0;
    var fromVal = 0;
    var cnt = 0;
    if (parseInt(to_val) < parseInt(total_count)) {
        toVal = to_val;
        $("#prev_btn").removeClass("disabled");
    } else if (parseInt(to_val) == parseInt(total_count)) {
        toVal = total_count;
        $("#count").val(1);
        $("#nxt_btn").addClass("disabled");
        $("#prev_btn").removeClass("disabled");
        cnt++;
    } else {
        toVal = total_count;
        $("#count").val(1);
        $("#nxt_btn").addClass("disabled");
        $("#prev_btn").removeClass("disabled");
        cnt++;
    }
    if (cnt > 0) {
        $("#from").val(from_val);
        from_total.text(fromValText);
        $("#to").val(toVal);
        to_total.text(toVal);
    } else {
        $("#from").val(from_val);
        from_total.text(fromValText);
        $("#to").val(toVal);
        to_total.text(toVal);
    }
}

function pager_count_prev() {
    var total_count = $("#total_count").val();
    var base_count = $("#video_limit").val();
    var from_total = $(".from_total");
    var to_total = $(".to_total");
    var to = $("#to").val();
    var toText = $(".to_total").text();
    var fromText = $(".from_total").text();
    var from = $("#from").val();
    var from_val = 0;
    var to_val = 0;
    var fromValText = 0;
    var toVal = 0;
    var fromVal = 0;
    var cnt = 0;
    if (parseInt(from) > 0) {
        if (parseInt(from) > parseInt(base_count)) {
            if (parseInt(to) == parseInt(total_count)) {
                var latest = parseInt(total_count)-parseInt(from);
                from_val = parseInt(from) - parseInt(base_count);
                fromValText = parseInt(fromText) - parseInt(base_count);
                toVal = parseInt(total_count)-parseInt(latest);
                //to_val = parseInt(to) - parseInt(base_count);
                $("#nxt_btn").removeClass("disabled");
                $("#count").val(0);
            }
            else
            {
                from_val = parseInt(from) - parseInt(base_count);
                to_val = parseInt(to) - parseInt(base_count);
                fromValText = parseInt(fromText) - parseInt(base_count);
                toVal = parseInt(to) - parseInt(base_count);
                $("#nxt_btn").removeClass("disabled");
            }
            
        } else if (parseInt(from) == parseInt(base_count)) {
            from_val = 0;
            to_val = parseInt(base_count);
            fromValText = 1;
            toVal = parseInt(base_count);
            $("#count").val(0);
            $("#nxt_btn").removeClass("disabled");
            $("#prev_btn").addClass("disabled");
            cnt++;
        } else {
            from_val = parseInt(from) - parseInt(base_count);
            to_val = from;
            fromValText = parseInt(fromText) - parseInt(base_count);
            toVal = from;
            $("#count").val(0);
            $("#nxt_btn").removeClass("disabled");
            $("#prev_btn").addClass("disabled");
        }
    } else {
        return false;
    }
    if (cnt > 0) {
        $("#from").val(from_val);
        from_total.text(fromValText);
        $("#to").val(toVal);
        to_total.text(toVal);
    } else {
        $("#from").val(from_val);
        from_total.text(fromValText);
        $("#to").val(toVal);
        to_total.text(toVal);
    }
}

function close_confirmation_videodelete1(videoID)
{var popup=$('#deleteconfirm'+videoID);if(popup)popup.removeClass("deleteconfirm--active");}
function popup(videoID)
{if($("#share"+videoID).hasClass('collectionentry__popup--hidden'))
{$("#share"+videoID).removeClass("collectionentry__popup--hidden");$(this).addClass("videolistentry__sharebtnbox--opened");shownShareVideoPopupID=videoID;}
else
{$("#share"+videoID).addClass("collectionentry__popup--hidden");$(this).removeClass("videolistentry__sharebtnbox--opened");}}
function share_embed_download(videoID)
{var shareandembedmnublock=$('#shareandembedmnublock'+videoID);var dwnld=$('#dwnld'+videoID);if(shareandembedmnublock.hasClass('shareandembedmnublock--hidden'))
{shareandembedmnublock.removeClass('shareandembedmnublock--hidden');dwnld.removeClass('add2colcontainer--download');dwnld.addClass('add2colcontainer--hidden');$('#share'+videoID).css({'width':'15rem','height':'17.7rem'});}
else
{shareandembedmnublock.addClass('shareandembedmnublock--hidden');dwnld.addClass('add2colcontainer--download');dwnld.removeClass('add2colcontainer--hidden');$("#share"+videoID).css({'width':'15rem','height':'204px'});}
return false;}
function share_dwnload_back(videoID)
{var shareandembedmnublock=$('#shareandembedmnublock'+videoID);var dwnld=$('#dwnld'+videoID);if(shareandembedmnublock.hasClass('shareandembedmnublock--hidden'))
{shareandembedmnublock.removeClass('shareandembedmnublock--hidden');dwnld.removeClass('add2colcontainer--download');dwnld.addClass('add2colcontainer--hidden');$('#share'+videoID).css({'width':'15rem','height':'17.7rem'});}
else
{shareandembedmnublock.addClass('shareandembedmnublock--hidden');dwnld.addClass('add2colcontainer--download');dwnld.removeClass('add2colcontainer--hidden');$("#share"+videoID).css({'width':'15rem','height':'204px'});}
return false;}
function share_single_addcol(videoID)
{var shareandembedmnublock=$('#shareandembedmnublock'+videoID);var collec=$('#collec'+videoID);if(shareandembedmnublock.hasClass('shareandembedmnublock--hidden'))
{shareandembedmnublock.removeClass('shareandembedmnublock--hidden');collec.addClass('add2colcontainer--hidden');$('#share'+videoID).css({'width':'15rem','height':'17.7rem'});$("#share"+videoID).removeClass('collection_box_customize');}
else
{shareandembedmnublock.addClass('shareandembedmnublock--hidden');collec.removeClass('add2colcontainer--hidden');$("#share"+videoID).css({'width':'22rem','min-height':'180px'});$("#share"+videoID).addClass('collection_box_customize');}
return false;}
function share_single_back(videoID)
{var shareandembedmnublock=$('#shareandembedmnublock'+videoID);var collec=$('#collec'+videoID);if(shareandembedmnublock.hasClass('shareandembedmnublock--hidden'))
{shareandembedmnublock.removeClass('shareandembedmnublock--hidden');collec.addClass('add2colcontainer--hidden');$('#share'+videoID).css({'width':'15rem','height':'17.7rem'});$("#share"+videoID).removeClass('collection_box_customize');}
else
{shareandembedmnublock.addClass('shareandembedmnublock--hidden');collec.removeClass('add2colcontainer--hidden');$("#share"+videoID).css({'width':'22rem','min-height':'180px'});$("#share"+videoID).addClass('collection_box_customize');}
return false;}
function edit_textarea(x,y)
{$('.'+x).hide();$('.'+y).show();}
function open_col_customize_dialog(videoID)
{var first_video_id=$('#first_video_id').val();var customizeDLG=document.getElementsByClassName("videocustomizezone")[0];if(customizeDLG)
{customizeDLG.classList.remove("videocustomizezone--hidden");$('#share'+videoID).addClass('collectionentry__popup--hidden');}
var singlevideo=document.getElementsByClassName("singlevideo")[0];if(singlevideo)
{singlevideo.classList.add("singlevideo--moved");}
return false;}
function load_customize_section(coll_id,video_id)
{var siteUrl=site_url;var playlist_url=site_url+'collections/playlist/'+coll_id;var url=playlist_url;if(url.indexOf('?')>-1){url+='/'+video_id}else{url+='/'+video_id}
window.location.href=url;}
function embed_section(coll_id,video_id,token)
{var siteUrl=site_url;var playlist_url=site_url+'embed-collection/'+token;var url=playlist_url;if(url.indexOf('?')>-1){url+='/'+video_id}else{url+='/'+video_id}
window.location.href=url;}
function embed_section_frame(coll_id,video_id,token)
{var siteUrl=site_url;var playlist_url=site_url+'frame-col/'+token;var url=playlist_url;if(url.indexOf('?')>-1){url+='/'+video_id}else{url+='/'+video_id}
window.location.href=url;}
function get_visibilty_sec(hidden_class)
{var videocustomize_mainmenu=$('.videocustomize__mainmenu');var videocustomize_visibilityprivacybox=$('.'+hidden_class);if(videocustomize_mainmenu.hasClass('videocustomize--hiddenzone'))
{videocustomize_mainmenu.removeClass('videocustomize--hiddenzone');videocustomize_visibilityprivacybox.addClass('videocustomize--hiddenzone');}
else
{videocustomize_mainmenu.addClass('videocustomize--hiddenzone');videocustomize_visibilityprivacybox.removeClass('videocustomize--hiddenzone');}}
function close_col_customize_dialog()
{var customizeDLG=document.getElementsByClassName("videocustomizezone")[0];if(customizeDLG)
{customizeDLG.classList.add("videocustomizezone--hidden");}
var singlevideo=document.getElementsByClassName("singlevideo")[0];if(singlevideo)
{singlevideo.classList.remove("singlevideo--moved");}
return false;}
function text_overlay()
{var text_overlay=$('textarea[name="videotextoverlay"]').val();if($('input[name="thumboverlay"]').is(':checked')==true)
{$('.default_text_overlay').removeClass('vjs-hidden');$('.default_text_overlay').show().html(text_overlay);}
else
{$('.default_text_overlay').hide();}}
function text_overlay_new()
{var text_overlay=$('textarea[name="videotextoverlay"]').val();if($('input[name="thumboverlay"]').is(':checked')==true)
{$('.vjs-info').show().html(text_overlay);}
else
{$('.vjs-info').hide();}}
function change_text_overlay()
{var size=$('.default_text_overlay').css("font-size");size=parseInt(size,10);var text_overlay=$('#text_overlay').val();var default_text_overlay=$('.default_text_overlay').html();$('.default_text_overlay').html(text_overlay);}
function control_text_length()
{var textLength=$('.default_text_overlay').text().length;var size=$('.default_text_overlay').css("font-size");size=parseInt(size,10);if(textLength<20){$('.default_text_overlay').css('font-size','24px');}else if(textLength<30){$('.default_text_overlay').css('font-size','+=1');}else if(textLength>30){if((size-1)>=5){$('.default_text_overlay').css('font-size','-=1');}}}
function cta_text(type="")
{$('.count_modal').val(0);$('.wl-modal').remove();$('.wl_graphic').hide();var cta_text_count=$('#cta_text_count').val();var cta_text=$('#cta_text_val').val();var cta_link=$('#cta_link').val();var video_id=$('#video_id').val();var vari_id=$('#vari_id').val();if($('#cta_ls_btn_color1').val()!='')
{var cta_ls_btn_color1=$('#cta_ls_btn_color1').val();}
else
{var cta_ls_btn_color1='#ff0000';}
if($('#cta_ls_btn_color2').val()!='')
{var cta_ls_btn_color2=$('#cta_ls_btn_color2').val();}
else
{var cta_ls_btn_color2='#25a61c';}
if($('#cta_ls_text_color1').val()!='')
{var cta_ls_text_color1=$('#cta_ls_text_color1').val();}
else
{var cta_ls_text_color1='#fff';}
if($('#cta_ls_text_color2').val()!='')
{var cta_ls_text_color2=$('#cta_ls_text_color2').val();}
else
{var cta_ls_text_color2='#fff';}
var cta_ls_btn1=$('#cta_ls_btn1').val();if($('#cta_ls_btn_ac1').val()!='')
{var cta_ls_btn1_src=$('#cta_ls_btn_ac1').val();}
else
{var cta_ls_btn1_src='javascript:void(0)';}
var cta_ls_btn2=$('#cta_ls_btn2').val();if($('#cta_ls_btn_ac2').val()!='')
{var cta_ls_btn2_src=$('#cta_ls_btn_ac2').val();}
else
{var cta_ls_btn2_src='javascript:void(0)';}
var cta_text_button_1='cta_text_button_1';var cta_text_button_2='cta_text_button_2';
var button2Class = '';
if($('input[name="customSwitch1"]').is(':checked')==true)
{
    button2Class = 'block';
}
else
{
    button2Class = 'none';
}
if(cta_text_count==0)
{var html='<div id="cta_modal_div" class="wl-modal video-js"><div id="cta_modal_text" class="container-text"><a href="'+cta_link+'" id="cta_text_link" class="cta_text_link cta_text" target="_blank">'+cta_text+'</a></div><a href="javascript:void(0)"><div id="skip-video" class="wl-skip" onclick="skip_video()"><u>Skip</u></div></a></div>';if(type==2)
{var html1='<div id="cta_modal_div" class="wl-modal video-js"> <div id="cta_modal_text" class="container-text"> <div class="row"><a href="'+cta_link+'" id="cta_text_link" class="cta_text_link cta_text" target="_blank">'+cta_text+'</a></div><div class="" id="textbuttongroup"> <div class="d-flex"><a href="javascript:void(0)" onclick="window.open(\''+cta_ls_btn1_src+'\')" id="textbutton1" class="cta-buttongrp mr-2" style="background-color: '+cta_ls_btn_color1+'; color: '+cta_ls_text_color1+'">'+cta_ls_btn1+'</a> <a href="javascript:void(0)" onclick="window.open(\''+cta_ls_btn2_src+'\')" id="textbutton2" class="cta-buttongrp" style="background-color: '+cta_ls_btn_color2+'; color: '+cta_ls_text_color2+'; display: '+button2Class+'">'+cta_ls_btn2+'</a></div></div></div><a href="javascript:void(0)"> <div id="skip-video" class="wl-skip" onclick="skip_video()"><u>Skip</u></div></a></div>';}
else
{var html1='<div id="cta_modal_div" class="wl-modal video-js"> <div id="cta_modal_text" class="container-text"> <div class="row"><a href="javascript:void(0)" onclick="window.open(\''+cta_link+'\')" id="cta_text_link" class="cta_text_link cta_text" target="_blank">'+cta_text+'</a></div><div class="" id="textbuttongroup"> <div class="d-flex"><a href="javascript:void(0)" onclick="window.open(\''+cta_ls_btn1_src+'\')" id="textbutton1" onclick="get_all_clicks('+video_id+', \'cta_text_button_1\', '+vari_id+')" class="cta-buttongrp mr-2" style="background-color: '+cta_ls_btn_color1+'; color: '+cta_ls_text_color1+'">'+cta_ls_btn1+'</a> <a href="javascript:void(0)" onclick="window.open(\''+cta_ls_btn2_src+'\')" id="textbutton2"  onclick="get_all_clicks('+video_id+', \'cta_text_button_2\', '+vari_id+')" class="cta-buttongrp" style="background-color: '+cta_ls_btn_color2+'; color: '+cta_ls_text_color2+'; display: '+button2Class+'">'+cta_ls_btn2+'</a></div></div></div><a href="javascript:void(0)"> <div id="skip-video" class="wl-skip" onclick="skip_video()"><u>Skip</u></div></a></div>';}
$('#my-video').append(html1);$('#cta_text_count').val(1);if($('input[name="add_button_opt"]').is(":checked")==true)
{$('#ls_btn_set').show();$('#textbuttongroup').show();}
else
{$('#ls_btn_set').hide();$('#textbuttongroup').hide();}}}
function cta_graphicbanner()
{$('.count_modal').val(0);$('.wl-modal').remove();$('.wl_graphic').hide();var cta_text_count=$('#cta_text_count').val();var cta_img=$('#cta_img').val();var cta_link=$('#cta_link').val();if(cta_text_count==0)
{$('#my-video').append('<div id="cta_modal_div" class="wl-modal video-js"><div id="cta_modal_text" class="container-text p-0"><a href="'+cta_link+'" id="cta_text_link" class="cta_text_link cta_text graphicimagea m-0" target="_blank"><img class="cta_thumb_img graphicimage w-100" id="cta_thumb_img" src="'+cta_img+'" ></a></div><a href="javascript:void(0)"><div id="skip-video" class="wl-skip" onclick="skip_video()"><u>Skip</u></div></a></div>');$('#cta_text_count').val(1);}}
function cta_text_link()
{var cta_link=$('#cta_link').val();if(cta_link!='')
$('.cta_text_link').attr('href',cta_link);else
$('.cta_text_link').attr('href','javascript:void(0)');}
function text_to_modal()
{var ctatype=$('#ctatype').val();var cta_text=$('#cta_text_val').val();if(ctatype=='text')
$('.cta_text').text(cta_text);}
function html_to_modal()
{var ctatype=$('#ctatype').val();var cta_text=$('#cta_html').val();if(ctatype!='socialshare')
$('.cta_text').html(cta_text);}
function cta_register()
{$('.count_modal').val(0);var cta_text_count=$('#cta_register_count').val();var cta_text=$('#cta_text').val();$('#my-video').append('<div id="cta_register" class="wl-modal wl-register video-js"><div class="register_text"><p id="cta_text_link_lead" class="cta_text_link cta_text">'+cta_text+'</p></div><div id="cta_reg_text" class="container-text"><form class="wl-form form-vertical" style=""> <div class="form-inputs" style=" display: flex;"> <div class="wl-first form-group" style=" margin-bottom:8px; padding-right: 8px;"><div class=""> <input type="text" name="first_name" id="first_name" placeholder="Name" class="form-control"><span id="first_name_error"></span></div></div><div class="wl-last form-group" style=" margin-bottom:8px;"> <div class=""><input type="text" name="last_name" id="last_name" placeholder="Last name" class="form-control"><span id="last_name_error"></span></div></div></div><div class="form-inputs wl-email-container"> <div class="wl-first form-group" style="margin-bottom: 0;"><div class=""><input type="text" name="email" id="email"  placeholder="Email" class="form-control wl-emailinput"></div></div><div class="wl-button"><button type="button" id="button2" onclick="reg_lead()">Play</button></div></div><span id="email_error"></span></form></div></div>');}
function cta_button()
{var cta_button_count=$('#cta_button_count').val();var cta_text=$('#cta_html').val();var cta_link=$('#cta_link').val();$('.count_modal').val(0);if(cta_button_count==0)
{$('#my-video').append('<div id="cta_button_div" class="wl-modal video-js"><div id="cta_modal_text" class="container-text"><span id="cta_text_link" class="cta_text_link cta_text cta__html" target="_blank">'+cta_text+'</span></div><a href="javascript:void(0)"><div id="cta_btn" class="wl-skip" onclick="skip_cta_text()"><u>Skip</u></div></a></div>');$('#cta_button_count').val(1);}}
function cta_socialshare()
{$('.count_modal').val(0);var cta_button_count=$('#cta_social_count').val();var cta_text=$('#cta_text').val();if(cta_button_count==0)
{$('#my-video').append('<div id="cta_social_div" class="wl-modal video-js"><div id="cta_modal_text" class="container-text"><a href="#" id="cta_text_link" class="cta_text_link cta_text" target="_blank"><img src="'+site_url+'icons/facebook-icon.png" width="50"></a><a href="#" id="cta_text_link" class="cta_text_link cta_text" target="_blank"><img src="'+site_url+'icons/twitter.png" width="50"></a> <a href="#" id="cta_text_link" class="cta_text_link cta_text" target="_blank"><img src="'+site_url+'icons/instagramrond.png" width="50"></a> <a href="#" id="cta_text_link" class="cta_text_link cta_text" target="_blank"><img src="'+site_url+'icons/pinterest.png" width="50"></a></div><a href="javascript:void(0)"><div id="skip-video" class="wl-skip" onclick="skip_s_video()"><u>Skip</u></div></a></div>');$('#cta_social_count').val(1);}}

function req_name()
{email_subs();if($('#emailrequestnames').is(':checked')==true)
{$('#email_subs_name_div').show();}
else
{$('#email_subs_name_div').hide();}}
function thumb_img_cta()
{player_pause();var thumb_url='';
var allowedFiles=[".gif",".png",".jpg",".jpeg"];
var fileUpload=document.getElementById('ctathumb');
var lblError=document.getElementById('ctathumb_error');
var regex=new RegExp("([a-zA-Z0-9\s_\\.\-:()])+("+allowedFiles.join('|')+")$");
if(!regex.test(fileUpload.value.toLowerCase())){$('#ctathumb_error').addClass('text-danger').html("Please upload files having extensions: <b>"+allowedFiles.join(', ')+"</b> only.");$('#ctathumb').val('');return false;}
else
{$('#ctathumb_error').removeClass('text-danger').addClass('text-light2-grey-color').html('Note: Maximum Image size is 1 mb.');}
if($('#ctathumb')[0].files[0].size>1048576){$('#ctathumb_error').addClass('text-danger').html('File is too big!');$('#ctathumb').val('');return false;}
else
{$('#ctathumb_error').removeClass('text-danger').addClass('text-light2-grey-color').html('Note: Maximum Image size is 1 mb.');}
var thumbnailimage=$('#ctathumb')[0].files[0];var form_data=new FormData();form_data.append('thumbnailimage',thumbnailimage);$.ajax({url:"../backend_files/cta_thumb_upload.php",type:"POST",data:form_data,contentType:false,cache:false,processData:false,beforeSend:function(){$('#img_load1').fadeIn();},success:function(followup)
{$('.graphicimage').attr('src',followup);$('.cta_imageuploader').html('<img src="'+followup+'" style="height:62.5px;object-fit:cover; width:80px;">');$('#img_load1').fadeOut();}});}
function player_pause()
{player.pause();}
function chnge_cta(value)
{$('.wl-modal').hide();$('.wl-cta').hide();var cta_text_div=$('#cta_text_div');var cta_img_div=$('#cta_img_div');var cta_html_div=$('#cta_html_div');if(value==='annotation')
{$('.wl-cta').hide();$('.wl_annotation').show();}
else if(value==='text')
{cta_text(2);player_pause();$('#cta_click_through').show();$('#cta_click_time').show();cta_text_div.show();cta_img_div.hide();cta_html_div.hide();$('#buttons_div').show();}
else if(value==='button')
{cta_button();player_pause();$('#cta_click_through').hide();$('#cta_click_time').show();cta_text_div.hide();cta_img_div.hide();cta_html_div.show();$('#buttons_div').hide();}
else if(value==='graphicbanner')
{$('.wl-cta').hide();$('.wl_graphic').show();$('.wl_graphic').removeClass('vjs-hidden');cta_graphicbanner();player_pause();$('#cta_click_through').show();$('#cta_click_time').show();cta_text_div.hide();cta_img_div.show();cta_html_div.hide();$('#buttons_div').hide();}
else if(value==='socialshare')
{cta_socialshare();player_pause();$('#buttons_div').hide();}
else if(value==='leadcapture')
{cta_register();player_pause();$('#buttons_div').hide();}
else if(value==='loginsh')
{cta_loginsh();player_pause();$('#buttons_div').show();}
else
{$('.wl-cta').hide();cta_text_div.hide();cta_img_div.hide();cta_html_div.hide();$('#cta_click_through').hide();$('#cta_click_time').hide();$('#buttons_div').hide();}}
function chnge_cta_upgrade(value)
{$('.wl-modal').hide();$('.wl-cta').hide();var cta_text_div=$('#cta_text_div');var cta_img_div=$('#cta_img_div');var cta_html_div=$('#cta_html_div');if(value==='text')
{$('#cta_click_through').show();$('#cta_click_time').show();cta_text_div.show();cta_img_div.hide();cta_html_div.hide();$('#buttons_div').show();}
else if(value==='button')
{$('#cta_click_through').show();$('#cta_click_time').show();cta_text_div.hide();cta_img_div.hide();cta_html_div.show();$('#buttons_div').hide();}
else if(value==='graphicbanner')
{$('.wl-cta').hide();$('.wl_graphic').show();$('.wl_graphic').removeClass('vjs-hidden');$('#cta_click_through').show();$('#cta_click_time').show();cta_text_div.hide();cta_img_div.show();cta_html_div.hide();$('#buttons_div').hide();}
else
{$('.wl-cta').hide();cta_text_div.hide();cta_img_div.hide();cta_html_div.hide();$('#cta_click_through').hide();$('#cta_click_time').hide();$('#buttons_div').hide();}}
function cta_loginshp()
{player_pause();$('.count_modal').val(0);$('.wl-modal').remove();$('.wl_graphic').hide();var cta_text_count=$('#cta_text_count').val();var cta_text=$('#cta_text').val();var cta_link=$('#cta_link').val();var cta_ls_btn1=$('#ls_btn1').val();var cta_ls_btn_ac1=$('#ls_url1').val();var cta_ls_btn2=$('#ls_btn2').val();var cta_ls_btn_ac2=$('#ls_url2').val();var btn1='';var btn2='';if(cta_ls_btn1!='')
{if(cta_ls_btn_ac1!='')
btn1='<a href="'+cta_ls_btn_ac1+'" id="lgn_btn_ac1" class="" target="_blank"><button type="button" id="lgn_btn1">'+cta_ls_btn1+'</button></a>';else
btn1='<button type="button" id="lgn_btn1">'+cta_ls_btn1+'</button>';}
if(cta_ls_btn2!='')
{if(cta_ls_btn_ac2!='')
btn2='<a href="'+cta_ls_btn_ac2+'" id="lgn_btn_ac2" class="" target="_blank"><button type="button" id="lgn_btn2">'+cta_ls_btn2+'</button></a>';else
btn2='<button type="button" id="lgn_btn2">'+cta_ls_btn2+'</button>';}
if(cta_text_count==0)
{$('#showOne').show().append('<div id="cta_modal_div" class="wl-modal video-js"><div id="cta_modal_text" class="container-text"><div class="register_text"><a href="'+cta_link+'" id="cta_text_link" class="cta_text_link cta_text" target="_blank">'+cta_text+'</a></div><div id="cta_reg_text" class="container-text"><div class="wl-button">'+btn1+btn2+'</div></div></div></div>');$('#cta_text_count').val(1);$('#showTwo').html('');}}
function cta_loginsh()
{player_pause();$('.count_modal').val(0);$('.wl-modal').remove();$('.wl_graphic').hide();var cta_text_count=$('#cta_text_count').val();var cta_text=$('#cta_text').val();var cta_link=$('#cta_link').val();var cta_ls_btn1=$('#ls_btn1').val();var cta_ls_btn_ac1=$('#ls_url1').val();var cta_ls_btn2=$('#ls_btn2').val();var cta_ls_btn_ac2=$('#ls_url2').val();var btn1='';var btn2='';if(cta_ls_btn1!='')
{if(cta_ls_btn_ac1!='')
btn1='<a href="'+cta_ls_btn_ac1+'" id="lgn_btn_ac1" class="" target="_blank"><button type="button" id="lgn_btn1">'+cta_ls_btn1+'</button></a>';else
btn1='<button type="button" id="lgn_btn1">'+cta_ls_btn1+'</button>';}
if(cta_ls_btn2!='')
{if(cta_ls_btn_ac2!='')
btn2='<a href="'+cta_ls_btn_ac2+'" id="lgn_btn_ac2" class="" target="_blank"><button type="button" id="lgn_btn2">'+cta_ls_btn2+'</button></a>';else
btn2='<button type="button" id="lgn_btn2">'+cta_ls_btn2+'</button>';}
if(cta_text_count==0)
{$('#my-video').show().append('<div id="cta_modal_div" class="wl-modal video-js"><div id="cta_modal_text" class="container-text"><div class="register_text"><a href="'+cta_link+'" id="cta_text_link" class="cta_text_link cta_text" target="_blank">'+cta_text+'</a></div><div id="cta_reg_text" class="container-text"><div class="wl-button">'+btn1+btn2+'</div></div></div><a href="javascript:void(0)"><div id="skip-video" class="wl-skip" onclick="skip_video()"><u>Skip</u></div></a></div>');$('#cta_text_count').val(1);}}
function text_to_regHead(x)
{$('.regheadline').html(x);}
function text_to_regsubHead(x)
{$('.regsubheadline').html(x);}
function text_toregbtn(x)
{$('.regbtn').html(x);}
function add_button_opt()
{cta_text(2);if($('input[name="add_button_opt"]').is(":checked")==true)
{$('#ls_btn_set').show();$('#textbuttongroup').show();}
else
{$('#ls_btn_set').hide();$('#textbuttongroup').hide();}}
function cta_ls_btnApp(x)
{var text=$('#cta_ls_btn'+x).val();$('#lgn_btn'+x).text(text);$('#textbutton'+x).text(text);}
function cta_ls_btnAc(x)
{var cta_link=$('#cta_ls_btn_ac'+x).val();if(cta_link!='')
{$('#lgn_btn_ac'+x).attr('href',cta_link);$('#textbutton'+x).attr('href',cta_link);}
else
{$('#lgn_btn_ac'+x).attr('href','javascript:void(0)');$('#textbutton'+x).attr('href','javascript:void(0)');}}
function emailtime()
{$('.wl-modal').hide();email_subs();player_pause();}
function reg_lead()
{var cnt=0;var first_name=$('#first_name').val();var last_name=$('#last_name').val();var email=$('#email').val();var video_id=$('#video_id').val();if(first_name===""){$('#first_name_error').html('Please Enter Name');$('#first_name_error').addClass('text-danger');cnt++;}
else
{$('#first_name_error').html('');$('#first_name_error').removeClass('text-danger');}
if(last_name===""){$('#last_name_error').html('Please Enter Name');$('#last_name_error').addClass('text-danger');cnt++;}
else
{$('#last_name_error').html('');$('#last_name_error').removeClass('text-danger');}
if(email==='')
{$('#email_error').html('Please Enter Email.');$('#email_error').addClass('text-danger');cnt++;}
else if(!isValidEmailAddress(email))
{$('#email_error').addClass('text-danger');$('#email_error').html('Please enter valid email');cnt++;}
else
{$('#email_error').html('');$('#email_error').removeClass('text-danger');}
if(cnt>0)
{return false;}
else
{$.ajax({url:"../backend_files/add_lead_data.php",type:"POST",data:{first_name:first_name,last_name:last_name,email:email,opt:'reg_lead',video_id:video_id},success:function(followup)
{if(followup=='1')
{$('.wl-modal').hide();player.play();}
else
{}}});}}
function save_post_roll()
{var postrollaction=$('#postrollaction').val();var postrollurl=$('#postrollurl').val();var video_id=$('#video_id').val();var presrc=$('#preurl').val();var prehref=$('#prehref').val();var prevideovalue=$('#prevideovalue').val();var preurl=presrc;var postsrc=$('#posturl').val();var posthref=$('#posthref').val();var postvideovalue=$('#postvideovalue').val();var posturl=postsrc;var midroll_vids=0;if($('#midroll_vids').is(':checked')==true)
{midroll_vids=1;}
else
{midroll_vids=0;}
var pre_option=0;if($('#pre_option').is(':checked')==true)
{pre_option=1;}
else
{pre_option=0;}
var mid_option=0;if($('#mid_option').is(':checked')==true)
{mid_option=1;}
else
{mid_option=0;}
var post_option=0;if($('#post_option').is(':checked')==true)
{post_option=1;}
else
{post_option=0;}
var midurl=[];$('input[name="midurl[]"]').each(function(){var value=$(this).val();midurl.push(value);});var midhref=[];$('input[name="midhref[]"]').each(function(){var value=$(this).val();midhref.push(value);});var midtime=[];$('input[name="midtime[]"]').each(function(){var value=$(this).val();midtime.push(value);});$.ajax({url:"../backend_files/video_backend.php",type:"POST",data:{postrollaction:postrollaction,postrollurl:postrollurl,video_id:video_id,opt:'post_roll',midurl,midhref,midtime,pre_option,mid_option,post_option,preurl,prehref,posturl,posthref,midroll_vids},beforeSend:function(){$('#pr_btn').hide();$('#pr_load').show();},success:function(followup)
{if(followup=='1')
{$('#pr_load').hide();$('#pr_check').show();setTimeout(function(){$('#pr_check').hide();$('#pr_btn').show();},2000);}
else
{}
load_s_player(video_id);}});}
function save_email_subs()
{var video_id=$('#video_id').val();var email_list_id=$('#emaillist :selected').val();var emailheadline=$('#emailheadline').val();var emailsubheadline=$('#emailsubheadline').val();var emailbtntext=$('#emailbtntext').val();var emailtime=$('#emailtime').val();var emaillist=$('#emaillist').val();var email_subs_btn_color=$('#email_subs_btn_color').val();var email_subs='';if($('#emailrequestnames').is(':checked')==true){email_subs=1;}else{email_subs=0;}
var activate_leads='';if($('#activate_leads').is(':checked')==true){activate_leads=1;}else{activate_leads=0;}
var email_temp_id = $('#email_temp_id').val();
$.ajax({url:"../backend_files/video_backend.php",type:"POST",data:{email_subs:email_subs,emailheadline:emailheadline,emailsubheadline:emailsubheadline,emailbtntext:emailbtntext,emailtime:emailtime,emaillist:emaillist,video_id:video_id,opt:'email_subs',email_list_id:email_list_id,activate_leads,email_subs_btn_color, email_temp_id},beforeSend:function(){$('#es_btn').hide();$('#es_load').show();},success:function(followup)
{$('#es_load').hide();$('#es_check').show();setTimeout(function(){$('#es_check').hide();$('#es_btn').show();},2000);load_s_player(video_id);}});}
function activate_leads_opt()
{if($('#activate_leads').is(':checked')==true)
{$('#email_subs_div').show();$('.wl-modal').hide();email_subs();player_pause();}
else
{$('#email_subs_div').hide(); $('.emaildesigntemp').remove();}}
function activate_leads_upgrade()
{if($('#activate_upgrade').is(':checked')==true)
{$('#email_subs_div').show();}
else
{$('#email_subs_div').hide();}}
function chnge_ctatime(value)
{$('#cta_start_time').val(value);}
function pass_proctected(visbility_text)
{$('#my-video').append('<div id="modal" class="wl-modal video-js"><div class="password-protected-div"><div class="password-protected-container"><div id="message" class="container-pass-text">'+visbility_text+'</div><div class="password-container"><input type="password" id="passwords" class="form-control wl-emailinput" placeholder="Enter Password"> <button type="button" onclick="check_password(1)" id="btnn_1" class="w-auto"><span class="passtext" id="button1">Access</span><span id="pass_load" style="display:none;"><div class="hl-loading-spinner hl-loading-spinner--medium hl-loading-spinner--dark hl-loading-spinner--no-text"><div class="hl-loading-spinner__icon-outer"><div class="hl-loading-spinner__icon"></div></div></div></span></button></div><div class="error-container-text"><span id="error_video"></span></div></div></div><a id="replay-video" style="display:none;">Replay</a></div>');}
function whocanwatch(value)
{ var privacytext = $('#privacytext').val();
    if(value==4)
{$('.count_modal').val(0);var cta_email_subs=$('#cta_pass_protected').val();pass_proctected(privacytext);player_pause();$('#passwordbox').show();$('#cta_pass_protected').val(1);$('#private_link_div').hide();}
else if(value==3)
{$('#private_link_div').show();$('#passwordbox').hide();}
else
{$('.count_modal').val(0);$('.wl-modal').hide();$('#private_link_div').hide();$('#passwordbox').hide();}}
function whocanwatchupgrade(value)
{if(value==4)
{$('#passwordbox').show();$('#cta_pass_protected').val(1);$('#private_link_div').hide();}
else if(value==3)
{$('#private_link_div').show();$('#passwordbox').hide();}
else
{$('#private_link_div').hide();$('#passwordbox').hide();}}
function whocanwatchcust(value)
{if(value==3)
{$('#private_link_div').show();$('#password_link_div').hide();}
else if(value==4)
{$('#password_link_div').show();$('#private_link_div').hide();}
else
{$('#private_link_div').hide();$('#password_link_div').hide();}}
function privy_dis()
{$('.videocustomize__visibilityprivacybox').addClass("videocustomize--hiddenzone");$('.videocustomize__mainmenu').removeClass('videocustomize--hiddenzone');customizeroot.getElementsByClassName("videocustomize__mainmenu")[0].classList.remove("videocustomize--hiddenzone");}
function whocomment(value)
{if(value==1)
{$('.addnewcomment').slideDown();}
else
{$('.addnewcomment').slideUp();}}
function open_reply(id)
{$('#reply_div_'+id).show();}
function thumbnail_check_default(value)
{if(value==2)
{$('.imageuploader').hide();}
if(value==1)
{$('.imageuploader').hide();}
if(value==3)
{$('.imageuploader').show(); $('.chose_from_library_result_show').hide();}}
function isValidEmailAddress(emailAddress){var pattern=/^\b[A-Z0-9._%-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b$/i;return pattern.test(emailAddress);}
function secondsToHms(d){d=Number(d);var h=Math.floor(d/3600);var m=Math.floor(d%3600/60);var s=Math.floor(d%3600%60);var hDisplay=h>0?h+(h==1?" hour, ":" hours, "):"";var mDisplay=m>0?m+(m==1?" minute, ":" minutes, "):"";var sDisplay=s>0?s+(s==1?" second":" seconds"):"";return hDisplay+mDisplay+sDisplay;}
function dlt_comment(id)
{var video_id=$('#video_id').val();swal({title:"Are you sure?",text:"You want to delete this comment!",type:"warning",showCancelButton:true,confirmButtonClass:"btn-danger",confirmButtonText:"Yes, delete it!",closeOnConfirm:false},function(){$.ajax({url:site_url+"backend_files/comments_backend.php",type:"POST",data:{id:id,opt:'delete_comment'},success:function(followup)
{count_comment(video_id);if(followup!=='')
{$('#comment_'+id).remove();swal("","Comment deleted successfully","success");}
else
{swal("","Comment cannot be deleted","success");}}});});return false;}
function dlt_comment_reply(id)
{swal({title:"Are you sure?",text:"You want to delete this comment!",type:"warning",showCancelButton:true,confirmButtonClass:"btn-danger",confirmButtonText:"Yes, delete it!",closeOnConfirm:false},function(){$.ajax({url:site_url+"backend_files/comments_backend.php",type:"POST",data:{id:id,opt:'delete_comment_reply'},success:function(followup)
{if(followup!=='')
{$('#reply_comment_'+id).remove();swal("","Comment deleted successfully","success");}
else
{swal("","Comment cannot be deleted","success");}}});});return false;}
function dlt_confirm(id)
{var dltconfirmtext=$('#dltconfirmtext_'+id);var dltconfirm=$('#dltconfirm_'+id);var str=$.trim(dltconfirmtext.val());var res=str.toLowerCase();if(res=='delete')
{dltconfirm.attr("disabled",false).removeClass('disabled');}
else
{dltconfirm.attr("disabled",true).addClass('disabled');}}
function select_thumb_opt(x)
{if(x==1)
{$('#img_thumbnail_div').show();$('#vid_thumbnail_div').hide();}
else
{$('#img_thumbnail_div').hide();$('#vid_thumbnail_div').show();}}
function chnge_domain_opt(x)
{if(x==3)
{$('#spcfc_dmn_div').show();}
else
{$('#spcfc_dmn_div').hide();}}
function show_logo_setting()
{var popup=document.getElementsByClassName("shareandembed")[0];if(popup)
{popup.classList.add("shareandembed--active");}
return false;}
function randomString(length,chars){var result='';for(var i=length;i>0;--i)result+=chars[Math.round(Math.random()*(chars.length-1))];return result;}
function generate_token()
{var token=randomString(5,'0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ');$('#player_token').val(token);}
function play_event_track()
{var video_id=$('#video_id').val();generate_token();token=$('#player_token').val();$.ajax({url:site_url+"backend_files/tracking_events.php",type:"POST",data:{video_id:video_id,action:'1',opt:'track_play',token:token},success:function(followup)
{if(followup==1)
{$('#play_event').val(1);}}});}
function video_events(vid_id,time,action)
{var video_id=$('#video_id').val();var token=$('#player_token').val();$.ajax({url:site_url+"backend_files/tracking_events.php",type:"POST",data:{video_id:vid_id,time:time,action:action,opt:'track_pause',token},success:function(followup)
{if(followup==1)
{}}});}
function handlePlay(x,video_id)
{var currentTime=player.currentTime();video_events(video_id,currentTime,x);}
function pauseevent(x,video_id)
{handlePlay(x,video_id);_paq.push(['trackEvent',"video_pause",video_id,"pause"]);}
function playevent(x,video_id)
{handlePlay(x,video_id);_paq.push(['trackEvent',"video_play",video_id,"play"]);}
function seekevent(x,video_id)
{handlePlay(x,video_id);_paq.push(['trackEvent',"video_seek",video_id,"seek"]);}
function finishevent(x,video_id)
{handlePlay(x,video_id);_paq.push(['trackEvent',"video_finish",video_id,"finish"]);}
function shareembedclose(id)
{$('#shareandembed'+id).removeClass('shareandembed--active');}
function share_embed_tab(x)
{$('.sharetabs').addClass('shareandembed--hidden');$('#sharetabs_'+x).removeClass('shareandembed--hidden');$('.shareandembed__tab').removeClass('shareandembed__tab--active');$('#share_tab_link_'+x).addClass('shareandembed__tab--active');}
function save_attr_vari(attr,type,vari_id="")
{var vari_id=$('#vari_id').val();var val=$('input[name="playerbgcolor"]').val();var video_id=$('#video_id').val();var img_path=$('#img_path').val();var showlogo=0;var logo_title=$('#logo_title').val();var logo_url=$('#logo_url').val();var logo_position=$('#logo_position').val();var logo_size_w=$('#logo_size_w').val();var logo_size_h=$('#logo_size_h').val();var player_skins=$('#player_skins').val();var playbutton=$('#playbutton').val();var play_btn_color=$('#play_btn_color').val();var showplaybutton=0;if($('input[name="showplaybutton"]').is(':checked')==true)
{showplaybutton=1;}
else
{showplaybutton=0;}
if($('input[name="showlogo"]').is(':checked'))
{showlogo=1;}else{showlogo=0;}
var play_btn_animation = $('#play_btn_animation').val();
if($('input[name="animation_infinite_check"]').is(':checked')==true)
{
    animation_button_option = 1;
}
else
{
    animation_button_option = 0;
}

$.ajax({url:"../backend_files/video_controls.php",type:"POST",data:{video_id:video_id,val:val,attr:attr,opt:'control_vari',showlogo:showlogo,img_path:img_path,vari_id,logo_title,logo_url,logo_position,logo_size_w,logo_size_h,player_skins,playbutton,play_btn_color,showplaybutton, play_btn_animation, animation_button_option},beforeSend:function(){$('#attr_btn').hide();$('#attr_spin').show();},success:function(followup)
{$('#attr_spin').hide();$('#attr_save_tick').show();setTimeout(function(){$('#attr_save_tick').hide();$('#attr_btn').show();},2000);load_var_player(vari_id, video_id);}});}
function save_cta_vari()
{var vari_id=$('#vari_id').val();var ctatype=$('#ctatype').val();var video_id=$('#video_id').val();var cta_text=$('#cta_text_val').val();var cta_link=$('#cta_link').val();var ctatime=$('#ctatime').val();var cta_html=$('#cta_html').val();if($('#add_button_opt').is(':checked')==true)
{var add_button_opt=1;}
else
{var add_button_opt=0;}
if($('input[name="customSwitch1"]').is(':checked')==true)
{
    var customSwitch1 = 1;
}
else
{
    var customSwitch1 = 0;
}
var cta_ls_btn1=$('#cta_ls_btn1').val();var cta_ls_btn2=$('#cta_ls_btn2').val();var cta_ls_btn_color1=$('#cta_ls_btn_color1').val();var cta_ls_btn_ac1=$('#cta_ls_btn_ac1').val();var cta_ls_btn_ac2=$('#cta_ls_btn_ac2').val();var cta_ls_btn_color2=$('#cta_ls_btn_color2').val();var cta_ls_text_color1=$('#cta_ls_text_color1').val();var cta_ls_text_color2=$('#cta_ls_text_color2').val();var ctathumb=$('#ctathumb')[0].files[0];var form_data=new FormData();form_data.append('video_id',video_id);form_data.append('ctatype',ctatype);form_data.append('cta_text',cta_text);form_data.append('cta_link',cta_link);form_data.append('ctatime',ctatime);form_data.append('opt','cta_control_vari');form_data.append('ctathumb',ctathumb);form_data.append('cta_html',cta_html);form_data.append('vari_id',vari_id);form_data.append('add_button_opt',add_button_opt);form_data.append('cta_ls_btn1',cta_ls_btn1);form_data.append('cta_ls_btn2',cta_ls_btn2);form_data.append('cta_ls_btn_ac1',cta_ls_btn_ac1);form_data.append('cta_ls_btn_ac2',cta_ls_btn_ac2);form_data.append('cta_ls_btn_color1',cta_ls_btn_color1);form_data.append('cta_ls_btn_color2',cta_ls_btn_color2);form_data.append('cta_ls_text_color1',cta_ls_text_color1);form_data.append('cta_ls_text_color2',cta_ls_text_color2);form_data.append('customSwitch1',customSwitch1);$.ajax({url:"../backend_files/video_controls.php",type:"POST",data:form_data,contentType:false,cache:false,processData:false,beforeSend:function(){$('#ct_btn').hide();$('#ct_load').show();},success:function(followup)
{$('#ct_load').hide();$('#ct_check').show();setTimeout(function(){$('#ct_check').hide();$('#ct_btn').show();},2000);load_var_player(vari_id, video_id);}});}
function save_thumb_opt_vari() { var video_id = $("#video_id").val(); var thumbnailtype = $("#thumbnailtype").val(); var variation_id = $("#vari_id").val(); var imagesource = $("#imagesource").val(); 
if (thumbnailtype == 1) { if(imagesource==2) {save_library_image(variation_id);} else if(imagesource==1) { save_default_thumbnail_vari(); } else {save_thumb_vari();} } else { save_thumb_gif_vari(); } progressbar_thumbs("variation", variation_id); load_var_player(vari_id, video_id); }
function save_thumb_vari()
{var vari_id=$('#vari_id').val();var video_id=$('#video_id').val();var thumbnailtype=$('#thumbnailtype').val();var imagesource=$('#imagesource').val();var thumbnailimage=$('#thumbnailimage')[0].files[0];var text_overlay=$('#text_overlay').val();if($('input[name="thumboverlay"]').is(':checked')){thumboverlay=1;}else{thumboverlay=0;}
var upload_thumb_img = $('#upload_thumb_img').val();
var form_data=new FormData();form_data.append('thumbnailtype',thumbnailtype);form_data.append('imagesource',imagesource);form_data.append('thumbnailimage',thumbnailimage);
form_data.append('video_id',video_id);form_data.append('vari_id',vari_id);form_data.append('thumboverlay',thumboverlay);form_data.append('text_overlay',text_overlay);
form_data.append('opt','thumbnail_vari');
form_data.append('upload_thumb_img',upload_thumb_img);
$.ajax({url:"../backend_files/video_thumbnail.php",type:"POST",data:form_data,contentType:false,cache:false,processData:false,beforeSend:function(){$('#thumb_btn').hide();$('#thumb_spin').show();},success:function(followup)
{$('#thumb_spin').hide();$('#thumb_save_tick').show();setTimeout(function(){$('#thumb_save_tick').hide();$('#thumb_btn').show();});}});}
function save_thumb_gif_vari()
{var vari_id=$('#vari_id').val();var video_id=$('#video_id').val();var thumbnailtype=$('#thumbnailtype').val();var imagesource=$('#imagesource').val();var text_overlay=$('#text_overlay').val();var thumb_start=$('#thumb_start').val();var thumb_end=$('#thumb_end').val();if($('input[name="thumboverlay"]').is(':checked')){thumboverlay=1;}else{thumboverlay=0;}
var form_data=new FormData();form_data.append('thumbnailtype',thumbnailtype);form_data.append('imagesource',imagesource);form_data.append('vari_id',vari_id);form_data.append('video_id',video_id);form_data.append('thumboverlay',thumboverlay);form_data.append('text_overlay',text_overlay);form_data.append('thumb_start',thumb_start);form_data.append('thumb_end',thumb_end);form_data.append('opt','thumbnail_vari');$.ajax({url:"../backend_files/video_thumbnail_gif.php",type:"POST",data:form_data,contentType:false,cache:false,processData:false,beforeSend:function(){$('#thumb_btn').hide();$('#thumb_spin').show();},success:function(followup)
{$('#thumb_spin').hide();$('#thumb_save_tick').show();setTimeout(function(){$('#thumb_save_tick').hide();$('#thumb_btn').show();});}});}
function vis_control_vari()
{var vari_id=$('#vari_id').val();var video_id=$('#video_id').val();var whocanwatchthisvideo=$('select[name="whocanwatchthisvideo"]').val();var privacytext=$('textarea[name="privacytext"]').val();var privacypwd=$('input[name="privacypwd"]').val();var whocancommentthisvideo=$('select[name="whocancommentthisvideo"]').val();var wherecanembedthisvideo=$('select[name="wherecanembedthisvideo"]').val();var spcfc_dmn=$('#spcfc_dmn').val();$.ajax({url:"../backend_files/video_controls.php",type:"POST",data:{video_id:video_id,whocanwatchthisvideo:whocanwatchthisvideo,privacytext:privacytext,privacypwd:privacypwd,whocancommentthisvideo:whocancommentthisvideo,wherecanembedthisvideo:wherecanembedthisvideo,opt:'vis_control_vari',spcfc_dmn:spcfc_dmn,vari_id},beforeSend:function(){$('#vis_btn').hide();$('#vis_load').show();},success:function(followup)
{$('#vis_load').hide();$('#vis_check').show();setTimeout(function(){$('#vis_check').hide();$('#vis_btn').show();},2000);load_var_player(vari_id, video_id);}});}
function player_control_vari()
{var vari_id=$('#vari_id').val();var video_id=$('#video_id').val();
var video_subtitle=[];$('input[name="video_subtitle[]"]').each(function(){var value=$(this).val();video_subtitle.push(value);});var subtitle_lang=[];$('select[name="subtitle_lang[]"]').each(function(){var value=$(this).val();subtitle_lang.push(value);});var defaultSubtitle=[];$("input:checkbox[name=default_subtitle]").each(function(){if($(this).is(':checked')==true)
{defaultSubtitle.push(1);}
else
{defaultSubtitle.push(0);}});var showplaybar=0;if($('input[name="showplaybar"]').is(':checked')==true)
{showplaybar=1;}
var showvolumecontrol=0;if($('input[name="showvolumecontrol"]').is(':checked')==true)
{showvolumecontrol=1;}
var showsharecontrol=0;if($('input[name="showsharecontrol"]').is(':checked')==true)
{showsharecontrol=1;}
var showspeedcontrol=0;if($('input[name="showspeedcontrol"]').is(':checked')==true)
{showspeedcontrol=1;}
var showqualitycontrol=0;if($('input[name="showqualitycontrol"]').is(':checked')==true)
{showqualitycontrol=1;}
var showfullscreencontrol=0;if($('input[name="showfullscreencontrol"]').is(':checked')==true)
{showfullscreencontrol=1;}
var controlsvisibility=$('select[name="controlsvisibility"]').val();var rewind_button_opt=0;if($('input[name="rewind_button_opt"]').is(':checked')==true)
{rewind_button_opt=1;}
var quality_switch=0;if($('input[name="quality_switch"]').is(':checked')==true)
{quality_switch=1;}
var playback_resume=0;if($('input[name="playback_resume"]').is(':checked')==true)
{playback_resume=1;}else{playback_resume=0;}
var theater_mode=0;if($('input[name="theater_mode"]').is(':checked')==true)
{theater_mode=1;}
var pip_mode=0;if($('input[name="pip_mode"]').is(':checked')==true)
{pip_mode=1;}
var vr_360=0;if($('input[name="vr_360"]').is(':checked')==true)
{vr_360=1;}
var subtitles=0;if($('input[name="subtitles"]').is(':checked')==true)
{subtitles=1;}
var zoom=0;if($('input[name="zoom"]').is(':checked')==true)
{zoom=1;}
$.ajax({url:"../backend_files/video_controls.php",type:"POST",data:{video_id:video_id,showplaybar:showplaybar,showvolumecontrol:showvolumecontrol,showsharecontrol:showsharecontrol,showspeedcontrol:showspeedcontrol,showqualitycontrol:showqualitycontrol,showfullscreencontrol:showfullscreencontrol,controlsvisibility:controlsvisibility,opt:'player_control_vari',vari_id,rewind_button_opt,quality_switch,playback_resume,theater_mode,pip_mode,vr_360,video_subtitle,subtitle_lang,defaultSubtitle,subtitles,zoom},beforeSend:function(){$('#cont_btn').hide();$('#cont_spin').show();},success:function(followup)
{$('#cont_spin').hide();$('#cont_save_tick').show();setTimeout(function(){$('#cont_save_tick').hide();$('#cont_btn').show();});load_var_player(vari_id, video_id);}});}
function save_post_roll_vari()
{var vari_id=$('#vari_id').val();var postrollaction=$('#postrollaction').val();var postrollurl=$('#postrollurl').val();var video_id=$('#video_id').val();var presrc=$('#preurl').val();var prehref=$('#prehref').val();var prevideovalue=$('#prevideovalue').val();var preurl=presrc;var postsrc=$('#posturl').val();var posthref=$('#posthref').val();var postvideovalue=$('#postvideovalue').val();var posturl=postsrc;var midroll_vids=0;if($('#midroll_vids').is(':checked')==true)
{midroll_vids=1;}
else
{midroll_vids=0;}
var pre_option=0;if($('#pre_option').is(':checked')==true)
{pre_option=1;}
else
{pre_option=0;}
var mid_option=0;if($('#mid_option').is(':checked')==true)
{mid_option=1;}
else
{mid_option=0;}
var post_option=0;if($('#post_option').is(':checked')==true)
{post_option=1;}
else
{post_option=0;}
var midurl=[];$('input[name="midurl[]"]').each(function(){var value=$(this).val();midurl.push(value);});var midhref=[];$('input[name="midhref[]"]').each(function(){var value=$(this).val();midhref.push(value);});var midtime=[];$('input[name="midtime[]"]').each(function(){var value=$(this).val();midtime.push(value);});$.ajax({url:"../backend_files/video_backend.php",type:"POST",data:{postrollaction:postrollaction,postrollurl:postrollurl,video_id:video_id,opt:'post_roll_vari',vari_id,midurl,midhref,midtime,pre_option,mid_option,post_option,preurl,prehref,posturl,posthref,midroll_vids},beforeSend:function(){$('#pr_btn').hide();$('#pr_load').show();},success:function(followup)
{if(followup=='1')
{$('#pr_load').hide();$('#pr_check').show();setTimeout(function(){$('#pr_check').hide();$('#pr_btn').show();},2000);load_var_player(vari_id, video_id);}
else
{}}});}
function save_email_subs_vari()
{var vari_id=$('#vari_id').val();var video_id=$('#video_id').val();var email_list_id=$('#emaillist :selected').val();var emailheadline=$('#emailheadline').val();var emailsubheadline=$('#emailsubheadline').val();var emailbtntext=$('#emailbtntext').val();var emailtime=$('#emailtime').val();var emaillist=$('#emaillist').val();var email_subs_btn_color=$('#email_subs_btn_color').val();var email_subs='';if($('#emailrequestnames').is(':checked')==true){email_subs=1;}else{email_subs=0;}
var activate_leads='';if($('#activate_leads').is(':checked')==true){activate_leads=1;}else{activate_leads=0;}
var email_temp_id = $('#email_temp_id').val();
$.ajax({url:"../backend_files/video_backend.php",type:"POST",data:{email_subs:email_subs,emailheadline:emailheadline,emailsubheadline:emailsubheadline,emailbtntext:emailbtntext,emailtime:emailtime,emaillist:emaillist,video_id:video_id,opt:'email_subs_vari',email_list_id:email_list_id,vari_id,activate_leads,email_subs_btn_color, email_temp_id},beforeSend:function(){$('#es_btn').hide();$('#es_load').show();},success:function(followup)
{$('#es_load').hide();$('#es_check').show();setTimeout(function(){$('#es_check').hide();$('#es_btn').show();},2000);load_var_player(vari_id, video_id);}});}
function open_variation(video_id,v_token)
{$.ajax({url:"../backend_files/add_variation_pop.php",type:"POST",beforeSend:function(){$('.loadingImg').show();},data:{video_id:video_id,v_token},success:function(followup)
{$('.loadingImg').hide();$('#shareandembed_popup_div').addClass('shareandembed--active').html(followup);}});}
function open_variation2(video_id,v_token)
{$.ajax({url:"../backend_files/add_variation_pop2.php",type:"POST",beforeSend:function(){$('.loadingImg').show();},data:{video_id:video_id,v_token},success:function(followup)
{$('.loadingImg').hide();var data=JSON.parse(followup);var variationName=data.variation_name;$('#variation_name').val(variationName);$('#v_token').val(data.video_token);$('#video_id').val(data.video_id);$('#shareandembed_popup_div2').addClass('shareandembed--active');}});}
function startDate()
{$('.start-date').datepicker({autoHide:true,format:'yyyy-mm-dd'});}
function create_variation()
{var cnt=0;var video_id=$('#video_id').val();var v_token=$('#v_token').val();var variation_name=$('#variation_name').val();var variation_days=$('#variation_days').val();var variation_days_end=$('#variation_days_end').val();if(variation_name=='')
{$('#variation_name_error').addClass('text-danger').html('This Field cannot be left blank.');cnt++;}
else
{$('#variation_name_error').removeClass('text-danger').html('');}
if(variation_days=='')
{$('#variation_days_error').addClass('text-danger').html('This Field cannot be left blank.');cnt++;}
else
{$('#variation_days_error').removeClass('text-danger').html('');}
if(variation_days_end=='')
{$('#variation_days_end_eror').addClass('text-danger').html('This Field cannot be left blank.');cnt++;}
else
{$('#variation_days_end_eror').removeClass('text-danger').html('');}
if(cnt>0)
{return false;}
else
{$.ajax({url:"../backend_files/variation_backend.php",type:"POST",data:{video_id:video_id,variation_name,variation_days,variation_days_end},beforeSend:function(){$('#vis_load').show();$('#vis_btn').hide();$('#variBtn').addClass('disabled');},success:function(followup)
{$('#vis_load').hide();$('#vis_check').show();var data=$.trim(followup);if(data!='')
{var url=site_url+"?p=video-variation&t="+v_token+"&d="+data;setTimeout(function(){$('.vis_check').hide();window.location.href=url;},3000);
    
}
else
{$('#formErr').addClass('text-danger').html('Variation cannot be generated. Please try again.');}}});}}
var initialWidth=640,initialHeight=480,newWidth,newHeight;
function getValues(){initialWidth=1200;initialHeight=500;newWidth=$("#videowidth").val();newHeight=$("#videoheight").val();};
function getAspectRatio(){
    return aspectRatio=initialWidth/initialHeight;};
    $("#videowidth").on("change keyup",function(){var collectionid=$(this).data('collectionid');if($('#lockratio_'+collectionid).is(':checked')==true)
{getValues();getAspectRatio();newHeight=Math.round(newWidth/aspectRatio);$("#videoheight").val(newHeight);}
add_frame_data('2');});$("#videoheight").on("change keyup",function(){var collectionid=$(this).data('collectionid');if($('#lockratio_'+collectionid).is(':checked')==true)
{getValues();getAspectRatio();newWidth=Math.round(newHeight*aspectRatio);$("#videowidth").val(newWidth);}
add_frame_data('2');});var initialWidth=640,initialHeight=480,newWidth,newHeight;function getValues1(){initialWidth=640;initialHeight=480;newWidth=$("#width").val();newHeight=$("#height").val();};function getAspectRatio1(){return aspectRatio=initialWidth/initialHeight;};function widthChange()
{if($('input[name="lockaspectratio"]').is(':checked')==true)
{getValues1();getAspectRatio1();newHeight=Math.round(newWidth/aspectRatio);$("#height").val(newHeight);}
chnage_width_height('1');}
function heightChange()
{if($('input[name="lockaspectratio"]').is(':checked')==true)
{getValues1();getAspectRatio1();newWidth=Math.round(newHeight*aspectRatio);$("#width").val(newWidth);}
chnage_width_height('1');}
function add_modal()
{$('#teamadd_popup_div').addClass('shareandembed--active');}
function add_member()
{$('#memberadd_popup_div').addClass('shareandembed--active');}
function memberadd_close()
{$('#memberadd_popup_div').removeClass('shareandembed--active');}
function team_member_add(team_id)
{var teammembers=$('#teammembers').val();$.ajax({url:"../backend_files/add_team_backend.php",type:"POST",data:{team_id,teammembers,opt:'team_member_add'},beforeSend:function(){$('#memBtn').attr('disabled',true);$('#aMember').hide();$('.load_spinner').show();},success:function(followup)
{$('#memBtn').attr('disabled',false);$('#aMember').show();$('.load_spinner').hide();$('.response').html(followup);setTimeout(function(){$('#memberadd_popup_div').removeClass('shareandembed--active');load_team(team_id);$('.response').html('');},3000);$('.tags--removeAllBtn').click();}});}
function load_team(team_id)
{$.ajax({url:"../backend_files/members_filter.php",type:"POST",data:{team_id},beforeSend:function(){div_loader('default_view');},success:function(followup)
{div_loader_remove('default_view');$('#default_view').html(followup);}});}
function shareclose_team(x)
{if(x==2)
{$('#teamadd_popup_div').removeClass('shareandembed--active');}
else
{var teamname=$('#teamname').val();var teamdesc=$('#teamdesc').val();$('#teamadd_popup_div').removeClass('shareandembed--active');if(teamname!='')
{$.ajax({url:"../backend_files/add_team_backend.php",type:"POST",data:{teamname,teamdesc,opt:'team'},beforeSend:function(){$('.loadingImg').show();},success:function(followup)
{$('.loadingImg').hide();if(x==3)
{window.location.href=site_url+"team";}}});}}}
function team_next(x){var teamname=$("#teamname").val(); var teamdesc=$("#teamdesc").val(); var teammembers=$('textarea[name="teammembers1"]').val(); var collection=[]; $.each($("input[name='col_chk']:checked"), function (){collection.push($(this).val());}); if (x==1){$.ajax({url: "../backend_files/check_team_exist.php", type: "POST", data:{teamname}, beforeSend: function (){$("#team_next_btn").attr("disabled", true); $("#tNext").hide(); $(".load_spinner").show();}, success: function (followup){$("#team_next_btn").attr("disabled", false); $("#tNext").show(); $(".load_spinner").hide(); if (followup==1){$("#team_error").addClass("text-danger").html("Team name already exists."); $("#teamname").css({"border-color": "#faa29c"}); $("#team_next_btn").attr("disabled", true);}else{$("#team_error").removeClass("text-danger").html(""); $("#teamname").css({"border-color": "#cecece"}); $("#d1").hide(); $("#d2").show();}},});}if (x==3){$("#d1").show(); $("#d2").hide();}if (x==2){$.ajax({url: "../backend_files/add_team_backend.php", type: "POST", data:{teamname, teamdesc, teammembers, opt: "team_members", collection}, beforeSend: function (){$("#teamBtn").attr("disabled", true); $("#aTeam").hide(); $(".load_spinner").show();}, success: function (followup){$("#teamBtn").attr("disabled", false); $("#aTeam").show(); $(".load_spinner").hide(); var data=JSON.parse(followup); var myStr="token:" + data.token + "-already_user:" + data.already_user + "-new_user:" + data.new_user; var msg=data.error_message; $('#response').addClass('text-danger').html(msg); var token=encodeURIComponent(window.btoa(myStr)); setTimeout(function(){window.location.href=site_url + "?p=team&t=" + token;}, 2000);},});}}
function chk_txt()
{var teamname=$('#teamname').val();var team_next_btn=$('#team_next_btn');if(teamname!='')
{team_next_btn.attr("disabled",false).removeClass('disabled');}
else
{team_next_btn.attr("disabled",true).addClass('disabled');}}
function revoke_membr(team_map_id,row_id)
{$.ajax({url:"../backend_files/members_action.php",type:"POST",data:{team_map_id,opt:'revoke_members'},beforeSend:function(){$('#rvkBtn_'+row_id).attr('disabled',true);$('#rvkText_'+row_id).hide();$('.load_spinner_'+row_id).show();},success:function(followup)
{$('#sign_'+row_id).fadeIn().delay(3000).fadeOut();$('#rvkBtn_'+row_id).hide();$('#grtBtn_'+row_id).show();$('#rvkBtn_'+row_id).attr('disabled',false);$('#rvkText_'+row_id).show();$('.load_spinner_'+row_id).hide();}});}
function grant_membr(team_map_id,row_id)
{$.ajax({url:"../backend_files/members_action.php",type:"POST",data:{team_map_id,opt:'grant_members'},beforeSend:function(){$('#grtBtn_'+row_id).attr('disabled',true);$('#grtText_'+row_id).hide();$('.load_spinner_'+row_id).show();},success:function(followup)
{$('#sign_'+row_id).fadeIn().delay(3000).fadeOut();$('#rvkBtn_'+row_id).show();$('#grtBtn_'+row_id).hide();$('#grtBtn_'+row_id).attr('disabled',false);$('#grtText_'+row_id).show();$('.load_spinner_'+row_id).hide();}});}
function chnge_pri_setting(privacy_option)
{var team_id=$('#team_id').val();$.ajax({url:"../backend_files/team_backend.php",type:"POST",data:{team_id,privacy_option,opt:'privacy_setting'},beforeSend:function(){$('#loadingImg').show();},success:function(followup)
{$('#loadingImg').hide();if(privacy_option==1)
{$('.private_lock').show();$('.public_lock').hide();}
else
{$('.private_lock').hide();$('.public_lock').show();}}});}
function dlt_team()
{$('.dlt_team').addClass('deleteconfirm--active');}
function delete_team(id)
{if(id!='')
{$.ajax({url:"../backend_files/team_backend.php",type:"POST",data:{team_id:id,opt:'delete_team'},beforeSend:function(){$('#dltBtn').hide();$('.load_spinner_delete').show();},success:function(followup)
{window.location.href=site_url+'?p=team';}});}}
function cc_add_popup()
{$('#cc_add_popup_div').addClass('shareandembed--active');}
function close_cc_popup(x){$('#cc_add_popup_div').removeClass('shareandembed--active');}
function more_colladd(token)
{$('#morecoll_popup_div').addClass('shareandembed--active');$.ajax({url:"../backend_files/more_col.php",type:"POST",data:{token},beforeSend:function(){$('.add_more_spinner').show();},success:function(followup)
{$('#morecoll_div').html(followup);}});}
function shareclose_addcoll()
{$('#morecoll_popup_div').removeClass('shareandembed--active');}
function shareclose_addclient()
{$('#addclient_popup_div').removeClass('shareandembed--active');}
function shareclose_addtimer()
{$('#addtimer_popup_div').removeClass('shareandembed--active');}
function shareclose_boomvideo()
{$('#boomvideo_popup_div').removeClass('shareandembed--active');}
function team_add_coll(team_id)
{var collection=[];$.each($("input[name='col_more']:checked"),function(){collection.push($(this).val());});$.ajax({url:"../backend_files/add_team_backend.php",type:"POST",data:{team_id,collection,opt:'add_morecoll'},beforeSend:function(){$('.load_spinner').show();$('#acoMember').hide();},success:function(followup)
{$('.load_spinner').hide();$('#acoMember').show();setTimeout(function(){location.reload();},2000);}});}
function contextmenu_opt()
{if($('#context_menu_opt').is(':checked')==true)
{$('#contextmenu_div').show();
    $('.vjs-context-menu').show();
}
else
{$('#contextmenu_div').hide();
    $('.vjs-context-menu').hide();
}}
function keyboard_shortcut_opt()
{if($('#keyboard_shortcuts').is(':checked')==true)
{$('#keyboard_shortcuts_div').show();}
else
{$('#keyboard_shortcuts_div').hide();}}
function watch_limit_section()
{if($('#watch_limit').is(':checked')==true)
{$('.wl-modal').hide(); $('#watch_limit_div').show();$('.vjs-limit-overlay').show(); watch_limit_modal(); }
else
{$('#watch_limit_div').hide();$('.vjs-limit-overlay').hide(); $('.vjs-limit-overlay').remove(); }}
function watch_limit_modal()
{
    var watch_limit_option = $('#watch_limit_option').val();
    var watch_limit_text = $('#watch_limit_text').val();
    var watch_limit_img = $('.watchlimit_icon img').attr('src');
    
    var watch_limit_url = $('#watch_limit_url').val();
    var info_share_url = $('#info_share_url').val();
    
    var watch_url = '';
    if(watch_limit_url!=='')
    {
        watch_url =  watch_limit_url;
    }
    else
    {
        watch_url = info_share_url;
    }
    
    var watch_msg = '';
    var display_url_show = '';
    if(watch_limit_option==1)
    {
        watch_msg = watch_limit_text;
        display_url_show = 'block';
        
    }
    else
    {
        watch_msg = '<img src="'+watch_limit_img+'" width="350" >';
        display_url_show = 'none';
    }
    
    var html = '<div class="vjs-limit-overlay  wl-modal"><a class="vjs-limit" href="" target="_blank" style="text-decoration: none;"><span style="line-height: 1.5em;" id="watchlimit_msg">'+watch_msg+'<span style="color:#fff; display:'+display_url_show+'">'+watch_url+'</span></span></a></div>';
    
    $('.vjs-limit-overlay').remove();
    $('#my-video').append(html);
    
}
function watch_text_pre(x)
{
    $('#watchlimit_msg').text(x);
}
function watch_limit_opt(x)
{ 
    $('.vjs-limit-overlay').remove();
    watch_limit_modal(); 
    if(x==1)
{$('#watch_opt_div1').show();$('#watch_opt_div2').hide();}
else
{$('#watch_opt_div1').hide();$('#watch_opt_div2').show();}}
function midroll_opt()
{if($('#midroll_vids').is(':checked')==true)
{$('#midroll_div').show();}
else
{$('#midroll_div').hide();}}
function midroll_vids_select(x)
{if(x==1)
{if($('#pre_option').is(':checked')==true)
{$('#rolldiv1').show();}
else
{$('#rolldiv1').hide();}}
if(x==2)
{if($('#mid_option').is(':checked')==true)
{$('#rolldiv2').show();}
else
{$('#rolldiv2').hide();}}
if(x==3)
{if($('#post_option').is(':checked')==true)
{$('#rolldiv3').show();}
else
{$('#rolldiv3').hide();}}}
function ovrelay_ad_opt(x)
{if(x==1)
{var overlay_text=$('#overlay_text').val();$('.overlay').html(overlay_text);$('#overlay_text_div').show();$('#overlayad_image_div').hide();var overlay_text=$('#overlay_text').val();$('.overlay').html(overlay_text);}
else
{var ad_image_size_w=$('#ad_image_size_w').val();var ad_image_size_h=$('#ad_image_size_h').val();var adimage_src=$('.adimage_icon img').attr('src');var adimage='<img src="'+adimage_src+'" width="'+ad_image_size_w+'" height="'+ad_image_size_h+'" >';$('.overlay').html(adimage);$('#overlay_text_div').hide();$('#overlayad_image_div').show();}}
function info_overlay_opt()
{if($('#info_overlay').is(':checked')==true)
{$('#info_over_div').show();$('.vjs-info').css("display", "flex");}
else
{$('#info_over_div').hide();$('.vjs-info').hide();}}
function info_overlay_upgrade()
{if($('#infoverlayupgrade').is(':checked')==true)
{$('#info_over_div').show();}
else
{$('#info_over_div').hide();}}
function overlay_ad_opt()
{if($('#overlay_ad').is(':checked')==true)
{ $('.wl-modal').hide(); $('#overlay_div').show();$('.div-over').show();}
else
{$('#overlay_div').hide();$('.div-over').hide();}}
function overlay_ad_upgrade()
{if($('#overlay_adupgrade').is(':checked')==true)
{$('#overlay_div').show();}
else
{$('#overlay_div').hide();}}
function overlay_text_type()
{var overlay_text=$('#overlay_text').val();$('.overlay').html(overlay_text);}
function rewind_button()
{if($('#rewind_button_opt').is(':checked')==true)
{$('.vjs-rewind-control').show();}
else
{$('.vjs-rewind-control').hide();}}
function quality_switch_opt()
{if($('#quality_switch').is(':checked')==true)
{$('.vjs-quality-button').show();}
else
{$('.vjs-quality-button').hide();}}
function theater_mode_opt()
{if($('#theater_mode').is(':checked')==true)
{$('.vjs-mode-control').show();}
else
{$('.vjs-mode-control').hide();}}
function pip_mode_opt()
{if($('#pip_mode').is(':checked')==true)
{$('.vjs-picture-in-picture-control').show();}
else
{$('.vjs-picture-in-picture-control').hide();}}
var initialWidth=60,initialHeight=40,newWidth,newHeight;function getValues2(){initialWidth=60;initialHeight=40;newWidth=$("#logo_size_w").val();newHeight=$("#logo_size_h").val();};function getAspectRatio2(){return aspectRatio=initialWidth/initialHeight;};function logowidthChange()
{if($('input[name="logo_lockaspectratio1"]').is(':checked')==true)
{getValues2();getAspectRatio2();newHeight=Math.round(newWidth/aspectRatio);$("#logo_size_h").val(newHeight);$('.vjs-logo img').css({"width":newWidth+'px',"height":newHeight+'px'});}
else
{var logo_size_w=$('#logo_size_w').val();var logo_size_h=$('#logo_size_h').val();$('.vjs-logo img').css({"width":logo_size_w+'px',"height":logo_size_h+'px'});}}
function logoheightChange()
{if($('input[name="logo_lockaspectratio1"]').is(':checked')==true)
{getValues2();getAspectRatio2();newWidth=Math.round(newHeight*aspectRatio);$("#logo_size_w").val(newWidth);$('.vjs-logo img').css({"width":newWidth+'px',"height":newHeight+'px'});}
else
{var logo_size_w=$('#logo_size_w').val();var logo_size_h=$('#logo_size_h').val();$('.vjs-logo img').css({"width":logo_size_w+'px',"height":logo_size_h+'px'});}}
function getValuesAd(){initialWidth=350;initialHeight=300;newWidth=$("#ad_image_size_w").val();newHeight=$("#ad_image_size_h").val();};function getAspectRatioAd(){return aspectRatio=initialWidth/initialHeight;};function adwidthChange()
{if($('input[name="logo_lockaspectratio"]').is(':checked')==true)
{getValuesAd();getAspectRatioAd();newHeight=Math.round(newWidth/aspectRatio);$("#ad_image_size_h").val(newHeight);$('.overlay img').css({"width":newWidth+'px',"height":newHeight+'px'});}
else
{var ad_image_size_w=$('#ad_image_size_w').val();var ad_image_size_h=$('#ad_image_size_h').val();$('.overlay img').css({"width":ad_image_size_w+'px',"height":ad_image_size_h+'px'});}}
function adheightChange()
{if($('input[name="logo_lockaspectratio"]').is(':checked')==true)
{getValuesAd();getAspectRatioAd();newWidth=Math.round(newHeight*aspectRatio);$("#ad_image_size_w").val(newWidth);$('.overlay img').css({"width":newWidth+'px',"height":newHeight+'px'});}
else
{var ad_image_size_w=$('#ad_image_size_w').val();var ad_image_size_h=$('#ad_image_size_h').val();$('.overlay img').css({"width":ad_image_size_w+'px',"height":ad_image_size_h+'px'});}}
function player_skins_opt(x)
{$('link[href="'+site_url+'newplayer/videojs/skins/chrome/videojs.min.css"]').prop('disabled',true);$('link[href="'+site_url+'newplayer/videojs/skins/jwlike/videojs.min.css"]').prop('disabled',true);$('link[href="'+site_url+'newplayer/videojs/skins/party/videojs.min.css"]').prop('disabled',true);$('link[href="'+site_url+'newplayer/videojs/skins/pinko/videojs.min.css"]').prop('disabled',true);$('link[href="'+site_url+'newplayer/videojs/skins/roundal/videojs.min.css"]').prop('disabled',true);$('link[href="'+site_url+'newplayer/videojs/skins/shaka/videojs.min.css"]').prop('disabled',true);$('link[href="'+site_url+'newplayer/videojs/skins/treso/videojs.min.css"]').prop('disabled',true);$('link[href="'+site_url+'newplayer/videojs/skins/nuevo/videojs.min.css"]').prop('disabled',true);$('link[href="'+site_url+'newplayer/videojs/skins/'+x+'/videojs.min.css"]').prop('disabled',false);}
function logo_title_chnge()
{$('.vjs-logo a').attr('title',$('#logo_title').val());}
function logo_url_chnge()
{$('.vjs-logo a').attr('href',$('#logo_url').val());}
function save_overlay(type,variation_id="")
{
    var cnt=0;
    var video_id=$('#video_id').val();
    var info_share_url=$('#info_share_url').val();
    var info_text=$('#info_text').val();
    var over_info_image_file=$('#over_info_image_file').val();
    var watch_limit_option=$('#watch_limit_option').val();
    var watch_limit_text=$('#watch_limit_text').val();
    var watch_limit_time=$('#watch_limit_time').val();
    var watch_limit_url=$('#watch_limit_url').val();
    var watch_time_image_file=$('#watch_time_image_file').val();
    var overlay_ad_type=$('#overlay_ad_type').val();
    var overlay_text=$('#overlay_text').val();
    var delay_time=$('#delay_time').val();
    var overlay_ad_image_val=$('#overlay_ad_image_val').val();
    var ad_image_size_w=$('#ad_image_size_w').val();
    var ad_image_size_h=$('#ad_image_size_h').val();
    var image_opacity = $('#image_opacity').val();
    
    if($('input[name="overlay_ad"]').is(':checked')==true)
    {
        if(overlay_ad_type==2)
        {if(overlay_ad_image_val!=='')
        {$('#adimage_error').html('');}
        else
        {$('#adimage_error').html('Image should not be empty.');cnt++;}}
    }

if($('#info_overlay').is(":checked")==true)
{var info_overlay=1;}
else
{var info_overlay=0;}
if($('#watch_limit').is(':checked')==true)
{var watch_limit=1;}
else
{var watch_limit=0;}
if($('#overlay_ad').is(':checked')==true)
{var overlay_ad=1;}
else
{var overlay_ad=0;}
if(cnt>0)
{return false;}
else
{$.ajax({url:"../backend_files/overlay_watchlimit_backend.php",type:"POST",data:{video_id,watch_limit,watch_limit_option,watch_limit_text,watch_limit_time,watch_limit_url,opt:'watch_limit',watch_time_image_file,info_overlay,info_share_url,info_text,over_info_image_file,overlay_ad,overlay_text,delay_time,type,variation_id,overlay_ad_type,overlay_ad_image_val,ad_image_size_w,ad_image_size_h, image_opacity},beforeSend:function(){$('#over_spin').show();$('#over_btn').hide();},success:function(followup)
{ save_overlay_text(type, variation_id);
    $('#over_spin').hide();$('#over_btn').show();if(type=='variation')
load_var_player(variation_id, video_id);else
load_s_player(video_id);}});}}
function save_overlay_text(type,variation_id="")
{
    var video_id = $('#video_id').val();
    
    var show_overlay_text = 0;
    if($('input[name="overlay_text_modal"]').is(':checked')==true)
    {
        show_overlay_text = 1;
    }
    else
    {
        show_overlay_text = 0;
    }
    
    var overlay_text = [];
    $("input[name='overlay_text[]']").each(function() {
        var value = $(this).val();
        if (value) {
            overlay_text.push(value);
        }
        else
        {
            overlay_text.push('');
        }
    });
    //console.log(overlay_text);
    
    var font_name = [];
    $("select[name='font_name[]']").each(function() {
        var value = $(this).val();
        if (value) {
            font_name.push(value);
        }
        else
        {
            font_name.push(2);
        }
    });
    
    var text_position = [];
    $("select[name='text_position[]']").each(function() {
        var value = $(this).val();
        if (value) {
            text_position.push(value);
        }
        else
        {
            text_position.push(2);
        }
    });
    
    var overlay_color = [];
    $("input[name='overlay_color[]']").each(function() {
        var value = $(this).val();
        if (value) {
            overlay_color.push(value);
        }
        else
        {
            overlay_color.push('');
        }
    });
    
    var overlay_text_url = [];
    $("input[name='overlay_text_url[]']").each(function() {
        var value = $(this).val();
        if (value) {
            overlay_text_url.push(value);
        }
        else
        {
            overlay_text_url.push('');
        }
    });
    
    var overlay_time = [];
    $("input[name='overlay_time[]']").each(function() {
        var value = $(this).val();
        if (value) {
            overlay_time.push(value);
        }
        else
        {
            overlay_time.push('');
        }
    });
    
    var text_animation = [];
    $("select[name='text_animation[]']").each(function() {
        var value = $(this).val();
        if (value) {
            text_animation.push(value);
        }
        else
        {
            text_animation.push(1);
        }
    });
    
    $.ajax({ 
        url: "../backend_files/save_customization.php", 
        type: "POST", 
        data:  {video_id, show_overlay_text, overlay_text, font_name, overlay_color, overlay_text_url, overlay_time, text_animation, opt:'text', text_position, type, variation_id},
        beforeSend:function()
        {
            $('#cust1_btn').hide();
            $('#cust1_spin').show();
        },
        success: function(followup) 
        { 
            $('#cust1_btn').show();
            $('#cust1_spin').hide();
            if(followup==1)
            {
                $('#msg2').html('Data saved successfully.');
                
            }
            else
            {
                $('#msg2').html('Please try again after some time.');
            }
            //load_player();
        } 
    });
}
function logo_position_opt(x)
{if(x=='RT')
{$('.vjs-logo').show();$('.vjs-logo').css("left",'');$('.vjs-logo').css("right",'10px');$('.vjs-logo-bar').hide();$('#logo_size_div').show();}
if(x=='LT')
{$('.vjs-logo').show();$('.vjs-logo').css("left",'10px');$('.vjs-logo').css("right",'');$('.vjs-logo-bar').hide();$('#logo_size_div').show();}
if(x=='playbar')
{$('.vjs-logo').hide();$('.vjs-logo-bar').css("display","table");$('#logo_size_div').hide();}}
function vid_settings(type,variation_id="")
{var video_id=$('#video_id').val();var context_url=$('#context_url').val();var context_text=$('#context_text').val();var context_icon=$('#context_icon').val();var relatedvideo=$('#relatedvideo').val();var keyboard_shortcuts=$('#keyboard_shortcuts').val();if($('#context_menu_opt').is(':checked')==true)
{var context_menu_opt=1;}
else
{var context_menu_opt=0;}
if($('#related_videos_opt').is(':checked')==true)
{var related_videos_opt=1;}
else
{var related_videos_opt=0;}
var related_collection=$("input[name='related_collect[]']:checked").map(function(){return $(this).val();}).get();$.ajax({url:"../backend_files/overlay_watchlimit_backend.php",type:"POST",data:{video_id,context_menu_opt,context_url,context_text,context_icon,opt:'vid_settings',related_videos_opt,relatedvideo,keyboard_shortcuts,related_collection,type,variation_id},beforeSend:function(){$('#key_spin').show();$('#key_btn').hide();},success:function(followup)
{$('#key_spin').hide();$('#key_save_tick').show();setTimeout(function(){$('#key_save_tick').hide();$('#key_btn').show();},2000);if(type=='variation')
load_var_player(variation_id, video_id);else
load_s_player(video_id);}});}
function related_options(x)
{if(x==1)
{$('#related_collection_div').show();}
else
{$('#related_collection_div').hide();}}
function relate_video_option()
{if($('#related_videos_opt').is(':checked')==true)
{$('#related_vid_div').show();}
else
{$('#related_vid_div').hide();}}
var midroll_vid_count=$('#midroll_vid_count').val();var count=midroll_vid_count;function dropzone_click(x)
{$('.recommendationDiv'+x).click();}
function add_more_mid_vids()
{var html='<div id="mid_vid_div_'+count+'" class="mb-5 midrollvideos midroll_divs"><a href="javascript:void(0)" class="remove-subtitles" style="right:14px;margin-top: 0px;" onclick="rmv_midrollvideos('+count+')"><i class="fa fa-times-circle fa-lg"></i></a><div class="mt-2"><p class="videocustomize__prompt mr-2 w-auto">Video source url</p> <input type="text" name="midurl[]" id="midurl" class="videocustomize__textfield w-100" placeholder="Please enter midroll src" value=""></div><div class="mt-2"><p class="videocustomize__prompt mr-2 w-auto">External link url</p> <input type="text" name="midhref[]" id="midhref" class="videocustomize__textfield w-100" placeholder="e.g. https://videoman.io/" value="https://url-to-go-on-click"></div><div class="mt-2"><p class="videocustomize__prompt mr-2 w-auto">Time</p> <input type="text" name="midtime[]" id="midtime" class="videocustomize__textfield w-100" placeholder="00:10" value="00:10"></div></div>';var html1='<div id="mid_vid_div_'+count+'" class="mb-5 midrollvideos midroll_divs"> <a href="javascript:void(0)" class="remove-subtitles" style="right:14px;margin-top: 0px;" onclick="rmv_midrollvideos('+count+')"><i class="fa fa-times-circle fa-lg"></i></a><div class="mt-2"><p class="videocustomize__prompt mr-2 w-auto">Video source url</p> <input type="text" name="midurl[]" id="midurl" class="videocustomize__textfield w-100" placeholder="Please enter midroll src" value=""> <span class="mx-3">OR</span><div class="imageuploader__controls"> <input type="file" name="midvideoupload" id="midvideoupload_'+count+'" onchange="mid_videos_valid('+count+')" class="imageuploader__uploader mt-2" accept="video/*"> <a href="javascript:void(0)" class="imageuploader__link" onclick="dropzone_click('+count+')">Upload video</a> <input type="hidden" name="midvideovalue[]" id="midvideovalue_'+count+'" value=""><form action="backend_files/mid_videos_upload.php" id="recommendationDiv2" class="dropzone px-4 dz-clickable recommendationDiv'+count+'" style="display:none;"> <input name="video_id" type="hidden" value="148"> <input name="element_id" type="hidden" value="'+count+'"><div class="dz-default dz-message"><button class="dz-button" type="button">Drop files here to upload</button></div></form></div> <span id="vid_load'+count+'" style="display:none;margin-left: auto;"><i class="fa fa-spinner fa-spin" style="font-size:24px"></i></span> <label id="mid_videos_error_'+count+'"class="text-light2-grey-color">Note: Maximum Video size is 20 mb.</label></div><div class="mt-2"><p class="videocustomize__prompt mr-2 w-auto">External link url</p> <input type="text" name="midhref[]" id="midhref" class="videocustomize__textfield w-100" placeholder="Please enter midroll href" value="https://url-to-go-on-click"></div><div class="mt-2"><p class="videocustomize__prompt mr-2 w-auto">Time</p> <input type="text" name="midtime[]" id="midtime" class="videocustomize__textfield w-100" placeholder="00:10" value="00:20"></div></div>';var html2='<div id="mid_vid_div_'+count+'" class="mb-5 midrollvideos midroll_divs"> <a href="javascript:void(0)" class="remove-subtitles" style="right:14px;margin-top:0px;" onclick="rmv_midrollvideos('+count+')"><i class="fa fa-times-circle fa-lg"></i></a><div class="mt-2"><p class="videocustomize__prompt mr-2 w-auto">Video source url</p> <input type="text" name="midurl[]" id="midurl_'+count+'" class="videocustomize__textfield w-100" placeholder="Please enter midroll src" value="" /><div class="imageuploader__controls"> <a href="javascript:void(0)" class="imageuploader__link mt-2 py-2" onclick="$(\'#midvideoupload_'+count+'\').click();"><i class="fa fa-upload"></i> Upload video</a> <input type="file" name="midvideoupload" id="midvideoupload_'+count+'" onchange="mid_videos_valid('+count+')" class="imageuploader__uploader" accept="video/*" /> <input type="hidden" name="midvideovalue[]" id="midvideovalue_'+count+'" value="" /></div> <span id="vid_load'+count+'" style="display: none; margin-left: auto;"><i class="fa fa-spinner fa-spin" style="font-size: 16px;"></i></span> <label id="mid_videos_error_'+count+'" class="text-light2-grey-color">Note: Maximum Video size is 20 mb.</label></div><div class="mt-2"><p class="videocustomize__prompt mr-2 w-auto">External link url</p> <input type="text" name="midhref[]" id="midhref" class="videocustomize__textfield w-100" placeholder="e.g. https://videoman.io/" value="" /></div><div class="mt-2"><p class="videocustomize__prompt mr-2 w-auto">Time</p> <input type="text" name="midtime[]" id="midtime" class="videocustomize__textfield w-100" placeholder="00:10" value="00:20" onkeypress="return isNumberKey(event)" /></div></div>';$(html2).insertAfter($(".midrollvideos").last());count++;}
function rmv_midrollvideos(x)
{$('#mid_vid_div_'+x).remove();}
function rmv_subtitledivs(x)
{$('#subtitile_divs_'+x).remove();}
function customize_options(video_id,playlist,showlogo)
{$.ajax({url:"../backend_files/collection_customize_option.php",type:"POST",data:{showlogo:showlogo,img_logo,logoposition,logo_title,logo_url,video_id,playlist},success:function(followup)
{$('#customize_options').html(followup);}});}
function load_embed_comments(video_id, vari_id="", opt="")
{$.ajax({url:site_url+"other_sites/embed_comments.php",type:"POST",data:{video_id, vari_id, opt},beforeSend:function(){div_loader('commentszone');},success:function(followup)
{div_loader_remove('commentszone');var data = $.trim(followup); if(data!=''){$('.commentszone').html(followup);}else{$('.commentszone').hide();}}});}
function load_collection_comments(video_id)
{$.ajax({url:site_url+"backend_files/video_comments.php",type:"POST",data:{video_id},beforeSend:function(){div_loader('commentszone');},success:function(followup)
{div_loader_remove('commentszone');$('.commentszone').html(followup);}});}
function load_comments_embed(video_id,collection)
{$.ajax({url:site_url+"backend_files/video_comments_embed.php",type:"POST",data:{video_id,collection},beforeSend:function(){div_loader('commentszone');},success:function(followup)
{div_loader_remove('commentszone');$('.commentszone').html(followup);}});}
function div_loader(div_id)
{var html='<div class="blockUI1" style=""></div><div class="blockUI1" style="position: absolute; padding: 0px; margin: 0px; width: auto; top: 50%; left: 50%; text-align: center; color: rgb(0, 0, 0); border: 0px;"><div class="preload-data__loading-spinner preload-data__loading-spinner--expand load_spinner"><div class="hl-loading-spinner hl-loading-spinner--medium hl-loading-spinner--dark hl-loading-spinner--no-text"><div class="hl-loading-spinner__icon-outer"><div class="hl-loading-spinner__icon"></div></div></div></div></div>';$('#'+div_id).append(html);}
function div_loader_remove(div_id)
{$('#'+div_id+' .blockUI1').remove();}
function load_videoinfo(video_id)
{$.ajax({url:site_url+"/backend_files/videoinfo.php",type:"POST",data:{video_id},beforeSend:function(){div_loader('videoinfo');},success:function(followup)
{div_loader_remove('videoinfo');$('#videoinfo').html(followup);}});}
function load_videoinfoembed(video_id,variation_id, opt="")
{$.ajax({url:site_url+"/backend_files/videoinfo_embed.php",type:"POST",data:{video_id,opt,variation_id},beforeSend:function(){div_loader('videoinfo');},success:function(followup)
{div_loader_remove('videoinfo');var data = $.trim(followup); if(data!=""){ $('#videoinfo').html(followup);}else{$('#videoinfo').hide();}}});}
function subtitle_opt()
{if($('#subtitles').is(':checked')==true)
{$('#subtitle_div').show();}
else
{$('#subtitle_div').hide();}}
function subtitle_format_opt(x,y)
{if(x==1)
{$('#subtitle_format_1_'+y).show();$('#subtitle_format_2_'+y).hide();}
else if(x==2)
{$('#subtitle_format_1_'+y).hide();$('#subtitle_format_2_'+y).show();}
else
{$('#subtitle_format_1').hide();$('#subtitle_format_2').hide();}}
function upload_vtt(x)
{var allowedFiles=[".vtt"];var fileUpload=document.getElementById('vtt_file_'+x);var lblError=document.getElementById('vtt_file_error_'+x);var regex=new RegExp("([a-zA-Z0-9\s_\\.\-:])+("+allowedFiles.join('|')+")$");if(!regex.test(fileUpload.value.toLowerCase())){lblError.innerHTML="Please upload files having extensions: <b>"+allowedFiles.join(', ')+"</b> only.";$('#vtt_file_0'+x).val('');return false;}
else
{lblError.innerHTML='';}
var video_id=$('#video_id').val();var file=$('#vtt_file_'+x)[0].files[0];var form=new FormData();form.append('file',file);form.append('opt','vtt');form.append('video_id',video_id);$.ajax({url:"../backend_files/save_srt_file.php",type:"POST",data:form,dataType:'json',cache:false,processData:false,contentType:false,beforeSend:function(){$('#img_load_vtt_'+x).show();},success:function(followup)
{},complete:function(followup)
{$('#video_subtitle_'+x).val($('#vtt_file_'+x)[0].files[0].name);$('#img_load_vtt_'+x).hide();$('#img_succ_vtt_'+x).show();setTimeout(function(){$('#img_succ_vtt_'+x).hide();},2000);}});}
function upload_srt(x)
{var allowedFiles=[".srt"];var fileUpload=document.getElementById('srt_file_'+x);var lblError=document.getElementById('srt_file_error_'+x);var regex=new RegExp("([a-zA-Z0-9\s_\\.\-:])+("+allowedFiles.join('|')+")$");if(!regex.test(fileUpload.value.toLowerCase())){lblError.innerHTML="Please upload files having extensions: <b>"+allowedFiles.join(', ')+"</b> only.";$('#srt_file').val('');return false;}
else
{lblError.innerHTML='';}
read_srt_file(x);}
function read_srt_file(x)
{var file=$('#srt_file_'+x)[0].files[0];var form=new FormData();form.append('file',file);$.ajax({url:"../backend_files/read_srt_file.php",type:"POST",data:form,dataType:'json',cache:false,processData:false,contentType:false,beforeSend:function(){$('#img_load_srt_'+x).show();},success:function(followup)
{},error:function(followup)
{},complete:function(followup)
{var data=JSON.stringify(followup);var data2=JSON.parse(data);var data3=data2.responseText;$('#srt_input_'+x).val(data3);ConvertFile(x);}});}
function saveFile(input,name,x)
{var video_id=$('#video_id').val();$.ajax({url:"../backend_files/save_srt_file.php",type:"POST",data:{input,name,video_id,opt:'srt_vtt'},dataType:'json',success:function(followup)
{},error:function(followup)
{},complete:function(followup)
{var data=followup.responseText;$('#img_load_srt_'+x).hide();$('#video_subtitle_'+x).val(data);$('#img_succ_srt_'+x).show();setTimeout(function(){$('#img_succ_srt_'+x).hide();},2000);}});return false;}
function ConvertFile(x){var name=$('#srt_file_'+x)[0].files[0].name;var t=$('#srt_input_'+x).val();var webvtt=srt2webvtt(t);saveFile(webvtt,name,x);}
function srt2webvtt(data){var srt=data.replace(/\r+/g,'');srt=srt.replace(/^\s+|\s+$/g,'');var cuelist=srt.split('\n\n');var result="";if(cuelist.length>0){result+="WEBVTT\n\n";for(var i=0;i<cuelist.length;i=i+1){result+=convertSrtCue(cuelist[i]);}}
return result;}
function convertSrtCue(caption){var cue="";var s=caption.split(/\n/);while(s.length>3){for(var i=3;i<s.length;i++){s[2]+="\n"+s[i]}
s.splice(3,s.length-3);}
var line=0;if(!s[0].match(/\d+:\d+:\d+/)&&s[1].match(/\d+:\d+:\d+/)){cue+=s[0].match(/\w+/)+"\n";line+=1;}
if(s[line].match(/\d+:\d+:\d+/)){var m=s[1].match(/(\d+):(\d+):(\d+)(?:,(\d+))?\s*--?>\s*(\d+):(\d+):(\d+)(?:,(\d+))?/);if(m){cue+=m[1]+":"+m[2]+":"+m[3]+"."+m[4]+" --> "+m[5]+":"+m[6]+":"+m[7]+"."+m[8]+"\n";line+=1;}else{return"";}}else{return"";}
if(s[line]){cue+=s[line]+"\n\n";}
return cue;}
function load_player(id,collection, opt="")
{$.ajax({url:site_url+"other_sites/collection_player.php",type:"POST",data:{id,collection,opt},beforeSend:function(){div_loader('player_body');},success:function(followup)
{div_loader_remove('player_body');$('#player_body').html(followup);}});}
function load_s_player(id,opt="")
{$.ajax({url:site_url+"other_sites/single_player.php",type:"POST",data:{id,opt},beforeSend:function(){div_loader('player_body');},success:function(followup)
{$('#player_body').html(followup);load_p_btn(id);setTimeout(function(){},1000);setTimeout(function(){div_loader_remove('player_body');},3000);}});}
function load_var_player(id,video_id,opt="")
{$.ajax({url:site_url+"other_sites/single_variation_player.php",type:"POST",data:{id,video_id,opt},beforeSend:function(){div_loader('player_body');},success:function(followup)
{div_loader_remove('player_body');$('#player_body').html(followup);load_p_btn(id,'variation');}});}
function load_s_var_player(id,video,opt="")
{$.ajax({url:site_url+"other_sites/variation_player.php",type:"POST",data:{id,opt,video},beforeSend:function(){div_loader('player_body');},success:function(followup)
{div_loader_remove('player_body');$('#player_body').html(followup);}});}
function load_s_vid_player(id,opt="")
{$.ajax({url:site_url+"other_sites/video_player.php",type:"POST",data:{id,opt},beforeSend:function(){div_loader('player_body');},success:function(followup)
{div_loader_remove('player_body');$('#player_body').html(followup);}});}
function load_cs_player(id,collection,opt="")
{$.ajax({url:site_url+"other_sites/c_single_player.php",type:"POST",data:{id,opt,collection},beforeSend:function(){div_loader('player_body');},success:function(followup)
{div_loader_remove('player_body');$('#player_body').html(followup);}});}
function load_c_player(id)
{$.ajax({url:site_url+"other_sites/collection_single_player.php",type:"POST",data:{id},beforeSend:function(){div_loader('player_body');},success:function(followup)
{div_loader_remove('player_body');$('#player_body').html(followup);}});}
function load_player_skin(collection)
{$.ajax({url:site_url+"other_sites/player_skin.php",type:"POST",data:{collection},beforeSend:function(){div_loader('player_body');},success:function(followup)
{div_loader_remove('player_body');if($.trim(followup)!='')
{player_skins_opt(followup);}}});}
function add_permsn(token)
{var pages=[];$('input[name="pages[]"]').each(function(){if($(this).is(':checked')==true)
{pages.push($(this).val());}});var features=[];$('input[name="features[]"]').each(function(){if($(this).is(':checked')==true)
{features.push($(this).val());}});$.ajax({url:site_url+"backend_files/add_teampermission.php",type:"POST",data:{token,pages,features},beforeSend:function(){},success:function(followup)
{window.location.href=site_url+"?p=team&t="+followup;}});}
function switch_user_account(active_user_id)
{var self_userid=$('#self_userid').val();$.ajax({url:site_url+"backend_files/switch_user_account.php",type:"POST",data:{active_user_id,self_userid},beforeSend:function(){},success:function(followup)
{if(followup==4)
{swal("","User not found.","warning");}
else if(followup==3)
{swal("","User not verified.","warning");}
else if(followup==2)
{swal("","User not active.","warning");}
else
{window.location.href=site_url+'?p=dashboard';}}});}
function my_space(user_id)
{$.ajax({url:site_url+"backend_files/check_user_space.php",type:"POST",data:{user_id},beforeSend:function(){},success:function(followup)
{$('.my_space').text(followup+' GB');$('#myspace').val(followup);}});}
function client_add_coll(agency_id)
{var clientname=$.trim($('#clientname').val());
var clientemail=$.trim($('#clientemail').val());
var clientspace=parseInt($('#clientspace').val());
var myspace=parseInt($('#myspace').val());

var plan_id = [];
$('input[name="plan_id"]:checked').each(function() {
   if(this.value)
   {
   		plan_id.push(this.value);
   }
});

if(clientspace<0)
{
    $('.response').addClass('text-danger').html('You cannot add negetive values.');
    return false;
}

if(myspace<clientspace)
{$('.response').addClass('text-danger').html('You did not have enough space.');return false;}

$.ajax({url:"../backend_files/agency_client_backend.php",type:"POST",data:{clientname,clientemail,opt:'a_client_add',agency_id,clientspace,plan_id},beforeSend:function(){$('#memBtn').attr('disabled',true);$('#aclMember').hide();$('.load_spinner').show();},success:function(followup)
{$('#memBtn').attr('disabled',false);$('#aclMember').show();$('.load_spinner').hide();if(followup==1)
{my_space(agency_id);$('#clientname').val('');$('#clientemail').val('');$('#clientspace').val(0);$('.response').removeClass('text-danger').addClass('text-success').html('Client added successfully.');setTimeout(function(){shareclose_addclient();load_client();$('.response').html('');},2000);}
else if(followup==2)
{$('.response').addClass('text-danger').html('You did not have enough space.');}
else if(followup==5)
{$('.response').addClass('text-danger').html('You cannot add more clients.');}
else if(followup==3)
{$('.response').addClass('text-danger').html('User already exists.');}
else
{$('.response').addClass('text-danger').html('Please try again after some time.');}}});}
function load_client()
{$('#agency_manage_div').show();$('#empty_agency').hide();$('#agency-manage').DataTable({serverSide:true,processing:true,bDestroy:true,order:[0,"desc"],ajax:'../client/server_side_client.php',});}
function delete_client(client_id, agency_id)
{swal({title:"Are you sure?",text:"You want to delete this client!",type:"warning",showCancelButton:true,confirmButtonClass:"btn-danger",confirmButtonText:"Yes, delete it!",closeOnConfirm:false},function(){$.ajax({url:site_url+"backend_files/client_backend.php",type:"POST",data:{client_id,opt:'delete_client'},success:function(followup)
{if(followup==1)
{my_space(agency_id); swal("","Client deleted successfully","success");setTimeout(function(){load_client();},2000);}
else
{swal("","Client cannot be deleted","success");}}});});}
function create_boomrang()
{var boomevideoname=$('#boomevideoname').val();var start_time=$('#start_time').val();var end_time=$('#end_time').val();var bmchkbox=[];$('input[name="bmchkbox"]').each(function(){if($(this).is(':checked')==true){bmchkbox.push($(this).val());}});$.ajax({url:site_url+"dropzone/create_boomerang.php",type:"POST",data:{boomevideoname,start_time,end_time,bmchkbox},beforeSend:function(){div_loader('addtimer_popup_innerdiv');},success:function(followup)
{div_loader_remove('addtimer_popup_innerdiv');var data=$.trim(followup);
var url=site_url+'?p=video&t='+data;window.location.href=url;
    
}});}
function add_timer()
{var cnt=0;var boomevideoname=$('#boomevideoname').val();var bmchkbox_length=$('input[name=bmchkbox]:checked').length;if(boomevideoname=='')
{$('#boomevideoname_error').html('Please enter name.');cnt++;}
else
{$('#boomevideoname_error').html('');}
if(bmchkbox_length==0)
{$('#boomevideochk_error').html('Please select video.');cnt++;}
else
{$('#boomevideochk_error').html('');}
if(cnt>0)
{return false;}
else
{$('#boomvideo_popup_div').removeClass('shareandembed--active');var popupObj=document.getElementById("addtimer_popup_div");if(popupObj)popupObj.classList.add("shareandembed--active");}
return false;}
function isNumberKey(evt)
{var charCode=(evt.which)?evt.which:evt.keyCode;if(charCode!=46&&charCode>31&&charCode>58&&(charCode<48||charCode>57))
return false;return true;}
function update_img()
{$.ajax({url:site_url+"backend_files/update_img.php",type:"POST",data:{},beforeSend:function(){div_loader('img_div');},success:function(followup)
{div_loader_remove('img_div');$('.profile_img').attr('src',followup);}});}
function sync_plan()
{$.ajax({url:site_url+"member/get_member_plan.php",type:"POST",data:{opt:'sync_plans'},beforeSend:function(){},success:function(data)
{followup=$.trim(data);if(followup==1)
{swal("","successfully.","success");}
else if(followup==2)
{swal("","No new plans found.","info");}
else
{if(followup!='')
{swal("",followup,"error");}}}});}
function showlogo_settings()
{if($('input[name="showlogo"]').is(':checked'))
{$('#logo_div_settings').show();}
else
{$('#logo_div_settings').hide();}}
function showplaybutton()
{if($('input[name="showplaybutton"]').is(':checked')==true)
{$('#playbutton_opt_div').attr('style','display: block;');
    
}
else
{$('#playbutton_opt_div').hide();}}
function showplayoption()
{if($('input[name="showplaybutton"]').is(':checked')==true)
{$('#playbutton_opt_div').show();}
else
{$('#playbutton_opt_div').hide();}}
function playbutton_opt(x) {
    var play_btn_color = $("#play_btn_color").val();
    $('#playbutton').val(x);
    $(".vjs-big-play-button").attr("style", "display: block !important;");
    
    $('.playbutton_grid').removeClass('playbutton_active');
    $('#playbutton_grid'+x).addClass('playbutton_active');
    
    if (x == 2) {
        $(".vjs-big-play-button").attr("style", "display: block !important;");
        $(".vjs-big-play-button").removeClass("vjs-custom-play-button-2 vjs-custom-play-button-3 vjs-custom-play-button-4 vjs-custom-play-button-5 vjs-custom-play-button-6");
        //$(".vjs-big-play-button").removeClass("vjs-custom-play-button-3");
        $(".vjs-big-play-button").addClass("vjs-custom-play-button");
        $(".vjs-big-play-button").attr("style", "background-color: " + play_btn_color + " !important");
        $("#play_btn_div").show();
    } else if (x == 3) {
        $(".vjs-big-play-button").attr("style", "display: block !important;");
        $(".vjs-big-play-button").removeClass("vjs-custom-play-button-2 vjs-custom-play-button-3 vjs-custom-play-button-4 vjs-custom-play-button-5 vjs-custom-play-button-6");
        //$(".vjs-big-play-button").removeClass("vjs-custom-play-button");
        //$(".vjs-big-play-button").removeClass("vjs-custom-play-button-3");
        $(".vjs-big-play-button").addClass("vjs-custom-play-button-2");
        $(".vjs-big-play-button").attr("style", "background-color: " + play_btn_color + " !important");
        $("#play_btn_div").show();
    } else if (x == 4) {
        $(".vjs-big-play-button").attr("style", "display: block !important;");
        $(".vjs-big-play-button").removeClass("vjs-custom-play-button-2 vjs-custom-play-button-3 vjs-custom-play-button-4 vjs-custom-play-button-5 vjs-custom-play-button-6");
        //$(".vjs-big-play-button").removeClass("vjs-custom-play-button");
        //$(".vjs-big-play-button").removeClass("vjs-custom-play-button-2");
        $(".vjs-big-play-button").addClass("vjs-custom-play-button-3");
        $(".vjs-big-play-button").attr("style", "background-color: " + play_btn_color + " !important");
        $("#play_btn_div").show();
    } else if (x == 5) {
        $(".vjs-big-play-button").attr("style", "display: block !important;");
        $(".vjs-big-play-button").removeClass("vjs-custom-play-button-2 vjs-custom-play-button-3 vjs-custom-play-button-4 vjs-custom-play-button-5 vjs-custom-play-button-6");
        //$(".vjs-big-play-button").removeClass("vjs-custom-play-button");
        //$(".vjs-big-play-button").removeClass("vjs-custom-play-button-2");
        $(".vjs-big-play-button").addClass("vjs-custom-play-button-4");
        $(".vjs-big-play-button").attr("style", "background-color: " + play_btn_color + " !important");
        $("#play_btn_div").show();
    } else if (x == 6) {
        $(".vjs-big-play-button").attr("style", "display: block !important;");
        $(".vjs-big-play-button").removeClass("vjs-custom-play-button-2 vjs-custom-play-button-3 vjs-custom-play-button-4 vjs-custom-play-button-5 vjs-custom-play-button-6");
        //$(".vjs-big-play-button").removeClass("vjs-custom-play-button");
        //$(".vjs-big-play-button").removeClass("vjs-custom-play-button-2");
        $(".vjs-big-play-button").addClass("vjs-custom-play-button-5");
        $(".vjs-big-play-button").attr("style", "background-color: " + play_btn_color + " !important");
        $("#play_btn_div").show();
    } else if (x == 7) {
        $(".vjs-big-play-button").attr("style", "display: block !important;");
        $(".vjs-big-play-button").removeClass("vjs-custom-play-button-2 vjs-custom-play-button-3 vjs-custom-play-button-4 vjs-custom-play-button-5 vjs-custom-play-button-6");
        //$(".vjs-big-play-button").removeClass("vjs-custom-play-button");
        //$(".vjs-big-play-button").removeClass("vjs-custom-play-button-2");
        $(".vjs-big-play-button").addClass("vjs-custom-play-button-6");
        $(".vjs-big-play-button").attr("style", "background-color: " + play_btn_color + " !important");
        $("#play_btn_div").show();
    } else {
        $(".vjs-big-play-button").removeClass("vjs-custom-play-button vjs-custom-play-button-2 vjs-custom-play-button-3 vjs-custom-play-button-4 vjs-custom-play-button-5 vjs-custom-play-button-6");
        /*$(".vjs-big-play-button").removeClass("vjs-custom-play-button");
        $(".vjs-big-play-button").removeClass("vjs-custom-play-button-2");
        $(".vjs-big-play-button").removeClass("vjs-custom-play-button-3");*/
        $("#play_btn_div").hide();
        $(".vjs-big-play-button").attr("style", "background-color: #0000 !important; display: block !important;");
    }
}

function load_overview_stats(time,d_from,d_to,cus_range="")
{$.ajax({url:site_url+"tracking/ajax_backend.php",type:"POST",data:{opt:'impr',time,d_from,d_to,cus_range},beforeSend:function(){div_loader('impr_data');},success:function(followup)
{div_loader_remove('impr_data');}});}
function load_impr_over(time,d_from,d_to,cus_range="")
{$.ajax({url:site_url+"tracking/ajax.php",type:"POST",data:{opt:'impr',time,d_from,d_to,cus_range},beforeSend:function(){div_loader('impr_data');},success:function(followup)
{div_loader_remove('impr_data');$('.impr_val').html(followup);}});}
function load_uiimpr_over(time,d_from,d_to,cus_range="")
{$.ajax({url:site_url+"tracking/ajax.php",type:"POST",data:{opt:'ui_impr',time,d_from,d_to,cus_range},beforeSend:function(){div_loader('uiimpr_data');},success:function(followup)
{div_loader_remove('uiimpr_data');$('.uiimpr_val').html(followup);}});}
function load_clickthr_over(time,d_from,d_to,cus_range="")
{$.ajax({url:site_url+"tracking/ajax.php",type:"POST",data:{opt:'clickthr',time,d_from,d_to,cus_range},beforeSend:function(){div_loader('clickthr_data');},success:function(followup)
{div_loader_remove('clickthr_data');$('.clickthr_val').html(followup);}});}
function load_watcht_over(time,d_from,d_to,cus_range="")
{$.ajax({url:site_url+"tracking/ajax.php",type:"POST",data:{opt:'watcht',time,d_from,d_to,cus_range},beforeSend:function(){div_loader('watcht_data');},success:function(followup)
{div_loader_remove('watcht_data');$('.watcht_val').html(followup);}});}
function load_tvideos_over(time,d_from,d_to,cus_range="")
{$.ajax({url:site_url+"tracking/ajax.php",type:"POST",data:{opt:'tvideos',time,d_from,d_to,cus_range},beforeSend:function(){div_loader('tvideos_data');},success:function(followup)
{div_loader_remove('tvideos_data');$('.tvideos_val').html(followup);}});}
function load_tviews_over(time,d_from,d_to,cus_range="")
{$.ajax({url:site_url+"tracking/ajax.php",type:"POST",data:{opt:'tviews',time,d_from,d_to,cus_range},beforeSend:function(){div_loader('tviews_data');},success:function(followup)
{div_loader_remove('tviews_data');$('.tviews_val').html(followup);}});}
function load_uivisitor_over(time,d_from,d_to,cus_range="")
{$.ajax({url:site_url+"tracking/ajax.php",type:"POST",data:{opt:'uivisitor',time,d_from,d_to,cus_range},beforeSend:function(){div_loader('uivisitor_data');},success:function(followup)
{div_loader_remove('uivisitor_data');$('.uivisitor_val').html(followup);}});}
function load_lvisitor_over(time,d_from,d_to,cus_range="")
{$.ajax({url:site_url+"tracking/ajax.php",type:"POST",data:{opt:'lviewer',time,d_from,d_to,cus_range},beforeSend:function(){div_loader('lviewer_data');},success:function(followup)
{div_loader_remove('lviewer_data');$('.lviewer_val').html(followup);}});}
function get_all_clicks(video_id,action,variation_id="")
{$.ajax({url:site_url+"backend_files/get_all_clicks.php",type:"POST",data:{video_id,action,variation_id},beforeSend:function(){},success:function(followup)
{}});}
function load_p_btn(video_id,opt="",collec="")
{$.ajax({url:site_url+"backend_files/load_p_button.php",type:"POST",data:{video_id,opt,collec},success:function(followup)
{
    var data=JSON.parse(followup);
    var x=data.option;
    var play_btn_color=data.color;
    var infinite_option = data.animation_option;
    var animation_style = data.animation_style;
    var button_show_opt = data.show_opt;
    $('.vjs-big-play-button').addClass('animate__animated animate__'+animation_style);
    if(infinite_option==1)
    $('.vjs-big-play-button').addClass('animate-iteration-infinte');
    
    
    if(button_show_opt==1)
    {
        if(x==2)
        {$('.vjs-big-play-button').removeClass('vjs-custom-play-button-2');$('.vjs-big-play-button').removeClass('vjs-custom-play-button-3');$('.vjs-big-play-button').addClass('vjs-custom-play-button');$('.vjs-big-play-button').attr('style','background-color: '+play_btn_color+' !important');}
        else if(x==3)
        {$('.vjs-big-play-button').removeClass('vjs-custom-play-button');$('.vjs-big-play-button').removeClass('vjs-custom-play-button-3');$('.vjs-big-play-button').addClass('vjs-custom-play-button-2');$('.vjs-big-play-button').attr('style','background-color: '+play_btn_color+' !important');}
        else if(x==4)
        {$('.vjs-big-play-button').removeClass('vjs-custom-play-button');
        $('.vjs-big-play-button').removeClass('vjs-custom-play-button-2');
        $('.vjs-big-play-button').addClass('vjs-custom-play-button-3');
        $('.vjs-big-play-button').attr('style','background-color: '+play_btn_color+' !important');}
        else if (x == 5) {
        /*$(".vjs-big-play-button").attr("style", "display: block !important;");*/
        $(".vjs-big-play-button").removeClass("vjs-custom-play-button-2 vjs-custom-play-button-3 vjs-custom-play-button-4 vjs-custom-play-button-5 vjs-custom-play-button-6");
        $(".vjs-big-play-button").addClass("vjs-custom-play-button-4");
        $(".vjs-big-play-button").attr("style", "background-color: " + play_btn_color + " !important");
        $("#play_btn_div").show();
        } else if (x == 6) {
        /*$(".vjs-big-play-button").attr("style", "display: block !important;");*/
        $(".vjs-big-play-button").removeClass("vjs-custom-play-button-2 vjs-custom-play-button-3 vjs-custom-play-button-4 vjs-custom-play-button-5 vjs-custom-play-button-6");
        $(".vjs-big-play-button").addClass("vjs-custom-play-button-5");
        $(".vjs-big-play-button").attr("style", "background-color: " + play_btn_color + " !important");
        $("#play_btn_div").show();
        } else if (x == 7) {
        /*$(".vjs-big-play-button").attr("style", "display: block !important;");*/
        $(".vjs-big-play-button").removeClass("vjs-custom-play-button-2 vjs-custom-play-button-3 vjs-custom-play-button-4 vjs-custom-play-button-5 vjs-custom-play-button-6");
        $(".vjs-big-play-button").addClass("vjs-custom-play-button-6");
        $(".vjs-big-play-button").attr("style", "background-color: " + play_btn_color + " !important");
        $("#play_btn_div").show();
        }
        else
        {$('.vjs-big-play-button').show();$('.vjs-big-play-button').removeClass('vjs-custom-play-button');$('.vjs-big-play-button').removeClass('vjs-custom-play-button-2');$('.vjs-big-play-button').removeClass('vjs-custom-play-button-3');$('.vjs-big-play-button').attr('style','background-color: #0000 !important');
        
        }
    }
    else
    {
        $('.vjs-big-play-button').removeClass('vjs-custom-play-button');
        $('.vjs-big-play-button').removeClass('vjs-custom-play-button-2');
        $('.vjs-big-play-button').removeClass('vjs-custom-play-button-3');
        $('.vjs-big-play-button').removeClass('vjs-custom-play-button-4');
        $('.vjs-big-play-button').removeClass('vjs-custom-play-button-5');
        $('.vjs-big-play-button').removeClass('vjs-custom-play-button-6');
        $('.vjs-big-play-button').attr('style','background-color: #0000 !important; display: block ;');
    }
}});
    
}
function share_count(video_id)
{$.ajax({url:site_url+"backend_files/get_share_count.php",type:"POST",data:{video_id},beforeSend:function(){},success:function(followup)
{}});}
function share_count_collection(collection_id)
{$.ajax({url:site_url+"backend_files/get_share_count.php",type:"POST",data:{collection_id},beforeSend:function(){},success:function(followup)
{}});}
function library_action(id){var action_type=id;if(action_type=="2"){ default_library_images();$("#Default_library_image").addClass("shareandembed--active");}}
function default_library_image_close(){$("#Default_library_image").removeClass("shareandembed--active");}
function sel_library_image_for_thumbnail(file_path){
    $('.chose_from_library_result_show').show(); //$('#chose_from_library_img_pre').prop('src',file_path);
    $('.thumbnailimage_icon img').prop('src',file_path);
    $('#upload_thumb_img').val(file_path);
    $('.vjs-poster').show().css('background-image','url('+file_path+')');default_library_image_close();}
function save_library_image(variation_id = ""){
    var video_id=$('#video_id').val();
    //var image_path=$('#chose_from_library_img_pre').prop('src');
    var imagesource=$('#imagesource').val();
    var image_path = $('#upload_thumb_img').val();
    $.ajax({type:'POST',url:'../backend_files/save_library_image_for_thumbnail.php',data:{video_id:video_id,image_path:image_path, imagesource, variation_id},success:function(data){
        var result=data.trim();if(result=="yes"){$('#thumb_save_tick').show(); if(variation_id==''){setTimeout(function(){ load_s_player(video_id); }, 1000); } }else{console.log('data not saved');}}})}
function storage_space_opt()
{
    if($('input[name="storage_space"]').is(':checked')==true)
    $('#storage_space_div').show();
    else
    $('#storage_space_div').hide();
}
function change_storage(x)
{
    var clientspace = $.trim($('#clientspace').val());
    var c_space = $.trim($('#c_space').html());
    
    $('#a_space').html(clientspace);
    
    $('#t_storage').html(parseInt(clientspace)+parseInt(c_space));
    
}
function resp_vid()
{
    if($('input[name="vid_responsive"]').is(':checked') == true )
    {
       check_resp(1);
    }
    else
    {
       check_resp(2);
    }
}
function fix_size()
{
    chnage_width_height(1);
    $('#width').attr('readonly', false);
    $('#height').attr('readonly', false);
}
function ext_confirm(id)
{var dltconfirmtext=$('#extconfirmtext');var dltconfirm=$('#extconfirm');var str=$.trim(dltconfirmtext.val());var res=str.toLowerCase();if(res=='exit')
{dltconfirm.attr("disabled",false).removeClass('disabled');}
else
{dltconfirm.attr("disabled",true).addClass('disabled');}}
function exit_team_conf()
{
    $('#exitTeam').addClass('deleteconfirm--active');
}

function exit_team(team_id)
{
    $.ajax({
        url:site_url+"backend_files/exit_team.php",
        type:"POST",
        data:{team_id},
        beforeSend:function(){},
        success:function(followup)
        {
            //swal("","Successfully exit from team.","success");
            setTimeout(function(){ window.location.href=site_url+"?p=team"; },2000);
        }
    });
}
function select_rec_opt(x)
{
    var videolength = videojs.getAllPlayers().length;
    if(videolength>0)
    {
        //var player = videojs('myVideo');
            player.record().destroy();
            $('#upload_rec').hide();
    }
    
    $.ajax({
        url:site_url+"live_recording/index.php",
        type:"POST",
        data:{x},
        beforeSend:function(){},
        success:function(followup)
        {
            $('#record_div').html(followup);
            $('#vtype').val(x);
            setTimeout(function(){ check_finish(); },1000);
        }
    });
}
function upload_rec_vids()
{
    var user = $('#user').val();
    var vtype = $('#vtype').val();
    var data = player.recordedData;
    var serverUrl = '../dropzone/upload_rec_videos.php';
    var duration = player.record().getDuration();
    
    var formData = new FormData();
    formData.append('file', data, data.name);
    formData.append('user', user);
    formData.append('duration', duration);
    formData.append('vtype', vtype);
    //console.log('uploading recording:', data.name);
    
    
    
    var bytes = data.size;
    //echo number_format(bytes / 1048576, 2) + ' MB';
    var convert_mb = bytes/1048576;
    
    var convertFixed = convert_mb.toFixed(2) + ' MB';
    
    
    
    $.ajax({
        xhr: function () {
            var xhr = new window.XMLHttpRequest();
            xhr.upload.addEventListener(
                "progress",
                function (evt) {
                    if (evt.lengthComputable) {
                        var percentComplete = evt.loaded / evt.total;
                        percentComplete = parseInt(percentComplete * 100);
                        console.log(percentComplete);
                        $('.data-dz-name').text(data.name);
                        $('.text-solid-grey').text(convertFixed);
                        $('.wl-customprogressdiv').attr('style', 'width:'+percentComplete+'%');
                        $('.progress-b-text').text('Uploading... '+percentComplete+'%');
                        $('.dz-upload').attr('style', 'width:'+percentComplete+'%');
                        if (percentComplete === 100) {
                            $('.loadingImg_upload').show();
                        }
                    }
                },
                false
            );
            return xhr;
        },
        url: serverUrl,
        method: 'POST',
        data: formData,
        cache: false,
        processData: false,
        contentType: false,
        beforeSend:function(){
          $('.onyx-dropzone-info').show();  
        }, 
        success: function (result) {
            //console.log(result);
            var video_id = $.trim(result);
            get_uploaded_vide(video_id);
        },
    });

    
    /*$.ajax({
            url: serverUrl,
            method: 'POST',
            data: formData,
            cache: false,
            processData: false,
            contentType: false,
            success: function (res) {
                //console.log("segment: " + segmentNumber);
                setTimeout(function(){ window.location.href=site_url+"?p=video&t="+res; },1000);
            }
        });*/
    
    /*fetch(serverUrl, {
        method: 'POST',
        body: formData
    }).then(
        success => console.log('recording upload complete.');
        
    ).catch(
        error => console.error('an upload error occurred!')
    );*/
}
function upload_rec_vids2()
{
    var user = $('#user').val();
    var vtype = $('#vtype').val();
    var serverUrl = '../dropzone/upload_rec_videos2.php';
    /*var data = player.recordedData;
    
    var duration = player.record().getDuration();
    
    var formData = new FormData();
    formData.append('file', data, data.name);
    formData.append('user', user);
    formData.append('duration', duration);
    formData.append('vtype', vtype);*/
    //console.log('uploading recording:', data.name);
    
    var fileObjectName = $('#fileObjectName').val();
    var fileObjectBlob = $('#fileObjectBlob').val();
    
    
    /*var fileObject = new File([fileObjectBlob], fileObjectName, {
                            type: 'video/webm'
                        });*/
    
    //var fileObject = $('#fileObject').val();
    
    var formData = new FormData();
    //console.log(fileObject);
    //return false;

    // recorded data
    formData.append('file', fileObjectName);

    // file name
    //formData.append('video-filename', fileObject.name);
    
    
    
    var bytes = fileObjectName;
    //echo number_format(bytes / 1048576, 2) + ' MB';
    var convert_mb = bytes/1048576;
    
    var convertFixed = convert_mb.toFixed(2) + ' MB';
    
    $.ajax({
        xhr: function () {
            var xhr = new window.XMLHttpRequest();
            xhr.upload.addEventListener(
                "progress",
                function (evt) {
                    if (evt.lengthComputable) {
                        var percentComplete = evt.loaded / evt.total;
                        percentComplete = parseInt(percentComplete * 100);
                        console.log(percentComplete);
                        $('.data-dz-name').text(data.name);
                        $('.text-solid-grey').text(convertFixed);
                        $('.wl-customprogressdiv').attr('style', 'width:'+percentComplete+'%');
                        $('.progress-b-text').text('Uploading... '+percentComplete+'%');
                        $('.dz-upload').attr('style', 'width:'+percentComplete+'%');
                        if (percentComplete === 100) {
                            $('.loadingImg_upload').show();
                        }
                    }
                },
                false
            );
            return xhr;
        },
        url: serverUrl,
        method: 'POST',
        data: formData,
        cache: false,
        processData: false,
        contentType: false,
        beforeSend:function(){
          $('.onyx-dropzone-info').show();  
        }, 
        success: function (result) {
            //console.log(result);
            var video_id = $.trim(result);
            get_uploaded_vide(video_id);
        },
    });

}
function get_uploaded_vide(video_id)
{
    $.ajax({
        url:site_url+"backend_files/get_uploaded_video.php",
        type:"POST",
        data:{video_id},
        beforeSend:function(){},
        success:function(followup)
        {
            $('.onyx-dropzone-info').html(followup);
        }
    });
}
function overlay_text_opt()
{
    if($('#overlay_text_modal').is(':checked')==true)
    {
        $('#overlay_text_modal_div').show();
    }
    else
    {
        $('#overlay_text_modal_div').hide();
    }
}
function overlay_text_option()
{
    if($('#overlay_text_modal').is(':checked')==true)
    {
        $('#overlay_text_modal_div').show();
    }
    else
    {
        $('.wl-modal').hide();
        $('#overlay_text_modal_div').hide();
    }
}
function preview_overlay(row_id)
{
    /*if($('input[name="add_button_opt"]').is(':checked')==true)
    {*/
        $('.wl-modal').remove();
        overlay_text_modal(row_id);
        player.pause();
    /*}
    else
    {
        $('#cta_div').hide();
        $('.wl-modal').remove();
    }*/
}
function overlay_text_modal(row_id) {
    //$(".count_modal").val(0);
    $(".wl-modal").remove();

    var cta_text = $("#overlay_text"+row_id).val();
    var video_id = '1606566751_5fc2435f9ac3a';
    
    var font_name = $('#font_name'+row_id).val();
    var overlay_color = $('#overlay_color'+row_id).val();
    var overlay_text_url = $('#overlay_text_url'+row_id).val();
    var overlay_time = $('#overlay_time'+row_id).val();
    var text_position = $('#text_position'+row_id).val();
    
    //if (cta_text_count == 0) {
        var html =
            '<div id="cta_modal_div" class="wl-modal video-js"><div id="cta_modal_text" class="container-text">' +
            cta_text +
            '</div><a href="javascript:void(0)"><div id="skip-video" class="wl-skip" onclick="skip_video()"><u>Skip</u></div></a></div>';
        
        var html1 = '<div id="cta_modal_div" class="wl-modal video-js"> <div id="cta_modal_text" class="container-text"> <div class="row cta_text p-5"><a href="javascript:void(0)" onclick="window.open(\'' + overlay_text_url + '\')" id="textbutton1" class="cta-buttongrp mr-2 " style="color: ' + overlay_color + '; font-size:24px;">' + cta_text + '</a></div><div class="" id="textbuttongroup"></div></div><a href="javascript:void(0)"> <div id="skip-video" class="wl-skip" onclick="skip_video()"><u>Skip</u></div></a></div>';
        
        $("#my-video").append(html1);
        chnge_font(row_id);
        chnge_t_pstn(row_id);
        setTimeout(function(){ chnge_animation(row_id); }, 1000);
        
    //}
}
var count = $('#rowcount').val();
var row = count;
function add_row()
{
    console.log(count);
    if(row>=3){ return false; }
    var html = '<div id="div'+count+'" class="otext_divs mb-4 position-relative w-100"><div style="position: absolute;right: 28px;top: 10px;"><a href="javascript:void(0)" class="border-0" onclick="preview_overlay('+count+')">Preview</a></div><div style="position: absolute; right: 12px; top: 10px;"><a href="javascript:void(0)" class="border-0 text-hover" onclick="rmv_row('+count+')"><i class="fa fa-times-circle"></i></a></div><div class="form-group"> <label class="mb-1">Text</label> <input type="text" class="videocustomize__textfield" name="overlay_text[]" id="overlay_text'+count+'" onkeyup="chnge_text('+count+')" placeholder="Enter text" value=""> </div> <div class="form-group"> <label class="mb-1">Font</label> <select class="videocustomize__textfield" id="font_name'+count+'" name="font_name[]" onchange="chnge_font('+count+')"> <option value="">Select font</option> <option value="1">Open Sans</option> <option value="2">Arial</option> <option value="3">Bristain</option> <option value="4">Boltz</option> <option value="5">Fortunate</option> <option value="6">Glasgow</option> <option value="7">Delich</option> <option value="8">Fresh Meat</option> <option value="9">LS Harsey</option> <option value="10">Cream Peach</option> <option value="11">Avenir Next LT PRO</option> <option value="12">Lato Black</option> <option value="13">CONQUEST</option> <option value="14">Boltz</option> <option value="15">Quanty</option> <option value="16">Segara</option> <option value="17">Spot</option> <option value="18">Staminic</option> <option value="19">Voltrops</option> </select> </div><div class="form-group"> <label class="mb-1">Text Position</label> <select class="videocustomize__textfield" id="text_position'+count+'" name="text_position[]" onchange="chnge_t_pstn('+count+')"> <option value="">Select Text Position</option> <option value="1">Top Left</option> <option value="2">Top Center</option> <option value="3">Top Right</option> <option value="4">Center Left</option> <option value="5" selected>Center Center</option> <option value="6">Center Right</option> <option value="7">Bottom Left</option> <option value="8">Bottom Center</option> <option value="9">Bottom Right</option> </select> </div> <div class="form-group d-flex align-items-center"> <label class="mb-0 mr-2 w-100">Color</label> <input type="color" class="form-control" id="overlay_color'+count+'" style="width:15%" name="overlay_color[]" value="#ff0000"> </div> <div class="form-group"> <label class="mb-1">URL</label> <input type="text" class="videocustomize__textfield" id="overlay_text_url'+count+'" name="overlay_text_url[]" placeholder="Enter Url" value="https://videoman.io/"> </div> <div class="form-group"> <label class="mb-1">Start Time</label> <div class="d-flex align-items-center"> <input type="text" class="videocustomize__textfield mr-2" id="overlay_time'+count+'" name="overlay_time[]" onkeypress="return isNumberKey(event)" placeholder="Enter Start Time" value="00:03"> </div> </div> <div class="form-group"> <label class="mb-1">Animation</label> <select class="videocustomize__textfield" id="text_animation'+count+'" name="text_animation[]" onchange="chnge_animation('+count+')"><option value="">Select animation</option> <option value="fade">Fade in and fade out</option> <option value="bounce">Bounce</option> <option value="shake">Shake</option> </select> </div> </div>';
    $(html).insertAfter($(".otext_divs").last());
    
    row++;
    count++;
    
    color_preview();
}
function rmv_row(id)
{
    //var video_customization_text_id = $('#video_customization_text_id').val();
    
    $('#div'+id).remove();
    /*if(video_customization_text_id!='')
    {
        save_customize();
    }*/
    
    --row;   
}

function chnge_font(row_id)
{
    var font_name = $('#font_name'+row_id+' option:selected').text();
    
    $('#textbutton1').css({"font-family": font_name});
}

function chnge_t_pstn(row_id)
{
    var text_position = $('#text_position'+row_id).val();
    $('#textbutton1').removeClass('text-position-1 text-position-2 text-position-3 text-position-4 text-position-5 text-position-6 text-position-7 text-position-8 text-position-9');
    $('#textbutton1').addClass('text-position-'+text_position);
}

function chnge_animation(row_id)
{
    var text_animation = $('#text_animation'+row_id).val();
    if(text_animation!='')
    {
        //text_animation1 = text_animation;
        if(text_animation=='fade')
        text_animation1 = ' animate__fadeIn';
        else if(text_animation=='bounce')
        text_animation1 = ' animate__bounce';
        else if(text_animation=='shake')
        text_animation1 = ' animate__shakeX';
        else
        text_animation1 = '';
    }
    else
    {
        text_animation1 = " animate__fadeIn";
    }
    //$(".cta_text").effect( text_animation1, {times:3}, 300 );
    
    $(".cta_text a").removeClass('animate__animated animate__fadeIn animate__bounce animate__shakeX');
    $(".cta_text a").addClass('animate__animated');
    $(".cta_text a").addClass(text_animation1);
}
function chnge_text(row_id)
{
    var overlay_text = $('#overlay_text'+row_id).val();
    $('#textbutton1').text(overlay_text);
}
function imgOverStyle(type)
{
    /*if(type==1)
    {
        var overlay2_width = $('#overlay2_width').val();
        $('.cta_text img').css({"width":overlay2_width+"px"});
    }
    
    if(type==2)
    {
        var overlay2_height = $('#overlay2_height').val();
        $('.cta_text img').css({"height":overlay2_height+"px"});
    }
    */
    if(type==3)
    {
        var image_opacity = $('#image_opacity').val();
        $('.overlay img').css({"opacity":image_opacity});
        $('#opacity_val').text(image_opacity);
    }
}
function email_templates(x)
{
    if(x==1)
    {
        $('#email_temp_id').val(1);
        $('#email_subs_btn_color').val('#3F91FD');
        $("#email_subs_btn_color").trigger("change");
        email_template1();
        
    }
    
    if(x==2)
    {
        $('#email_temp_id').val(2);
        $('#email_subs_btn_color').val('#3F91FD');
        $("#email_subs_btn_color").trigger("change");
        email_template2();
        
    }
    
    if(x==3)
    {
        $('#email_temp_id').val(3);
        $('#email_subs_btn_color').val('#3F91FD');
        $("#email_subs_btn_color").trigger("change");
        email_template3();
        
    }
    $('#template_design_box').removeClass('downloadbox--active');
}

function email_template1()
{
    var email_heading = $('#emailheadline').val();
    var emailsubheadline=$('#emailsubheadline').val();
    var email_button_text = $('#emailbtntext').val();
    var email_button_color = $('#email_subs_btn_color').val();
    
    $('.count_modal').val(0);
    var cta_email_subs=$('#cta_email_subs').val();
    var cta_text=$('#cta_text').val();
    /*var emailheadline=$('#emailheadline').val();
    var emailsubheadline=$('#emailsubheadline').val();
    var emailbtntext=$('#emailbtntext').val();
    var email_subs_btn_color=$('#email_subs_btn_color').val();*/
    if($('#emailrequestnames').is(':checked')==true)
    {var style='block';}
    else
    {var style='none';}
    
    $('.wl-modal').remove();
    //var html1 = '<div id="cta_modal_div" class="wl-modal video-js"><div id="temp1"> <div class="right_section w-100 "> <div class="login-show w-100 show-log-panel"><div class="login-content"><div class="login-top "> <h2 class="py-2 text-white text-center text-capitalize email_heading">'+email_heading+'</h2> </div> <form role="form" id="form" class="form-horizontal"> <div class="row"> <div class="input-group mt-2 mb-4 col-6"> <input type="text" class="form-control optin_username" id="optin_username" placeholder="Enter First name" aria-label="Username" aria-describedby="basic-addon1"> </div> <div class="input-group mt-2 mb-4 col-6"> <input type="email" id="optin_email" class="form-control " placeholder="Enter your email address" aria-label="email" aria-describedby="basic-addon2"> </div> <div class="text-center col-12 mt-md-4 mt-lg-4 mt-2"> <button type="button" value="Get it now" class="btn optin_btn" id="optin_button" style="background-color:'+email_button_color+'">'+email_button_text+'</button> </div> </div> </form> </div> </div> </div> </div><a href="javascript:void(0)"> <div id="skip-video" class="wl-skip" onclick="skip_video()"><u>Skip</u></div></a></div>';
    //var html2 = '<div id="cta_modal_div" class="wl-modal video-js"> <div id="temp1"> <div class="right_section w-100 "> <div class="login-show w-100 show-log-panel"> <div class="login-content"> <div class="login-top "> <h2 class="py-2 text-white text-center text-capitalize regheadline">'+email_heading+'</h2> <h3 class="py-2 text-white text-center text-capitalize regsubheadline">'+emailsubheadline+'</h3> </div> <form role="form" id="form" class="form-horizontal"> <div class="row"> <div class="form-inputs" style="display: '+style+';" id="email_subs_name_div"></div>  <div class="input-group mt-2 mb-4 col-6"> <input type="text" class="form-control optin_username" id="subscriber_first_name" placeholder="Enter First name" aria-label="Username" aria-describedby="basic-addon1"> <span id="first_name_error"></span> </div> <div class="input-group mt-2 mb-4 col-6"> <input type="email" id="subscriber_email" class="form-control " placeholder="Enter your email address" aria-label="email" aria-describedby="basic-addon2"> <span id="email_error"></span> </div> <div class="text-center col-12 mt-md-4 mt-lg-4 mt-2"> <button type="button" value="Get it now" id="optin_button" onclick="reg_subscriber()" class="btn blueone regbtn"  style="background-color:'+email_button_color+'">'+email_button_text+'</button> </div> <span id="email_subs_error" class="text-danger"></span> </div> </form> </div> </div> </div> </div> <a href="javascript:void(0)"> <div id="skip-video" class="wl-skip" onclick="skip_video()"><u>Skip</u></div></a> </div>';
    var html1 = '<div id="cta_modal_div" class="wl-modal video-js"><div id="temp1"> <div class="right_section w-100 "> <div class="login-show w-100 show-log-panel"><div class="login-content"><div class="login-top "> <h2 class="py-2 text-white text-center text-capitalize email_heading">'+email_heading+'</h2> </div> <form role="form" id="form" class="form-horizontal"> <div class="row"> <div class="input-group mt-2 mb-4 col-6"> <input type="text" class="form-control optin_username" id="optin_username" placeholder="Enter First name" aria-label="Username" aria-describedby="basic-addon1"> </div> <div class="input-group mt-2 mb-4 col-6"> <input type="email" id="optin_email" class="form-control " placeholder="Enter your email address" aria-label="email" aria-describedby="basic-addon2"> </div> <div class="text-center col-12 mt-md-4 mt-lg-4 mt-2"> <button type="button" value="Get it now" class="btn optin_btn" id="optin_button" style="background-color:'+email_button_color+'">'+email_button_text+'</button> </div> </div> </form> </div> </div> </div> </div><a href="javascript:void(0)"> <div id="skip-video" class="wl-skip" onclick="skip_video()"><u>Skip</u></div></a></div>';
    var html2 = '<div id="cta_email_subs" class="wl-modal video-js d-flex align-items-center justify-content-center emaildesigntemp"> <div id="temp1"><div class="right_section w-100 "> <div class="login-show w-100 show-log-panel"> <div class="login-content"> <div class="login-top d-flex align-items-center"> <img src="/images/thumbnail/email_form1.png" width="60" class="position-absolute"> <div class="mx-auto"> <h2 class="py-0 text-white text-center text-capitalize regheadline mb-3">'+email_heading+'</h2> <p class="py-0 text-white text-center text-capitalize regsubheadline mb-0">'+emailsubheadline+'</p> </div> </div> <form role="form" id="form" class="form-horizontal p-5"> <div class="row"> <div class="form-inputs" style="display: '+style+';" id="email_subs_name_div"></div> <div class="mt-2 mb-4 col-6"> <input type="text" class="form-control optin_username" id="subscriber_first_name" placeholder="Enter First name" aria-label="Username" aria-describedby="basic-addon1"> <span id="first_name_error"></span> </div> <div class="mt-2 mb-4 col-6"> <input type="email" id="subscriber_email" class="form-control " placeholder="Enter your email address" aria-label="email" aria-describedby="basic-addon2"> <span id="email_error"></span> </div> <div class="text-center col-12 mt-md-4 mt-lg-4 mt-2"> <button type="button" value="Get it now" id="optin_button" onclick="reg_subscriber()" class="btn blueone regbtn ordinarybutton w-auto" style="background-color:'+email_button_color+'"><span id="emsub_text">'+email_button_text+'</span><span id="emsub_load" style="display:none;"><div class="hl-loading-spinner hl-loading-spinner--medium hl-loading-spinner--dark hl-loading-spinner--no-text"><div class="hl-loading-spinner__icon-outer"><div class="hl-loading-spinner__icon"></div></div></div></span></button> </div> <span id="email_subs_error" class="text-danger"></span> </div> </form> </div> </div> </div> </div> <a href="javascript:void(0)"> <div id="skip-video" class="wl-skip skip_email_video" onclick="skip_video()" style="display: '+style+';"><u>Skip</u></div> </a> </div>';
    if(cta_email_subs==0)
    {console.log(2);$('#my-video').append(html2);$('#cta_email_subs').val(1);}
    
    
}

function email_template3()
{
    var email_heading = $('#emailheadline').val();
    var emailsubheadline=$('#emailsubheadline').val();
    var email_button_text = $('#emailbtntext').val();
    var email_button_color = $('#email_subs_btn_color').val();
    
    $('.count_modal').val(0);
    var cta_email_subs=$('#cta_email_subs').val();
    var cta_text=$('#cta_text').val();
    /*var emailheadline=$('#emailheadline').val();
    var emailsubheadline=$('#emailsubheadline').val();
    var emailbtntext=$('#emailbtntext').val();
    var email_subs_btn_color=$('#email_subs_btn_color').val();*/
    if($('#emailrequestnames').is(':checked')==true)
    {var style='block';}
    else
    {var style='none';}
    
    $('.wl-modal').remove();
    //var html1 = '<div id="cta_modal_div" class="wl-modal video-js"><div id="temp2"> <div class="right_section w-100 "> <div class="login-show w-100 show-log-panel shadow"> <div class="login-content"> <div class="row"> <div class="col-lg-6 col-md-6"> <div class="left-section text-center"> <i class="fa fa-envelope fa-5x" style="color:#3F91FD"></i> <h2 class="py-4 text-center email_heading">'+email_heading+'</h2> </div> </div> <div class="col-lg-6 col-md-6"> <form role="form" id="form" class="form-horizontal"> <div class="row"> <div class="input-group mb-md-4 mb-lg-4 mb-2 col-12"> <input type="text" class="form-control optin_username" id="optin_username" placeholder="Enter your name" aria-label="Username" aria-describedby="basic-addon1"> </div> <div class="input-group col-12"> <input type="email" id="optin_email" class="form-control mb-4" placeholder="Enter your email" aria-label="email" aria-describedby="basic-addon2"> </div> <div class="text-center col-12 mt-md-4 mt-lg-4 mt-2 "> <button type="button" value="Play Video" class="btn optin_btn btn-block shadow-sm" id="optin_button" style="background-color:'+email_button_color+'">'+email_button_text+'</button> </div> </div> </form> </div> </div> </div> </div> </div> </div><a href="javascript:void(0)"> <div id="skip-video" class="wl-skip" onclick="skip_video()"><u>Skip</u></div></a></div>';
    //var html2 = '<div id="cta_email_subs" class="wl-modal video-js"> <div id="temp2"> <div class="right_section w-100 "> <div class="login-show w-100 show-log-panel shadow"> <div class="login-content"> <div class="row"> <div class="col-lg-6 col-md-6"> <div class="left-section text-center"> <i class="fa fa-envelope fa-5x" style="color:#ffb324"></i> <h2 class="py-4 text-center text-white text-capitalize regheadline">'+email_heading+'</h2> <h3 class="py-4 text-center text-white text-capitalize regsubheadline">'+emailsubheadline+'</h3> </div> </div> <div class="col-lg-6 col-md-6"> <form role="form" id="form" class="form-horizontal new"> <div class="row"> <div class="form-inputs" style="display: '+style+';" id="email_subs_name_div"> </div><div class="input-group mb-md-4 mb-lg-4 mb-2 col-12"> <input type="text" class="form-control optin_username" id="subscriber_first_name" placeholder="Enter your name" aria-label="Username" aria-describedby="basic-addon1"> <span id="first_name_error"></span> </div>  <div class="input-group col-12"> <input type="email" id="subscriber_email" name="subscriber_email" class="form-control mb-4" placeholder="Enter your email" aria-label="email" aria-describedby="basic-addon2"> <span id="email_error"></span> </div> <div class="text-center col-12 mt-md-4 mt-lg-4 mt-2 "> <button type="button" value="Play Video" class="btn orange regbtn" id="optin_button" onclick="reg_subscriber()" style="background-color:'+email_button_color+'">'+email_button_text+'</button> </div> <span id="email_subs_error" class="text-danger"></span> </div> </form> </div> </div> </div> </div> </div> </div> <a href="javascript:void(0)"> <div id="skip-video" class="wl-skip" onclick="skip_video()"><u>Skip</u></div></a> </div>';
    var html1 = '<div id="cta_modal_div" class="wl-modal video-js"><div id="temp2"> <div class="right_section w-100 "> <div class="login-show w-100 show-log-panel shadow"> <div class="login-content"> <div class="row"> <div class="col-lg-6 col-md-6"> <div class="left-section text-center"> <i class="fa fa-envelope fa-5x" style="color:#3F91FD"></i> <h2 class="py-4 text-center email_heading">'+email_heading+'</h2> </div> </div> <div class="col-lg-6 col-md-6"> <form role="form" id="form" class="form-horizontal"> <div class="row"> <div class="input-group mb-md-4 mb-lg-4 mb-2 col-12"> <input type="text" class="form-control optin_username" id="optin_username" placeholder="Enter your name" aria-label="Username" aria-describedby="basic-addon1"> </div> <div class="input-group col-12"> <input type="email" id="optin_email" class="form-control mb-4" placeholder="Enter your email" aria-label="email" aria-describedby="basic-addon2"> </div> <div class="text-center col-12 mt-md-4 mt-lg-4 mt-2 "> <button type="button" value="Play Video" class="btn optin_btn btn-block shadow-sm" id="optin_button" style="background-color:'+email_button_color+'">'+email_button_text+'</button> </div> </div> </form> </div> </div> </div> </div> </div> </div><a href="javascript:void(0)"> <div id="skip-video" class="wl-skip" onclick="skip_video()"><u>Skip</u></div></a></div>';
    var html2 = '<div id="cta_email_subs" class="wl-modal video-js d-flex align-items-center justify-content-center emaildesigntemp"><div id="temp2"><div class="right_section w-100 "><div class="login-show w-100 show-log-panel shadow"><div class="login-content"><div class="row"><div class="col-12 mb-md-3 mb-lg-3 mb-1"><h2 class="pt-0 text-center text-capitalize regheadline pb-0">'+email_heading+'</h2><p class="pt-0 text-center regsubheadline">'+emailsubheadline+'</p></div><div class="col-lg-6 col-md-6 col-3"><div class="left-section text-center"> <img src="/images/thumbnail/email_subscribe_box.gif" width="150" class="img-fluid"></div></div><div class="col-lg-6 col-md-6 col-9"><form role="form" id="form" class="form-horizontal new"><div class="row"><div class="form-inputs" style="display: '+style+';" id="email_subs_name_div"></div><div class="mb-md-4 mb-lg-4 mb-2 col-12"> <input type="text" class="form-control optin_username" id="subscriber_first_name" placeholder="Enter your name" aria-label="Username" aria-describedby="basic-addon1"> <span id="first_name_error"></span></div><div class="col-12"> <input type="email" id="subscriber_email" name="subscriber_email" class="form-control mb-4" placeholder="Enter your email" aria-label="email" aria-describedby="basic-addon2"> <span id="email_error"></span></div><div class="text-center col-12 mt-md-4 mt-lg-4 mt-2 "> <button type="button" value="Play Video" class="btn orange regbtn" id="optin_button" onclick="reg_subscriber()" style="background-color:'+email_button_color+'"><span id="emsub_text">'+email_button_text+'</span><span id="emsub_load" style="display:none;"><div class="hl-loading-spinner hl-loading-spinner--medium hl-loading-spinner--dark hl-loading-spinner--no-text"><div class="hl-loading-spinner__icon-outer"><div class="hl-loading-spinner__icon"></div></div></div></span></button></div> <span id="email_subs_error" class="text-danger"></span></div></form></div></div></div></div></div></div> <a href="javascript:void(0)"><div id="skip-video" class="wl-skip skip_email_video" onclick="skip_video()" style="display: '+style+';"><u>Skip</u></div> </a></div>';
    if(cta_email_subs==0)
    {console.log(2);$('#my-video').append(html2);$('#cta_email_subs').val(1);}
    
}

function email_template2()
{
    var email_heading = $('#emailheadline').val();
    var emailsubheadline=$('#emailsubheadline').val();
    var email_button_text = $('#emailbtntext').val();
    var email_button_color = $('#email_subs_btn_color').val();
    
    $('.count_modal').val(0);
    var cta_email_subs=$('#cta_email_subs').val();
    var cta_text=$('#cta_text').val();
    /*var emailheadline=$('#emailheadline').val();
    var emailsubheadline=$('#emailsubheadline').val();
    var emailbtntext=$('#emailbtntext').val();
    var email_subs_btn_color=$('#email_subs_btn_color').val();*/
    if($('#emailrequestnames').is(':checked')==true)
    {var style='block';}
    else
    {var style='none';}
    
    $('.wl-modal').remove();
    //var html1 = '<div id="cta_modal_div" class="wl-modal video-js"><div id="temp3"> <div class="right_section w-100 "> <div class="login-show w-100 show-log-panel shadow"> <div class="login-content"> <div class="text-center"> <img src="../images/default/mail.png" width="50"> </div> <h2 class="py-2 text-center text-capitalize email_heading">'+email_heading+'</h2> <form role="form" id="form" class="form-horizontal"> <div class="row"> <div class="input-group mb-md-4 mb-lg-4 mb-2 col-4"> <input type="text" class="form-control optin_username" id="optin_username" placeholder="Enter your name" aria-label="Username" aria-describedby="basic-addon1"> </div> <div class="input-group col-8"> <input type="email" id="optin_email" class="form-control" placeholder="Enter your email" aria-label="email" aria-describedby="basic-addon2"> </div> <div class="text-center col-12 mt-md-4 mt-lg-4 mt-2"> <button type="button" value="Play Video" class="btn optin_btn shadow-sm" id="optin_button" style="background-color:'+email_button_color+'">'+email_button_text+'</button></div> </div> </form> </div> </div> </div> </div><a href="javascript:void(0)"> <div id="skip-video" class="wl-skip" onclick="skip_video()"><u>Skip</u></div></a></div>';
    //var html2 = '<div id="cta_email_subs" class="wl-modal video-js"> <div id="temp3"> <div class="right_section w-100"> <div class="login-show w-100 show-log-panel shadow"> <div class="login-content"> <div class="text-center"><img src="../images/default/mail.png" width="50" /></div> <h2 class="py-2 text-center text-capitalize regheadline">'+email_heading+'</h2> <h3 class="py-2 text-center text-capitalize regsubheadline">'+emailsubheadline+'</h3> <form role="form" id="form" class="form-horizontal"> <div class="row"> <div class="form-inputs" style="display: '+style+';" id="email_subs_name_div"></div> <div class="input-group mb-md-4 mb-lg-4 mb-2 col-4"> <input type="text" class="form-control optin_username" id="subscriber_first_name" placeholder="Enter your name" aria-label="Username" aria-describedby="basic-addon1" /> <span id="first_name_error"></span> </div>  <div class="input-group col-8"><input type="email" id="subscriber_email" class="form-control" placeholder="Enter your email" aria-label="email" aria-describedby="basic-addon2" /> <span id="email_error"></span></div> <div class="text-center col-12 mt-md-4 mt-lg-4 mt-2"> <button type="button" value="Play Video" class="btn  redone regbtn" onclick="reg_subscriber()" id="optin_button" style="background-color: '+email_button_color+';">'+email_button_text+'</button> </div> </div> <span id="email_subs_error" class="text-danger"></span> </form> </div> </div> </div> </div> <a href="javascript:void(0)"> <div id="skip-video" class="wl-skip" onclick="skip_video()"><u>Skip</u></div> </a> </div>';
    
    var html1 = '<div id="cta_modal_div" class="wl-modal video-js"><div id="temp3"> <div class="right_section w-100 "> <div class="login-show w-100 show-log-panel shadow"> <div class="login-content"> <div class="text-center"> <img src="../images/default/mail.png" width="50"> </div> <h2 class="py-2 text-center text-capitalize email_heading">'+email_heading+'</h2> <form role="form" id="form" class="form-horizontal"> <div class="row"> <div class="input-group mb-md-4 mb-lg-4 mb-2 col-4"> <input type="text" class="form-control optin_username" id="optin_username" placeholder="Enter your name" aria-label="Username" aria-describedby="basic-addon1"> </div> <div class="input-group col-8"> <input type="email" id="optin_email" class="form-control" placeholder="Enter your email" aria-label="email" aria-describedby="basic-addon2"> </div> <div class="text-center col-12 mt-md-4 mt-lg-4 mt-2"> <button type="button" value="Play Video" class="btn optin_btn shadow-sm" id="optin_button" style="background-color:'+email_button_color+'">'+email_button_text+'</button></div> </div> </form> </div> </div> </div> </div><a href="javascript:void(0)"> <div id="skip-video" class="wl-skip" onclick="skip_video()"><u>Skip</u></div></a></div>';
    var html2 = '<div id="cta_email_subs" class="wl-modal video-js d-flex align-items-center justify-content-center emaildesigntemp"> <div id="temp3"> <div class="right_section w-75 mx-auto"> <div class="login-show w-100 show-log-panel shadow"> <div class="login-content px-5"> <div class="text-center"><img src="/images/thumbnail/email_subs.gif" width="80" class="mb-3"/></div> <h2 class="py-0 text-center regheadline">'+email_heading+'</h2> <p class="py-0 text-center regsubheadline mb-0 mb-md-3 mb-lg-3">'+emailsubheadline+'</p> <form role="form" id="form" class="form-horizontal mt-md-5 mt-lg-5 mt-2"> <div class="form-inputs" style="display: '+style+';" id="email_subs_name_div"></div> <div class="row"> <div class="col-12"> <div class="mb-md-4 mb-lg-4 mb-2"> <input type="text" class="form-control optin_username" id="subscriber_first_name" placeholder="Enter your name" aria-label="Username" aria-describedby="basic-addon1" /> <span id="first_name_error"></span> </div> </div> <div class="col-12"> <div class=""><input type="email" id="subscriber_email" class="form-control" placeholder="Enter your email" aria-label="email" aria-describedby="basic-addon2" /> <span id="email_error"></span></div> </div> <div class="text-center col-12 mt-md-4 mt-lg-4 mt-2"> <button type="button" value="Play Video" class="btn  redone ordinarybutton w-100 mb-md-4 mb-lg-4 mb-2 regbtn" onclick="reg_subscriber()" id="optin_button" style="background-color: '+email_button_color+';"><span id="emsub_text">'+email_button_text+'</span><span id="emsub_load" style="display:none;"><div class="hl-loading-spinner hl-loading-spinner--medium hl-loading-spinner--dark hl-loading-spinner--no-text"><div class="hl-loading-spinner__icon-outer"><div class="hl-loading-spinner__icon"></div></div></div></span></button> </div> </div> <span id="email_subs_error" class="text-danger"></span> </form> </div> </div> </div> </div> <a href="javascript:void(0)"> <div id="skip-video" class="wl-skip skip_email_video" onclick="skip_video()" style="display: '+style+';"><u>Skip</u></div> </a> </div>';
    if(cta_email_subs==0)
    {console.log(2);$('#my-video').append(html2);$('#cta_email_subs').val(1);}
}

function email_subs()
{
    console.log(1);
    $('.count_modal').val(0);
    var cta_email_subs=$('#cta_email_subs').val();
    var cta_text=$('#cta_text').val();
    var emailheadline=$('#emailheadline').val();
    var emailsubheadline=$('#emailsubheadline').val();
    var emailbtntext=$('#emailbtntext').val();
    var email_subs_btn_color=$('#email_subs_btn_color').val();
    if($('#emailrequestnames').is(':checked')==true)
    {var style='block';}
    else
    {var style='none';}
    
    var email_temp_id = $('#email_temp_id').val();
    if(email_temp_id==2)
    {
        email_template2();
    }
    else if(email_temp_id==3)
    {
        email_template3();
    }
    else
    {
        email_template1();    
    }
    
    
    /* old code */
    /*var html='<div id="cta_email_subs" class="wl-modal wl-register video-js"><div class="cta-text-container"><div class="register_text">'+emailheadline+'</div><div class="register_text">'+emailsubheadline+'</div></div><div id="cta_reg_text" class="container-text"><form class="wl-form form-vertical" style=""><div class="form-inputs" style=" display: flex;"><div class="wl-first form-group" style=" margin-bottom: 8px; padding-right: 8px;"><div class=""> <input type="text" placeholder="Name" name="subscriber_first_name" id="subscriber_first_name" class="form-control wl-emailinput"><span id="first_name_error"></span></div></div><div class="wl-last form-group"><div class=""> <input type="text" name="subscriber_last_name" id="subscriber_last_name" placeholder="Last name" class="form-control"><span id="last_name_error"></span></div></div></div><div class="form-inputs wl-email-container"><div class="wl-first form-group" style="margin-bottom: 0px;"><div class=""> <input type="text" name="subscriber_email" id="subscriber_email" placeholder="Email" class="form-control wl-emailinput"><span id="email_error"></span></div></div><div class="wl-button"> <button type="button" id="button2" onclick="reg_subscriber()">'+emailbtntext+'</button></div></div><span id="email_subs_error" class="text-danger"></span></form></div> <a href="javascript:void(0)"><div id="skip-video" class="wl-skip" onclick="skip_e_video()"><u>Skip</u></div> </a></div>';
    var html1='<div id="cta_email_subs" class="wl-modal wl-register video-js"> <div id="cta_reg_text" class="container-text"> <div class="cta-text-container"> <div class="register_text regheadline">'+emailheadline+'</div><div class="register_text regsubheadline">'+emailsubheadline+'</div></div><form class="wl-form form-vertical" style=""> <div class="form-inputs" style="display: '+style+';" id="email_subs_name_div"> <div class="wl-first form-group" style=""> <div class=""><input type="text" placeholder="Name" name="subscriber_first_name" id="subscriber_first_name" class="form-control wl-emailinput"/><span id="first_name_error"></span></div></div></div><div class="form-inputs wl-email-container"> <div class="wl-first form-group" style="margin-bottom: 0px;"> <div class=""><input type="text" name="subscriber_email" id="subscriber_email" placeholder="Email" class="form-control wl-emailinput"/><span id="email_error"></span></div></div><div class="wl-button"><button type="button" id="button2" class="regbtn" onclick="reg_subscriber()" style="background-color:'+email_subs_btn_color+'">'+emailbtntext+'</button></div></div><span id="email_subs_error" class="text-danger"></span> </form> </div><a href="javascript:void(0)"> <div id="skip-video" class="wl-skip" onclick="skip_e_video()"><u>Skip</u></div></a></div>';
    var html2='<div id="cta_email_subs" class="wl-modal wl-register video-js"> <div class="cta-text-container"> <div class="register_text">'+emailheadline+'</div><div class="register_text">'+emailsubheadline+'</div></div><div id="cta_reg_text" class="container-text"> <form class="wl-form form-vertical" style=""> <div class="form-inputs wl-email-container"> <div class="wl-first form-group" style="margin-bottom: 0px;"> <div class=""><input type="text" name="subscriber_email" id="subscriber_email" placeholder="Email" class="form-control wl-emailinput"/><span id="email_error"></span></div></div><div class="wl-button"><button type="button" id="button2" onclick="reg_subscriber()" style="background-color:'+email_subs_btn_color+'">'+emailbtntext+'</button></div></div><span id="email_subs_error" class="text-danger"></span> </form> </div><a href="javascript:void(0)"> <div id="skip-video" class="wl-skip" onclick="skip_e_video()"><u>Skip</u></div></a></div>';
    if(cta_email_subs==0)
    {console.log(2);$('#my-video').append(html1);$('#cta_email_subs').val(1);}
    console.log(3);*/
    /* old code */
        
}
function skip_opt_video()
{
    if($('input[name="emailrequestnames"]').is(':checked')==true)
    {
        $('.skip_email_video').show();
    }
    else
    {
        $('.skip_email_video').hide();
    }
}
function modal_closepopup()
{
    $('.downloadbox').removeClass('downloadbox--active');
}
function choose_design_template()
{
    $('#template_design_box').addClass('downloadbox--active');
}
function upload_pixa_videos(vsrc, row){
        var cnt = 0;
        
        if(vsrc!=='')
        {
            $.ajax({
                type:'POST',
                url:'backend_files/upload_p_videos.php',
                data:{vsrc, row},
                beforeSend:function(){
                    $('#e_'+row).css("display", "initial");
                    $('#et_'+row).hide();
                },          
                success:function(data){
                    $('#e_'+row).hide();
                    $('#et_'+row).show();
                    var followup = $.trim(data);
                    window.location.href = site_url+'editor/public/?action=my_videos&video='+followup;
                }
            });
        }
    
        
    }
function select_custom_options()
{
    /*if($('input[name="choose_custom"]').is(':checked')==true)
    {
        
    }*/
    var choose_custom = $("input[name='choose_custom']:checked").val();
    if(choose_custom==1)
    {
        select_custom_projects();
    }
    if(choose_custom==2)
    {
        select_custom_videos();
    }
}
function select_custom_videos()
{
    $('#videocollection').addClass('newcollection--active');
    chkbox_collc();
}
function select_custom_projects()
{
    $('#projectcollection').addClass('newcollection--active');
    chkbox_collcection();
}
//default_all_videos
function default_privacy_data()
{
    var choose_custom = $("input[name='choose_custom']:checked").val();
    if(choose_custom==1)
    {
        var projects=[];
        $.each($("input[name='chkbox_collcection']:checked"),function()
        {
            projects.push($(this).val());
            
        });
    }
    else if(choose_custom==2)
    {
        var favorite=[];
        $.each($("input[name='chkbox_collc']:checked"),function()
        {
            favorite.push($(this).val());
            
        });
    }
    else
    {
        var projects=[];
        var favorite=[];
    }
    
    
    
    var form_data = new FormData(document.forms['hform']); 
    form_data.append('opt', 'privacy_data');
    form_data.append('video_ids', favorite);
    form_data.append('projects_ids', projects);
    form_data.append('choose_custom', choose_custom);
    
    $.ajax({
        type:'POST',
        url:'backend_files/default_settings_backend.php',
        data:form_data,
        contentType: false,
        cache: false,
        processData:false,
        beforeSend:function(){
            $('#load_btn').show();
            $('#nxtbtn').hide();
        },          
        success:function(data){
        
            $('#load_btn').hide();
            $('#nxtbtn').show();
            
            //$('#nxtbtn').show();
            //console.log(data);
            if(data==0)
            {
                $('#success_msg').fadeIn().addClass('text-success').html('Settings Updated Successfully.').delay(2000).fadeOut();
                //player_manage();
            }
            else
            {
                $('#success_msg').fadeIn().addClass('text-danger').html('Settings cannot be updated.').delay(2000).fadeOut();
            }
            //setTimeout( function() { $('.result').html('<div class="result"></div>'); }, 3000);
        }
    });
}
function default_appearance_data()
{
    var player_skins = $('#player_skins').val();
    var playbutton = $('#playbutton').val();
    var play_btn_color = $('#play_btn_color').val();
        
    var showlogo = '';
    if($('input[name="showlogo"]').is(':checked')==true)
    {
        showlogo = 1;
    }
    else
    {
        showlogo = 0;
    }
    
    var showplaybutton = 0;
    if($('input[name="showplaybutton"]').is(':checked')==true)
    {
        showplaybutton = 1;
    }
    else
    {
        showplaybutton = 0;
    }
    
    var choose_custom = $("input[name='choose_custom']:checked").val();
    if(choose_custom==1)
    {
        var projects=[];
        $.each($("input[name='chkbox_collcection']:checked"),function()
        {
            projects.push($(this).val());
            
        });
    }
    else if(choose_custom==2)
    {
        var favorite=[];
        $.each($("input[name='chkbox_collc']:checked"),function()
        {
            favorite.push($(this).val());
            
        });
    }
    else
    {
        var projects=[];
        var favorite=[];
    }
    
    var play_btn_animation = $('#play_btn_animation').val();
    animation_infinite_check = 0;
    if($('input[name="animation_infinite_check"]').is(':checked')==true)
    {
        animation_infinite_check = 1;
    }
    else
    {
        animation_infinite_check = 0;
    }
    
    var form_data = new FormData(document.forms['appearance_form']);
    form_data.append('opt', 'appearance_data');
    form_data.append('showlogo', showlogo);
    form_data.append('playbutton', playbutton);
    form_data.append('play_btn_color', play_btn_color);
    form_data.append('showplaybutton', showplaybutton);
    form_data.append('play_btn_animation', play_btn_animation);
    form_data.append('animation_infinite_check', animation_infinite_check);
    form_data.append('video_ids', favorite);
    form_data.append('projects_ids', projects);
    form_data.append('choose_custom', choose_custom);
    
    $.ajax({
        type:'POST',
        url:'backend_files/default_settings_backend.php',
        data:form_data,
        contentType: false,
        cache: false,
        processData:false,
        beforeSend:function(){
            $('#load2_btn').show();
            $('#nxtbtn2').hide();
        },          
        success:function(data){
        
            $('#load2_btn').hide();
            $('#nxtbtn2').show();
            
            //$('#nxtbtn').show();
            //console.log(data);
            if(data==0)
            {
                $('#success_msg').fadeIn().addClass('text-success').html('Settings Updated Successfully.').delay(2000).fadeOut();
                //player_manage();
            }
            else
            {
                $('#success_msg').fadeIn().addClass('text-danger').html('Settings cannot be updated.').delay(2000).fadeOut();
            }
            //setTimeout( function() { $('.result').html('<div class="result"></div>'); }, 3000);
        }
    });
}

function default_playercontrol_data()
{
    var choose_custom = $("input[name='choose_custom']:checked").val();
    if(choose_custom==1)
    {
        var projects=[];
        $.each($("input[name='chkbox_collcection']:checked"),function()
        {
            projects.push($(this).val());
            
        });
    }
    else if(choose_custom==2)
    {
        var favorite=[];
        $.each($("input[name='chkbox_collc']:checked"),function()
        {
            favorite.push($(this).val());
            
        });
    }
    else
    {
        var projects=[];
        var favorite=[];
    }
    
    var form_data = new FormData(document.forms['control_form']);
    form_data.append('opt', 'playercontrol_data');
    form_data.append('video_ids', favorite);
    form_data.append('projects_ids', projects);
    form_data.append('choose_custom', choose_custom);
    
    $.ajax({
        type:'POST',
        url:'backend_files/default_settings_backend.php',
        data:form_data,
        contentType: false,
        cache: false,
        processData:false,
        beforeSend:function(){
            $('#cont_btn').hide();
            $('#cont_spin').show();
        },          
        success:function(data){
        
            $('#cont_btn').show();
            $('#cont_spin').hide();
            
            //$('#nxtbtn').show();
            //console.log(data);
            if(data==0)
            {
                $('#success_msg').fadeIn().addClass('text-success').html('Settings Updated Successfully.').delay(2000).fadeOut();
                //player_manage();
            }
            else
            {
                $('#success_msg').fadeIn().addClass('text-danger').html('Settings cannot be updated.').delay(2000).fadeOut();
            }
            //setTimeout( function() { $('.result').html('<div class="result"></div>'); }, 3000);
        }
    });
}
function playbutton_val2(x)
{
    $('.playbutton_grid').removeClass('playbutton_active vjsbigplaybutton');
    $('#playbutton_grid'+x).addClass('playbutton_active vjsbigplaybutton');
    $('#playbutton').val(x);    
}
function playbutton_val(x)
{
    $('.playbutton_grid').removeClass('playbutton_active');
    $('#playbutton_grid'+x).addClass('playbutton_active');
    $('#playbutton').val(x);    
}
function search_my_keyword(x)
{
    $('#search_my_keyword_loader').show();
    var my_keyword=$('#search_sites').val();
    
    search_unsplash_imgs(my_keyword, 1);
    get_pix_imgs(my_keyword, 1)
}
function search_unsplash_imgs(search_word, cnt)
{
    $.ajax({
        type:'POST',
        url:'../backend_files/search_my_keyword.php',
        data:{my_keyword:search_word},
        success:function(data)
        {
            $('#search_my_keyword_loader').hide();
            $('.card-columns1').html(data);
            
        }
        
    });
}
function get_pix_imgs(search_word, cnt)
{
    var start = $('#start').val();
    var end = $('#end').val();
    
    $.ajax({
        url: "../third_party/pixabay/photos.php",
        type: "POST",
        data: {search_word, start, end, cnt},
        success: function(data){
            $('.card-columns1').append(data);
            
        }
    });
}

function btn_animation(x)
{
    $(".vjs-big-play-button").removeClass (function (index, className) {
        return (className.match (/\banimate__\S+/g) || []).join(' ');
    });
    
    var applyClass = 'animate__animated animate__'+x;
    
    $(".vjs-big-play-button").addClass(applyClass);
    
}
function btn_animation2(x)
{
    $(".vjsbigplaybutton").removeClass (function (index, className) {
        return (className.match (/\banimate__\S+/g) || []).join(' ');
    });
    
    var applyClass = 'animate__animated animate__'+x;
    
    $(".vjsbigplaybutton").addClass(applyClass);
    
}
function get_v_count()
{
    var video_limit = $('#video_limit').val();
    
    $.ajax({
        url: "backend_files/get_count.php",
        type: "POST",
        data: {opt:'vcount'},
        success: function(data){
            var followup = $.trim(data);
            
            if(followup<=12)
            $('.to_total').text(followup);
            else
            $('.to_total').text(video_limit);
            
            $('.totalscount').text(followup);
            $('.of_total').text(followup);
            $('.total_count').text(followup);
            
        }
    });
}
function mp_play(id)
{
    $('#portfolio_aud'+id).get(0).play();
    $('#mppause_'+id).show();
    $('#mpplay_'+id).hide();
}
function mp_pause(id)
{
    $('#portfolio_aud'+id).get(0).pause();
    $('#mppause_'+id).hide();
    $('#mpplay_'+id).show();
}
function dwnldboxconfirm__closepopup()
{
    $('.downloadbox').removeClass('downloadbox--active');
}

function swap_data()
{
    var source_video = $.trim($('#source_video').val());
    var swap_video = $.trim($('#swap_video').val());
    
    $.ajax({
        url: "backend_files/swap_videos.php",
        type: "POST",
        data: {source_video, swap_video},
        success: function(data){
            if(data==0)
            {
                $('#source_video_modal .close').click();
                $('#info_msg').fadeIn().delay(3000).fadeOut();
                $('#info_msg .msg_text').text('Videos swapped successfully.');
            }
            else if(data==1)
            {
                $('#fail_msg').fadeIn().delay(3000).fadeOut();
                $('#fail_msg .error_msg_text').text('Swap video not found.');
            }
            else if(data==2)
            {
                $('#fail_msg').fadeIn().delay(3000).fadeOut();
                $('#fail_msg .error_msg_text').text('Source video not found.');
            }
            else if(data==3)
            {
                $('#fail_msg').fadeIn().delay(3000).fadeOut();
                $('#fail_msg .error_msg_text').text('Source and Swap videos not found.');
            }
            else if(data==4)
            {
                $('#fail_msg').fadeIn().delay(3000).fadeOut();
                $('#fail_msg .error_msg_text').text('Some error found. Please try again after some time.');
            }
            else
            {
                $('#fail_msg').fadeIn().delay(3000).fadeOut();
                $('#fail_msg .error_msg_text').text('Some error found. Please try again after some time.');   
            }
        }
    });
}
function mail_to_client(id)
{
    $.ajax({
        url: "backend_files/mail_send_client.php",
        type: "POST",
        data: {id},
        beforeSend:function(){
          $('#sm_text').hide(); 
          $('#sm_load').show();
        },
        success: function(data){
            $('#sm_text').show(); 
            $('#sm_load').hide();
            
            $('#info_msg').fadeIn().delay(3000).fadeOut();
            $('.msg_text').text('Mail sent successfully.');
        }
    });
}
function load_related_data(x)
{
    var page = $('#page').val();
    
    $.ajax({
        url: "other_sites/related_videos_backend.php",
        type: "POST",
        data: {x, page},
        beforeSend:function(){
          if(page>1)
          {
              $('#rtext').hide();
              $('#r_load').show();
          }
          else
          {
              div_loader('related_section');
          }
        },
        success: function(data){
            if(page>1)
            {
                $('#rtext').show();
                $('#r_load').hide();
            }
            else
            {
                div_loader_remove('related_section');
            }
            
            if(data=='')
            {
                $('#related_load_btn').hide();
            }
            else
            {
                $('#related_section').append(data);
                $('#page').val(parseInt(page)+1);
                $('#related_load_btn').show();
            }
            
        }
    });
}
function upload_screen_vids(x, y, z, a)
{
    var user = $('#user').val();
    var data = x;
    var serverUrl = '../dropzone/upload_screen_videos.php';
    var duration = z;
    
    var d = new Date();
    var n = d.getTime();
    var dataName = n+'.gif';
    
    var file = new File([x], "filename");
    console.log(file);
    
    var formData = new FormData();
    formData.append('file', file);
    formData.append('fileName', dataName);
    formData.append('user', user);
    formData.append('duration', duration);
    console.log('uploading recording:', formData);
    
    
    var bytes = y;
    //echo number_format(bytes / 1048576, 2) + ' MB';
    var convert_mb = bytes/1048576;
    
    var convertFixed = convert_mb.toFixed(2) + ' MB';
    
    console.log(data+' '+y+' '+z+' '+a);
    console.log(JSON.stringify(a));
    //return false;
    $.ajax({
        xhr: function () {
            var xhr = new window.XMLHttpRequest();
            xhr.upload.addEventListener(
                "progress",
                function (evt) {
                    if (evt.lengthComputable) {
                        var percentComplete = evt.loaded / evt.total;
                        percentComplete = parseInt(percentComplete * 100);
                        console.log(percentComplete);
                        $('.data-dz-name').text(data.name);
                        $('.text-solid-grey').text(convertFixed);
                        $('.wl-customprogressdiv').attr('style', 'width:'+percentComplete+'%');
                        $('.progress-b-text').text('Uploading... '+percentComplete+'%');
                        $('.dz-upload').attr('style', 'width:'+percentComplete+'%');
                        if (percentComplete === 100) {
                            $('.loadingImg_upload').show();
                        }
                    }
                },
                false
            );
            return xhr;
        },
        url: serverUrl,
        method: 'POST',
        data: formData,
        cache: false,
        processData: false,
        contentType: false,
        beforeSend:function(){
          //$('.onyx-dropzone-info').show();  
        }, 
        success: function (result) {
            //console.log(result);
            var video_id = $.trim(result);
            //get_uploaded_vide(video_id);
        },
    });

}
function change_vsource(x)
{
    var placeholder = '';
    if(x=='gdrive')
    placeholder = 'Eg: https://drive.google.com/file/d/1w9wkns2323dqidqc9y/view?usp=sharing';
    else if(x=='dropbox')
    placeholder = 'Eg: https://www.dropbox.com/home/example?preview=examplefile.jpg';
    else if(x=='youtube')
    placeholder = 'Eg: https://www.youtube.com/watch?v=0_QLG23CTio';
    else if(x=='odrive')
    placeholder = 'Eg: https://drive.google.com/file/d/1w9wkns2323dqidqc9y/view?usp=sharing';
    else if(x=='pcloud')
    placeholder = 'Eg: https://drive.google.com/file/d/1w9wkns2323dqidqc9y/view?usp=sharing';
    else if(x=='box')
    placeholder = 'Eg: https://cloud.box.com/s/qpc/1w9wkns2323dqidqc9y';
    else if(x=='vimeo')
    placeholder = 'Eg: https://vimeo.com/243246532';
    else if(x=='facebook')
    placeholder = 'Eg: https://facebook.com/DFGH46532';
    else if(x=='aws')
    placeholder = 'Eg: https://s3.us-west-1.wasabisys.com/mybucket/video.mp4';
    else
    placeholder = 'Eg: https://drive.google.com/file/d/1w9wkns2323dqidqc9y/view?usp=sharing';
    
    $('#vsrc').attr("placeholder", placeholder);
}

function copyShareEmbed(id)
{
	var sharedata = $('#shr_'+id);
	var a = sharedata.data('shareurl');
	//console.log('mk'+a);
        var textArea = document.createElement("textarea");
        textArea.value = a;
        document.body.appendChild(textArea);
        textArea.select();
        try {
            var successful = document.execCommand('copy');
            var msg = successful ? 'successful' : 'unsuccessful';
        } catch (err) {
            console.log('Oops, unable to copy');
        }
        document.body.removeChild(textArea);
        /*$('#'+id+'_sh').hide();
        $('#'+id+'_done').show();*/
        
        //alert('Copied');
        $('#info_msg').fadeIn().delay(3000).fadeOut();
        $('.msg_text').text('Link copied to clipboard.');
        
        setTimeout(function(){
            /*$('#'+id+'_sh').show();
            $('#'+id+'_done').hide();*/
        }, 3000);
}
function infotextsub(x)
{
    $('.vjs-text .vjs-ttl').text(x);
}
function infourlsub(x)
{
    $('.vjs-info a').prop('href', x);
}
function cover_valid()
{
    var thumb_url='';
    var allowedFiles=[".gif",".png",".jpg",".jpeg"];
    var fileUpload=document.getElementById('edit_cover');
    //var lblError=document.getElementById('edit_cover_error');
    var regex=new RegExp("([a-zA-Z0-9\s_\\.\-:()])+("+allowedFiles.join('|')+")$");
    if(!regex.test(fileUpload.value.toLowerCase())){
        //lblError.innerHTML="Please upload files having extensions: <b>"+allowedFiles.join(', ')+"</b> only.";
        var errorinnerHTML="Please upload files having extensions: "+allowedFiles.join(', ')+" only.";
        $('#fail_msg').fadeIn().delay(3000).fadeOut();
        $('.error_msg_text').text(errorinnerHTML);
        $('#edit_cover').val('');
        return false;
    }
    if($('#edit_cover')[0].files[0].size>2207735){
        //lblError.innerHTML='File is too big!';
        $('#fail_msg').fadeIn().delay(3000).fadeOut();
        $('.error_msg_text').text('File is too big!');
        
        $('#edit_cover').val('');
        return false;
        
    };
    var thumbnailimage=$('#edit_cover')[0].files[0];
    var form_data=new FormData();
    form_data.append('thumbnailimage',thumbnailimage);
    $.ajax({
        url:"../backend_files/cover_pic_upload.php",
        type:"POST",
        data:form_data,
        contentType:false,
        cache:false,
        processData:false,
        beforeSend:function(){
            $('#cov_load').fadeIn();
            
        },success:function(data)
        {
            var followup=JSON.parse(data);
            var image=followup.image;
            var filename=followup.file;
            /*$('.overlay').html('<img src="'+image+'" style="width:350px; height:300px;">');
            thumb_url='<img src='+image+' style="width: 90px; height: 60px;">';
            $('.adimage_icon').addClass('bg-none').html(thumb_url);
            $('#overlay_ad_image_val').val(filename);*/
            $('#cover_pic').css('background-image', 'url(' + image + ')');
            $('#cov_load').fadeOut();
            
            $('#info_msg').fadeIn().delay(3000).fadeOut();
            $('.msg_text').text('Cover image updated successfully.');
        }
        
    });
        
}
function add_ana_details()
{
    var g_code = $('#g_code').val();
    var f_code = $('#f_code').val();
    
    $.ajax({
        url: "backend_files/save_user_ana_code.php",
        type: "POST",
        data: {g_code, f_code},
        success: function(data){
            
            
        }
    });
}
function showrelated_vids()
{
    if($('#showrelated').is(':checked')==true)
    var showrelated = 1;
    else
    var showrelated = 0;
    
    $.ajax({
        url: "backend_files/related_videos_opt.php",
        type: "POST",
        data: {showrelated},
        success: function(data){
            
            if(data==1)
            {
                $('#info_msg').fadeIn().delay(3000).fadeOut();
                $('.msg_text').text('Data updated successfully.');
            }
            else
            {
                $('#fail_msg').fadeIn().delay(3000).fadeOut();
                $('.error_msg_text').text('Data cannot updated right now. Please try again after some time.');
            }
            
        }
    });
}

function dlt_multi_tts() {
    var favorite = [];
    $.each($("input[name='chkttsall']:checked"), function () {
        favorite.push($(this).val());
    });
    $.ajax({
        url: "../amazone_polly/delete_multi_audio.php",
        type: "POST",
        data: { audio_id: favorite, opt: "delete_multi_tts" },
        success: function (followup) {
            //setTimeout(function () {
                //window.location.reload();
                $("#deleteconfirmmulti").removeClass("deleteconfirm--active");
                $("#info_msg").fadeIn().delay(2000).fadeOut();
                $("#info_msg .msg_text").text("Audios deleted successfully");
                
            //}, 2000);
            setTimeout(function(){location.reload();}, 2000);
        },
    });
}

function download_thumbnail(thumb_path)
{
    $.ajax({
        url: "../backend_files/save_thumb_temp.php",
        type: "POST",
        data: { file: thumb_path },
        success: function (followup) {
            var url = site_url+"backend_files/download_thumbnail.php?file="+followup;
            window.location.href=url;
            
            setTimeout(function(){ delete_thumb_temp(followup); }, 60000);
        },
    });
}

function delete_thumb_temp(x)
{
    $.ajax({
        url: "../backend_files/delete_temp_thumb.php",
        type: "POST",
        data: { file: x },
        success: function (followup) {
            
        },
    });
}
function zoom_opt()
{
    if($('#zoom').is(':checked')==true)
    {
        $('#zoom_div').show();
        $('.vjs-extend-zoom').show();
    }
    else
    {
        $('#zoom_div').hide();
        $('.vjs-extend-zoom').hide();
    }
        
}